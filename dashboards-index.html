<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PwC Dashboard Pattern Library</title>
  <link rel="icon" href="data:,">
<style>

/* =============================================
   RESET & DESIGN TOKENS
============================================= */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --orange500: #fd5108; --orange400: #e8530e;
  --orange300: #ffaa72; --orange100: #ffe8d4; --orange50: #fff5f0;
  --black: #000; --grey900: #111; --grey700: #374151; --grey600: #4b5563;
  --grey500: #a1a8b3; --grey400: #b5bcc4; --grey300: #cbd1d6;
  --grey200: #dfe3e6; --grey100: #eeeff1; --white: #fff;
  --success: #22c55e; --successBg: #dcfce7;
  --warning: #eab308; --warningBg: #fef3c7;
  --danger: #ef4444; --dangerBg: #fee2e2;
  --info: #3b82f6; --infoBg: #dbeafe;
  --bgColor: #eeeff1; --cardBg: #fff; --textColor: #000;
  --secondaryText: #a1a8b3; --borderColor: #dfe3e6;
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.10);
  --shadow-lg: 0 8px 24px rgba(0,0,0,0.15);
  --radius-sm: 6px; --radius-md: 10px; --radius-lg: 16px; --radius-pill: 100px;
}

html { height: 100%; }
body {
  font-family: system-ui, -apple-system, sans-serif;
  background: var(--bgColor); color: var(--textColor);
  font-size: 14px; line-height: 1.6; min-height: 100vh;
}
button { cursor: pointer; font-family: inherit; }
input, select { font-family: inherit; }
h1,h2,h3,h4 { letter-spacing: -0.01em; }

@keyframes fadeIn  { from { opacity: 0 } to { opacity: 1 } }
@keyframes slideUp { from { opacity:0; transform:translateY(8px) } to { opacity:1; transform:translateY(0) } }

/* =============================================
   HEADER
============================================= */
#app-header {
  position: fixed; top:0; left:0; right:0; z-index:300;
  height: 52px; display: flex; align-items: center;
  justify-content: space-between; padding: 0 24px;
  background: var(--cardBg); border-bottom: 1px solid var(--borderColor);
}
.header-brand { display:flex; align-items:center; gap:12px; }
.header-logo {
  width:30px; height:30px; border-radius:7px; background:var(--orange500);
  display:flex; align-items:center; justify-content:center;
  color:#fff; font-size:13px; font-weight:700; flex-shrink:0;
}
.header-title   { font-size:15px; font-weight:600; }
.header-subtitle{ font-size:11px; color:var(--secondaryText); }
.header-divider { width:1px; height:20px; background:var(--borderColor); }
.header-nav     { display:flex; align-items:center; gap:2px; }
.nav-btn {
  padding:6px 14px; font-size:12.5px; font-weight:500;
  color:var(--secondaryText); background:transparent; border:none;
  border-radius:var(--radius-pill); transition:all 140ms; white-space:nowrap;
  position:relative;
}
.nav-btn:hover  { background:var(--grey100); color:var(--textColor); }
.nav-btn.active { background:var(--orange50); color:var(--orange400); font-weight:600; }
.compare-badge {
  display:inline-flex; align-items:center; justify-content:center;
  width:16px; height:16px; border-radius:50%; margin-left:4px;
  background:var(--orange500); color:#fff; font-size:9px; font-weight:700;
}
.header-actions { display:flex; align-items:center; gap:6px; }
.btn-icon {
  width:34px; height:34px; display:flex; align-items:center; justify-content:center;
  border:none; background:transparent; border-radius:var(--radius-sm);
  color:var(--secondaryText); font-size:15px; transition:all 140ms;
}
.btn-icon.active, .btn-icon:hover { background:var(--grey100); color:var(--textColor); }

/* =============================================
   VIEW CONTAINERS
============================================= */
#app-body { margin-top:52px; min-height:calc(100vh - 52px); }
div[data-view]         { display:none; animation:fadeIn 180ms ease; }
div[data-view].active  { display:block; }
#view-gallery.active   { display:block; }

/* =============================================
   SHARED BUTTONS
============================================= */
.btn {
  padding:7px 16px; font-size:12.5px; font-weight:500;
  border:1px solid var(--borderColor); border-radius:var(--radius-pill);
  background:var(--cardBg); color:var(--textColor);
  transition:all 140ms; cursor:pointer;
}
.btn:hover          { background:var(--grey100); }
.btn:disabled       { opacity:.4; cursor:not-allowed; }
.btn.btn-primary    {
  background:var(--orange500); color:#fff; border-color:var(--orange500);
  font-weight:600; box-shadow:0 2px 8px rgba(253,81,8,.28);
}
.btn.btn-primary:hover  { background:var(--orange400); border-color:var(--orange400); }
.btn.btn-compare        { background:var(--cardBg); color:var(--textColor); }
.btn.btn-compare.active {
  background:var(--orange50); color:var(--orange400); border-color:var(--orange300);
}
.btn-sm {
  padding:5px 12px; font-size:11.5px; font-weight:500;
  border:1px solid var(--borderColor); border-radius:var(--radius-sm);
  background:var(--cardBg); color:var(--textColor); transition:all 130ms; cursor:pointer;
}
.btn-sm:hover { background:var(--grey100); }

/* =============================================
   GALLERY: FILTER RAIL
============================================= */
.filter-rail {
  display:flex; flex-wrap:wrap; align-items:flex-end; gap:12px;
  padding:16px 24px; background:var(--cardBg);
  border-bottom:1px solid var(--borderColor);
}
.filter-group { display:flex; flex-direction:column; gap:4px; }
.filter-group label {
  font-size:10px; font-weight:700; letter-spacing:.07em;
  text-transform:uppercase; color:var(--secondaryText);
}
.filter-group select,
.filter-group input[type="text"] {
  padding:6px 10px; border:1px solid var(--borderColor);
  border-radius:var(--radius-sm); font-size:12.5px;
  background:var(--bgColor); color:var(--textColor);
  outline:none; cursor:pointer; transition:border-color 140ms;
  min-width:140px;
}
.filter-group select:focus,
.filter-group input[type="text"]:focus { border-color:var(--orange400); }
.filter-group.search-group input { min-width:200px; }
.filter-group.view-toggle {
  flex-direction:row; align-items:flex-end; gap:2px;
  border:1px solid var(--borderColor); border-radius:var(--radius-sm); overflow:hidden;
}
.filter-group.view-toggle .btn-icon {
  width:32px; height:32px; border-radius:0; border:none;
}

/* =============================================
   GALLERY: RESULTS COUNT & GRID
============================================= */
.results-count {
  font-size:12.5px; color:var(--secondaryText);
  padding:12px 24px 0;
}
.card-grid {
  display:grid; gap:14px; padding:14px 24px 24px;
}
.card-grid.grid-mode {
  grid-template-columns: repeat(auto-fill, minmax(268px, 1fr));
}
.card-grid.list-mode { grid-template-columns: 1fr; }

/* =============================================
   PATTERN CARD
============================================= */
.pattern-card {
  background:var(--cardBg); border:1px solid var(--borderColor);
  border-radius:var(--radius-lg); overflow:hidden; cursor:pointer;
  transition:all 200ms ease; box-shadow:var(--shadow-sm);
  animation:slideUp 260ms ease; display:flex; flex-direction:column;
}
.pattern-card:hover {
  transform:translateY(-2px); box-shadow:var(--shadow-md);
  border-color:var(--grey300);
}
.card-grid.list-mode .pattern-card {
  flex-direction:row;
}
.card-grid.list-mode .card-preview {
  width:200px; flex-shrink:0; height:auto;
}
.card-preview {
  height:134px; overflow:hidden; flex-shrink:0;
}
.card-preview svg { display:block; width:100%; height:100%; }
.card-body { padding:13px 15px 11px; flex:1; }
.card-meta { display:flex; align-items:center; gap:6px; margin-bottom:7px; flex-wrap:wrap; }
.category-badge {
  display:inline-flex; align-items:center; gap:4px;
  padding:2px 8px; border-radius:var(--radius-pill);
  font-size:10px; font-weight:700; letter-spacing:.04em;
}
.maturity-badge {
  display:inline-flex; align-items:center;
  padding:2px 7px; border-radius:var(--radius-pill);
  font-size:10px; font-weight:600;
}
.maturity-foundational { background:var(--infoBg);    color:var(--info); }
.maturity-advanced     { background:var(--warningBg); color:#b45309; }
.maturity-strategic    { background:var(--successBg); color:#166534; }
.maturity-starter      { background:var(--infoBg);    color:var(--info); }
.maturity-intermediate { background:var(--warningBg); color:#b45309; }
.card-title  { font-size:13.5px; font-weight:600; margin-bottom:5px; line-height:1.3; }
.card-desc   {
  font-size:12px; color:var(--secondaryText); line-height:1.5;
  margin-bottom:8px; display:-webkit-box; -webkit-line-clamp:2;
  -webkit-box-orient:vertical; overflow:hidden;
}
.card-tags   { display:flex; flex-wrap:wrap; gap:4px; }
.tag {
  padding:2px 7px; border-radius:var(--radius-pill);
  font-size:10px; font-weight:500; background:var(--grey100); color:var(--grey600);
}
.card-footer {
  display:flex; align-items:center; justify-content:space-between;
  padding:9px 15px; border-top:1px solid var(--borderColor);
  background:var(--bgColor); gap:6px; margin-top:auto;
}
.no-results {
  grid-column:1/-1; padding:60px 20px; text-align:center;
  color:var(--secondaryText); font-size:13px;
}
.no-results button { margin-top:12px; }

/* =============================================
   FINDER WIZARD
============================================= */
#view-finder { max-width:700px; margin:0 auto; padding:40px 24px; }
.wizard-container { animation:fadeIn 180ms ease; }
.wizard-header { margin-bottom:28px; }
.wizard-header h2 { font-size:22px; font-weight:700; margin-bottom:6px; }
.wizard-header p  { font-size:13.5px; color:var(--secondaryText); }
.wizard-progress-bar {
  height:4px; background:var(--grey200); border-radius:2px; margin:14px 0 6px;
}
.wizard-progress-fill {
  height:100%; background:var(--orange400); border-radius:2px; transition:width 300ms ease;
}
.wizard-step-count { font-size:11px; color:var(--secondaryText); }
.wizard-question h3 { font-size:16px; font-weight:600; margin-bottom:16px; }
.wizard-options {
  display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:24px;
}
.wizard-option {
  padding:14px 16px; text-align:left; font-size:13px;
  border:1.5px solid var(--borderColor); border-radius:var(--radius-md);
  background:var(--cardBg); transition:all 140ms; cursor:pointer;
}
.wizard-option:hover   { border-color:var(--orange300); background:var(--orange50); }
.wizard-option.selected{ border-color:var(--orange400); background:var(--orange50); font-weight:600; }
.wizard-nav { display:flex; justify-content:space-between; align-items:center; }

/* Finder results */
.finder-results { display:flex; flex-direction:column; gap:12px; margin-bottom:24px; }
.finder-result-card {
  display:flex; align-items:flex-start; gap:14px;
  padding:14px 16px; background:var(--cardBg);
  border:1px solid var(--borderColor); border-radius:var(--radius-md);
  cursor:pointer; transition:all 140ms;
}
.finder-result-card:hover { border-color:var(--orange300); box-shadow:var(--shadow-sm); }
.result-rank {
  width:30px; height:30px; border-radius:50%; background:var(--orange500); color:#fff;
  display:flex; align-items:center; justify-content:center;
  font-size:13px; font-weight:700; flex-shrink:0;
}
.result-preview { width:120px; flex-shrink:0; border-radius:var(--radius-sm); overflow:hidden; }
.result-info    { flex:1; min-width:0; }
.result-info h3 { font-size:13.5px; font-weight:600; margin-bottom:4px; }
.result-info p  { font-size:12px; color:var(--secondaryText); margin-bottom:8px; }
.result-score   { display:flex; align-items:center; gap:8px; font-size:11px; color:var(--secondaryText); }
.score-bar      { flex:1; max-width:120px; height:4px; background:var(--grey200); border-radius:2px; }
.score-fill     { height:100%; border-radius:2px; background:var(--orange400); }
.result-actions { display:flex; flex-direction:column; gap:6px; flex-shrink:0; }

/* =============================================
   COMPARE VIEW
============================================= */
#view-compare { padding:24px; }
.compare-empty {
  max-width:500px; margin:80px auto; text-align:center;
  color:var(--secondaryText);
}
.compare-empty h2 { font-size:18px; font-weight:700; color:var(--textColor); margin-bottom:8px; }
.compare-empty p  { font-size:13px; margin-bottom:20px; }
.compare-header {
  display:flex; align-items:center; justify-content:space-between;
  margin-bottom:20px;
}
.compare-header h2 { font-size:17px; font-weight:700; }
.compare-table-wrap {
  border:1px solid var(--borderColor); border-radius:var(--radius-lg);
  overflow:hidden; box-shadow:var(--shadow-sm);
}
.compare-table { width:100%; border-collapse:collapse; }
.compare-table th, .compare-table td {
  padding:11px 16px; border-bottom:1px solid var(--borderColor);
  text-align:left; font-size:12.5px; vertical-align:top;
}
.compare-table tr:last-child td,
.compare-table tr:last-child th { border-bottom:none; }
.compare-table thead tr th:first-child,
.compare-label {
  background:var(--bgColor); font-size:10.5px; font-weight:700;
  letter-spacing:.06em; text-transform:uppercase; color:var(--secondaryText);
  white-space:nowrap; vertical-align:middle !important;
  width:140px;
}
.compare-table thead th { background:var(--cardBg); }
.compare-table tbody td { background:var(--cardBg); }
.compare-table tbody tr:nth-child(even) td { background:var(--bgColor); }
.compare-hint { font-size:12px; color:var(--secondaryText); margin-top:12px; }

/* =============================================
   DETAIL VIEW
============================================= */
#view-detail { max-width:1000px; margin:0 auto; padding:24px; }
.detail-header {
  display:flex; align-items:flex-start; gap:16px;
  background:var(--cardBg); border:1px solid var(--borderColor);
  border-radius:var(--radius-lg); padding:20px 22px;
  margin-bottom:18px; box-shadow:var(--shadow-sm);
}
.detail-title-block { flex:1; min-width:0; }
.detail-title-block .category-badge { margin-bottom:8px; display:inline-flex; }
.detail-title-block h1 {
  font-size:20px; font-weight:700; margin-bottom:6px; line-height:1.2;
}
.detail-title-block p { font-size:13.5px; color:var(--secondaryText); }
.detail-actions { display:flex; gap:8px; flex-shrink:0; }
.detail-tabs {
  display:flex; gap:2px; padding:4px;
  background:var(--cardBg); border:1px solid var(--borderColor);
  border-radius:var(--radius-md); margin-bottom:18px;
  box-shadow:var(--shadow-sm); overflow-x:auto;
}
.detail-tabs::-webkit-scrollbar { display:none; }
.tab-btn {
  flex:1; min-width:max-content;
  padding:7px 14px; font-size:12px; font-weight:500;
  border:none; border-radius:var(--radius-sm);
  background:transparent; color:var(--secondaryText); transition:all 140ms;
}
.tab-btn:hover  { background:var(--grey100); color:var(--textColor); }
.tab-btn.active { background:var(--orange500); color:#fff; font-weight:600; }
.tab-panel              { display:none; animation:fadeIn 180ms ease; }
.tab-panel.active       { display:block; }
.detail-panels > .tab-panel {
  background:var(--cardBg); border:1px solid var(--borderColor);
  border-radius:var(--radius-lg); padding:22px; box-shadow:var(--shadow-sm);
}
/* Overview */
.overview-grid {
  display:grid; grid-template-columns:240px 1fr; gap:20px;
}
.overview-preview { border-radius:var(--radius-md); overflow:hidden; }
.overview-meta    { }
.meta-table { width:100%; border-collapse:collapse; margin-bottom:16px; }
.meta-table th, .meta-table td {
  padding:7px 10px; text-align:left; font-size:12.5px;
  border-bottom:1px solid var(--borderColor);
}
.meta-table tr:last-child td,
.meta-table tr:last-child th { border-bottom:none; }
.meta-table th { width:110px; font-weight:600; color:var(--secondaryText); background:var(--bgColor); }
.overview-when h4 { font-size:11px; font-weight:700; letter-spacing:.07em; text-transform:uppercase; color:var(--secondaryText); margin-bottom:6px; }
.overview-when p  { font-size:13px; color:var(--grey700); line-height:1.65; }
/* Layouts */
.layouts-section h3 { font-size:14px; font-weight:600; margin-bottom:14px; }
.layouts-grid { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.layout-card { border:1px solid var(--borderColor); border-radius:var(--radius-md); overflow:hidden; }
.layout-thumb { border-bottom:1px solid var(--borderColor); }
.layout-name { padding:10px 12px; font-size:12.5px; font-weight:600; }
/* KPIs */
.kpis-section h3 { font-size:14px; font-weight:600; margin-bottom:14px; }
.kpi-table { width:100%; border-collapse:collapse; }
.kpi-table th, .kpi-table td {
  padding:9px 12px; text-align:left; font-size:12.5px;
  border-bottom:1px solid var(--borderColor);
}
.kpi-table th { background:var(--bgColor); font-weight:600; color:var(--secondaryText); font-size:10.5px; text-transform:uppercase; letter-spacing:.06em; }
.kpi-table tr:last-child td { border-bottom:none; }
/* Data & Gov */
.datagov-section h3 { font-size:14px; font-weight:600; margin-bottom:14px; }
.datagov-grid { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.datagov-block {
  padding:14px; background:var(--bgColor);
  border:1px solid var(--borderColor); border-radius:var(--radius-md);
}
.datagov-block h4 { font-size:10.5px; font-weight:700; letter-spacing:.07em; text-transform:uppercase; color:var(--secondaryText); margin-bottom:6px; }
.datagov-block ul { list-style:none; }
.datagov-block ul li { font-size:12.5px; padding:3px 0; display:flex; gap:6px; }
.datagov-block ul li::before { content:"‚Ä¢"; color:var(--orange400); }
.datagov-block p  { font-size:12.5px; color:var(--grey700); line-height:1.55; }
/* Customize */
.customize-section h3 { font-size:14px; font-weight:600; margin-bottom:14px; }
.customize-list { display:flex; flex-direction:column; gap:0; }
.customize-item {
  padding:14px 0; border-bottom:1px solid var(--borderColor);
}
.customize-item:last-child { border-bottom:none; }
.customize-item h4 { font-size:12.5px; font-weight:600; margin-bottom:4px; }
.customize-item p  { font-size:12px; color:var(--secondaryText); line-height:1.55; }
/* Export (in detail) */
.export-section h3 { font-size:14px; font-weight:600; margin-bottom:14px; }
.export-options { display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px; }
.export-option {
  padding:16px; background:var(--bgColor);
  border:1px solid var(--borderColor); border-radius:var(--radius-md);
}
.export-option h4 { font-size:12.5px; font-weight:600; margin-bottom:6px; }
.export-option p  { font-size:11.5px; color:var(--secondaryText); margin-bottom:12px; line-height:1.5; }

/* =============================================
   EXPORTS VIEW
============================================= */
#view-exports { max-width:800px; margin:0 auto; padding:40px 24px; }
.exports-header { margin-bottom:28px; }
.exports-header h2 { font-size:22px; font-weight:700; margin-bottom:6px; }
.exports-header p  { font-size:13.5px; color:var(--secondaryText); }
.exports-grid { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
.export-card {
  background:var(--cardBg); border:1px solid var(--borderColor);
  border-radius:var(--radius-lg); padding:22px; box-shadow:var(--shadow-sm);
}
.export-icon { font-size:28px; margin-bottom:12px; display:block; }
.export-card h3 { font-size:14px; font-weight:600; margin-bottom:8px; }
.export-card p  { font-size:12.5px; color:var(--secondaryText); margin-bottom:10px; line-height:1.55; }
.export-card ul { list-style:none; margin-bottom:16px; }
.export-card ul li { font-size:12px; color:var(--secondaryText); padding:2px 0; display:flex; gap:6px; }
.export-card ul li::before { content:"‚úì"; color:var(--success); }
.export-compare-actions { display:flex; gap:6px; }
.hint { font-size:11.5px; color:var(--secondaryText); margin-top:8px; }

/* =============================================
   ABOUT VIEW
============================================= */
#view-about { max-width:720px; margin:0 auto; padding:40px 24px; }
.about-header { margin-bottom:28px; }
.about-header h2 { font-size:22px; font-weight:700; margin-bottom:6px; }
.about-header p  { font-size:13.5px; color:var(--secondaryText); }
.about-stats {
  display:grid; grid-template-columns:repeat(4,1fr); gap:12px; margin-bottom:24px;
}
.stat-card {
  background:var(--cardBg); border:1px solid var(--borderColor);
  border-radius:var(--radius-md); padding:16px; text-align:center;
}
.stat-num   { font-size:26px; font-weight:700; letter-spacing:-0.02em; color:var(--orange500); }
.stat-label { font-size:10.5px; color:var(--secondaryText); text-transform:uppercase; letter-spacing:.06em; font-weight:600; }
.about-schema-check {
  background:var(--cardBg); border:1px solid var(--borderColor);
  border-radius:var(--radius-lg); padding:20px; margin-bottom:20px; box-shadow:var(--shadow-sm);
}
.about-schema-check h3 { font-size:14px; font-weight:600; margin-bottom:14px; }
.check-pass { color:var(--success); font-weight:600; }
.check-fail { color:var(--danger);  font-weight:600; }
.schema-table { width:100%; border-collapse:collapse; }
.schema-table th, .schema-table td {
  padding:8px 12px; text-align:left; font-size:12.5px;
  border-bottom:1px solid var(--borderColor);
}
.schema-table th { background:var(--bgColor); font-weight:600; color:var(--secondaryText); font-size:10.5px; text-transform:uppercase; letter-spacing:.06em; }
.schema-table tr:last-child td { border-bottom:none; }
.about-coverage {
  background:var(--cardBg); border:1px solid var(--borderColor);
  border-radius:var(--radius-lg); padding:20px; margin-bottom:20px; box-shadow:var(--shadow-sm);
}
.about-coverage h3 { font-size:14px; font-weight:600; margin-bottom:14px; }
.coverage-grid { display:flex; flex-direction:column; gap:8px; }
.coverage-item { display:flex; align-items:center; gap:10px; font-size:12.5px; }
.coverage-item > span:first-child { width:120px; flex-shrink:0; }
.coverage-bar  { flex:1; height:8px; background:var(--grey200); border-radius:4px; overflow:hidden; }
.coverage-fill { height:100%; border-radius:4px; transition:width 600ms ease; }
.coverage-count{ width:24px; text-align:right; color:var(--secondaryText); font-weight:600; flex-shrink:0; }
.about-categories {
  background:var(--cardBg); border:1px solid var(--borderColor);
  border-radius:var(--radius-lg); padding:20px; box-shadow:var(--shadow-sm);
}
.about-categories h3 { font-size:14px; font-weight:600; margin-bottom:14px; }
.cat-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:8px; }
.cat-card {
  display:flex; align-items:center; gap:8px;
  padding:10px 14px; background:var(--bgColor);
  border-left:3px solid; border-radius:var(--radius-sm);
}
.cat-icon { font-size:16px; }
.cat-name { font-size:12.5px; font-weight:500; }

/* =============================================
   TOAST
============================================= */
#toast {
  position:fixed; bottom:24px; right:24px; z-index:9999;
  max-width:320px; padding:11px 18px;
  background:var(--grey900); color:#fff;
  border-radius:var(--radius-md); font-size:13px; font-weight:500;
  box-shadow:var(--shadow-lg); pointer-events:none;
  opacity:0; transition:opacity 250ms ease;
}

/* =============================================
   PRINT
============================================= */
@media print {
  #app-header, .header-actions, .filter-rail, .card-actions,
  .detail-actions, .detail-tabs, .btn, .btn-sm, #toast { display:none !important; }
  body { background:#fff; font-size:12px; }
  #app-body { margin-top:0; }
  .pattern-card { break-inside:avoid; box-shadow:none; border:1px solid #ccc; }
  .card-grid { grid-template-columns:repeat(3,1fr) !important; gap:8px !important; }
}

/* =============================================
   UTILITIES
============================================= */
code { font-family:monospace; font-size:12px; background:var(--grey100); padding:1px 4px; border-radius:3px; }

</style>
</head>
<body>

<header id="app-header">
  <div class="header-brand">
    <div class="header-logo">DL</div>
    <div>
      <div class="header-title">Dashboard Pattern Library</div>
      <div class="header-subtitle">PwC Delivery Launchpad</div>
    </div>
  </div>
  <nav class="header-nav" aria-label="Main navigation">
    <button class="nav-btn" data-view="gallery"  onclick="navigate('gallery')">Gallery</button>
    <button class="nav-btn" data-view="finder"   onclick="navigate('finder')">Finder</button>
    <button class="nav-btn" data-view="compare"  onclick="navigate('compare')">
      Compare <span id="compare-count" class="compare-badge" style="display:none"></span>
    </button>
    <button class="nav-btn" data-view="exports"  onclick="navigate('exports')">Exports</button>
    <button class="nav-btn" data-view="about"    onclick="navigate('about')">About</button>
  </nav>
  <div class="header-actions">
    <button class="btn-icon" title="Print" onclick="window.print()">üñ®Ô∏è</button>
    <button class="btn-icon" title="Back to Launchpad" onclick="window.location.href='index.html'">üè†</button>
  </div>
</header>

<main id="app-body">
  <div id="view-gallery" data-view="gallery"></div>
  <div id="view-finder"  data-view="finder"></div>
  <div id="view-compare" data-view="compare"></div>
  <div id="view-detail"  data-view="detail"></div>
  <div id="view-exports" data-view="exports"></div>
  <div id="view-about"   data-view="about"></div>
</main>

<div id="toast" role="status" aria-live="polite"></div>

<script>
const PATTERNS = [
  {
    id: "exec-pulse",
    name: "C-Suite Executive Pulse",
    category: "executive",
    audience: ["C-Suite", "Board", "Senior Leadership Team"],
    purpose: "strategic-oversight",
    maturity: "foundational",
    cadence: "weekly",
    desc: "A weekly single-page view of enterprise health across financial, operational, customer, and people dimensions for senior executives.",
    longDesc: "The C-Suite Executive Pulse aggregates the most critical leading and lagging indicators across all business functions into a concise weekly briefing. It surfaces exceptions and trend deviations so executives can direct attention and resources before issues escalate. Designed to replace lengthy status reports with a visual, exception-driven format that supports 15-minute leadership team reviews.",
    tags: ["executive", "kpi-summary", "weekly-review", "exception-reporting", "multi-domain"],
    keyQuestions: [
      "Are we on track to deliver this quarter's financial and strategic commitments?",
      "Which business units or functions require immediate executive intervention?",
      "How have key metrics trended over the past four weeks relative to targets?"
    ],
    kpis: [
      { name: "Revenue vs Target", formula: "Actual Revenue / Target Revenue √ó 100", unit: "%", frequency: "Weekly", owner: "CFO" },
      { name: "EBITDA Margin", formula: "(EBITDA / Net Revenue) √ó 100", unit: "%", frequency: "Weekly", owner: "CFO" },
      { name: "Customer NPS", formula: "% Promoters - % Detractors", unit: "Score (-100 to 100)", frequency: "Weekly", owner: "CCO" },
      { name: "Employee Engagement Index", formula: "Weighted average of pulse survey responses (scale 1-10)", unit: "Score", frequency: "Weekly", owner: "CHRO" },
      { name: "Operational Uptime", formula: "(Total Available Time - Downtime) / Total Available Time √ó 100", unit: "%", frequency: "Weekly", owner: "COO" },
      { name: "Strategic Initiative On-Time Rate", formula: "Initiatives On Track / Total Active Initiatives √ó 100", unit: "%", frequency: "Weekly", owner: "CEO" }
    ],
    layouts: [
      {
        name: "Executive Scorecard View",
        desc: "Single-page grid of KPI tiles with RAG status, sparkline trends, and a commentary panel for each domain.",
        chartTypes: ["kpi-tile", "sparkline", "gauge"]
      },
      {
        name: "Trend Deep-Dive View",
        desc: "Four-quadrant layout with 13-week rolling trend lines per domain, enabling week-on-week comparison against prior year.",
        chartTypes: ["line", "bar", "sparkline"]
      }
    ],
    dataSources: [
      { name: "Enterprise ERP", type: "SQL", system: "SAP S/4HANA" },
      { name: "HR Information System", type: "API", system: "Workday" },
      { name: "CRM Platform", type: "API", system: "Salesforce" }
    ],
    customParams: [
      { name: "Reporting Entity", desc: "Select the organisational scope for aggregation", options: ["Group Consolidated", "Business Unit", "Geography", "Legal Entity"] },
      { name: "Comparison Baseline", desc: "Choose the benchmark period for variance calculations", options: ["Prior Week", "Prior Year Same Week", "Budget", "Forecast"] },
      { name: "RAG Threshold Sensitivity", desc: "Set the tolerance bands that trigger Amber and Red status", options: ["Tight (¬±2%)", "Standard (¬±5%)", "Relaxed (¬±10%)"] }
    ],
    workshopNotes: "During PwC facilitation sessions for this pattern, begin by mapping the executive team's top five strategic priorities for the current year and aligning each KPI directly to one priority‚Äîthis creates instant buy-in and reduces scope creep. Use a 'newspaper test' exercise where participants write the headline they would want to see in a weekly leadership email, then reverse-engineer the metrics that would support it. Agree RAG thresholds collaboratively, anchoring amber bands to the point at which an executive would 'pick up the phone', and red bands to the point requiring a board notification. Stress that the pulse should replace, not supplement, existing status reports to avoid dashboard fatigue."
  },
  {
    id: "board-pack",
    name: "Board Performance Pack",
    category: "executive",
    audience: ["Board of Directors", "Non-Executive Directors", "Company Secretary"],
    purpose: "strategic-oversight",
    maturity: "advanced",
    cadence: "quarterly",
    desc: "A quarterly interactive board pack presenting enterprise performance against strategic objectives, risk appetite, and stakeholder commitments.",
    longDesc: "The Board Performance Pack transforms the traditional static PDF board report into a dynamic, filterable presentation layer that board members can interrogate during meetings. It spans financial performance, risk and compliance status, strategic milestone delivery, and ESG commitments, providing a complete view of corporate health. The pack is designed to meet the information needs of audit, remuneration, and risk sub-committees while maintaining a coherent group-level narrative.",
    tags: ["board", "governance", "quarterly", "strategic", "risk-appetite"],
    keyQuestions: [
      "Has the organisation delivered on the strategic objectives committed to at the start of the year?",
      "Are material risks being managed within the board-approved risk appetite?",
      "What are the key variances to financial plan and what actions are in place?"
    ],
    kpis: [
      { name: "Return on Equity", formula: "(Net Income / Shareholders' Equity) √ó 100", unit: "%", frequency: "Quarterly", owner: "CFO" },
      { name: "Strategic Objective Completion Rate", formula: "Objectives Achieved / Total Objectives √ó 100", unit: "%", frequency: "Quarterly", owner: "CEO" },
      { name: "Risk-within-Appetite Rate", formula: "Risks Rated Within Appetite / Total Rated Risks √ó 100", unit: "%", frequency: "Quarterly", owner: "CRO" },
      { name: "Total Shareholder Return", formula: "(Ending Price - Beginning Price + Dividends) / Beginning Price √ó 100", unit: "%", frequency: "Quarterly", owner: "CFO" },
      { name: "Regulatory Breach Count", formula: "Count of confirmed regulatory breaches in the period", unit: "Count", frequency: "Quarterly", owner: "General Counsel" },
      { name: "ESG Composite Score", formula: "Weighted average of E, S, and G sub-scores (each 0-100)", unit: "Score", frequency: "Quarterly", owner: "Chief Sustainability Officer" }
    ],
    layouts: [
      {
        name: "Narrative Board Pack",
        desc: "Sequential slide-style layout with a chairman's summary page, section dividers, and supporting charts for each board agenda item.",
        chartTypes: ["kpi-tile", "bar", "line", "donut"]
      },
      {
        name: "Interactive Exception View",
        desc: "Committee-specific filtered view highlighting only metrics outside tolerance, with drill-down to supporting data and management commentary.",
        chartTypes: ["heatmap", "gauge", "kpi-tile", "scatter"]
      }
    ],
    dataSources: [
      { name: "Consolidation Platform", type: "SQL", system: "OneStream XF" },
      { name: "Risk Management System", type: "SQL", system: "ServiceNow GRC" },
      { name: "ESG Reporting Tool", type: "API", system: "Workiva" }
    ],
    customParams: [
      { name: "Board Committee Filter", desc: "Restrict content to the scope of a specific board sub-committee", options: ["Full Board", "Audit Committee", "Risk Committee", "Remuneration Committee"] },
      { name: "Strategic Horizon", desc: "Toggle between current-year delivery and multi-year strategic trajectory", options: ["Current Year", "3-Year Outlook", "5-Year Outlook"] },
      { name: "Peer Benchmarking", desc: "Include industry peer comparator data alongside internal metrics", options: ["Enabled", "Disabled"] }
    ],
    workshopNotes: "PwC board advisory sessions for this pattern should open with a review of the board's information charter or terms of reference to establish what each committee is legally and regulatorily required to see. Facilitate a 'red-team' exercise where participants role-play as activist shareholders or regulators interrogating the pack‚Äîthis rapidly identifies gaps in narrative and data. Particular attention should be given to defining management commentary standards: boards consistently report that qualitative insight is more valuable than additional charts. Agree a version-control and sign-off workflow with the Company Secretary before build commences to ensure the digital pack meets governance requirements."
  },
  {
    id: "strategic-scorecard",
    name: "Strategic Scorecard",
    category: "executive",
    audience: ["C-Suite", "Strategy Team", "Business Unit Leaders"],
    purpose: "strategic-oversight",
    maturity: "strategic",
    cadence: "monthly",
    desc: "A balanced scorecard translating five-year strategic objectives into measurable KPIs across financial, customer, process, and people perspectives.",
    longDesc: "The Strategic Scorecard operationalises the organisation's strategy map by cascading group-level objectives through business units and functions, creating a coherent line of sight from boardroom ambition to front-line activity. It applies the Kaplan-Norton Balanced Scorecard methodology, supplemented with dynamic weighting to reflect evolving strategic priorities. Monthly reviews use the scorecard as an agenda anchor, ensuring leadership meetings remain outcome-focused rather than activity-focused.",
    tags: ["balanced-scorecard", "strategy-execution", "okr", "cascaded-kpis", "monthly"],
    keyQuestions: [
      "Are our strategic initiatives generating the expected outcomes across all four BSC perspectives?",
      "Where are the interdependencies between strategic objectives creating bottlenecks?",
      "Which business units are leading or lagging on strategy execution?"
    ],
    kpis: [
      { name: "Strategic Initiative ROI", formula: "(Benefits Realised - Initiative Cost) / Initiative Cost √ó 100", unit: "%", frequency: "Monthly", owner: "CFO" },
      { name: "Customer Lifetime Value Growth", formula: "(Current Period CLV - Prior Period CLV) / Prior Period CLV √ó 100", unit: "%", frequency: "Monthly", owner: "CCO" },
      { name: "Process Efficiency Improvement", formula: "(Baseline Cycle Time - Current Cycle Time) / Baseline Cycle Time √ó 100", unit: "%", frequency: "Monthly", owner: "COO" },
      { name: "Leadership Capability Index", formula: "Composite score of 360-degree leadership assessments (scale 0-100)", unit: "Score", frequency: "Monthly", owner: "CHRO" },
      { name: "Innovation Pipeline Value", formula: "Sum of risk-adjusted NPV of initiatives in innovation pipeline", unit: "¬£M", frequency: "Monthly", owner: "Chief Strategy Officer" },
      { name: "Market Share Movement", formula: "(Current Market Share - Prior Period Market Share) in percentage points", unit: "pp", frequency: "Monthly", owner: "CEO" }
    ],
    layouts: [
      {
        name: "Strategy Map View",
        desc: "Visual strategy map with objective nodes colour-coded by performance status, linked by cause-and-effect arrows showing strategic dependencies.",
        chartTypes: ["kpi-tile", "gauge", "scatter"]
      },
      {
        name: "Perspective Cascade View",
        desc: "Four-panel layout aligned to BSC perspectives (Financial, Customer, Internal Process, Learning & Growth) with unit-level drill-down.",
        chartTypes: ["bar", "line", "kpi-tile", "sparkline"]
      }
    ],
    dataSources: [
      { name: "Strategy Management Platform", type: "API", system: "Cascade Strategy" },
      { name: "Financial Planning System", type: "SQL", system: "Anaplan" },
      { name: "People & Culture Platform", type: "API", system: "Workday" }
    ],
    customParams: [
      { name: "BSC Perspective Weight", desc: "Adjust the relative weighting of each Balanced Scorecard perspective in the composite score", options: ["Equal Weight (25/25/25/25)", "Financial-led (40/20/20/20)", "Customer-led (20/40/20/20)"] },
      { name: "Cascade Level", desc: "Select the organisational tier to display", options: ["Group", "Division", "Business Unit", "Function"] },
      { name: "Strategy Cycle", desc: "Toggle between current strategic plan cycle and historical cycles for trend analysis", options: ["2024-2026 Plan", "2021-2023 Plan", "All Cycles"] }
    ],
    workshopNotes: "PwC strategy realisation workshops for this pattern work best when preceded by a strategy clarity assessment‚Äîfrequently, organisations discover mid-workshop that their strategic objectives are not measurable as stated. Use the 'so that' technique to stress-test each objective: 'We will improve process efficiency so that‚Ä¶ customer satisfaction increases so that‚Ä¶ revenue grows.' This creates the causal logic needed to build a valid strategy map. Resist the temptation to include more than 15-20 KPIs; the scorecard's power lies in its focus. Agree a cadence owner for each perspective who is accountable for narrative commentary, not just the data feed."
  },
  {
    id: "ceo-digest",
    name: "CEO Weekly Digest",
    category: "executive",
    audience: ["CEO", "Chief of Staff", "Executive Assistants"],
    purpose: "strategic-oversight",
    maturity: "foundational",
    cadence: "weekly",
    desc: "A personalised weekly briefing for the CEO condensing enterprise-wide signals, exceptions, and required decisions into a five-minute read.",
    longDesc: "The CEO Weekly Digest is purpose-built for the most time-constrained consumer in the organisation, presenting only the information requiring the CEO's awareness or action. It combines automated data pulls with curated analyst commentary to surface the three to five most significant developments of the week. The digest integrates external signals‚Äîmarket news, competitor movements, regulatory updates‚Äîalongside internal performance data to give the CEO a complete situational picture.",
    tags: ["ceo", "executive-digest", "exception-based", "curated", "weekly"],
    keyQuestions: [
      "What are the top three issues requiring my attention or decision this week?",
      "How did our performance compare to plan and what is the forward outlook?",
      "What external events this week have material implications for our strategy?"
    ],
    kpis: [
      { name: "Week-on-Week Revenue Growth", formula: "(This Week Revenue - Last Week Revenue) / Last Week Revenue √ó 100", unit: "%", frequency: "Weekly", owner: "CFO" },
      { name: "Open CEO Action Items", formula: "Count of action items assigned to CEO or awaiting CEO decision", unit: "Count", frequency: "Weekly", owner: "Chief of Staff" },
      { name: "Critical Risk Escalations", formula: "Count of risks escalated to CEO level in the week", unit: "Count", frequency: "Weekly", owner: "CRO" },
      { name: "Key Hire Pipeline Status", formula: "Count of critical roles at offer stage / Total critical open roles √ó 100", unit: "%", frequency: "Weekly", owner: "CHRO" },
      { name: "Media Sentiment Score", formula: "Weighted average sentiment of CEO-relevant media coverage (-1 to +1)", unit: "Score", frequency: "Weekly", owner: "Chief Communications Officer" },
      { name: "Investor Relations Activity Index", formula: "Composite of analyst meetings, investor queries, and share price movement z-score", unit: "Index", frequency: "Weekly", owner: "CFO" }
    ],
    layouts: [
      {
        name: "Digest Summary View",
        desc: "Vertically scrolling briefing with a 'need to know' section at top, followed by domain summaries with traffic-light status and one-line commentary.",
        chartTypes: ["kpi-tile", "sparkline", "gauge"]
      },
      {
        name: "Decision-Action View",
        desc: "Two-column layout separating decisions required this week from informational updates, with linked supporting materials for each item.",
        chartTypes: ["kpi-tile", "bar"]
      }
    ],
    dataSources: [
      { name: "Executive Dashboard Platform", type: "API", system: "Tableau Cloud" },
      { name: "Media Monitoring Service", type: "Real-time", system: "Meltwater" },
      { name: "Board Management System", type: "API", system: "Diligent Boards" }
    ],
    customParams: [
      { name: "Digest Focus Mode", desc: "Prioritise the content categories most relevant to the CEO's current agenda", options: ["Balanced", "Financial-priority", "People-priority", "External-priority"] },
      { name: "Alert Sensitivity", desc: "Set the threshold for items surfaced as requiring CEO attention", options: ["High (major exceptions only)", "Medium (standard exceptions)", "Low (all deviations)"] },
      { name: "External Signal Sources", desc: "Configure which external data feeds are included in the digest", options: ["All Sources", "Regulatory Only", "Market & Competitor Only", "None"] }
    ],
    workshopNotes: "When facilitating the design of the CEO Digest, PwC advisors should conduct a 'week in the life' interview with the CEO and their Chief of Staff separately‚Äîthese two perspectives often differ significantly on what constitutes critical information. Apply the 'would you wake the CEO at midnight?' test to define what truly constitutes an alert versus an update. Build in a six-week pilot period with explicit feedback loops, as CEO preferences for information format and depth evolve rapidly once they begin using the tool. Ensure the Chief of Staff has authority to curate and suppress data points that are technically accurate but contextually misleading."
  },
  {
    id: "pl-tracker",
    name: "P&L Performance Tracker",
    category: "finance",
    audience: ["CFO", "Finance Business Partners", "Business Unit MDs"],
    purpose: "financial-control",
    maturity: "advanced",
    cadence: "monthly",
    desc: "A detailed profit and loss tracker enabling multi-dimensional analysis of revenue, margin, and cost performance against budget and prior year.",
    longDesc: "The P&L Performance Tracker provides finance teams and business leaders with a granular, interactive view of income statement performance, supporting both top-down exception identification and bottom-up root cause analysis. It covers revenue by product, channel, and geography alongside a fully loaded cost waterfall, enabling precise margin bridge analysis. Integration with the forecasting system allows actuals-to-forecast variance to be calculated dynamically as the month closes.",
    tags: ["pl", "margin-analysis", "variance", "finance", "monthly-close"],
    keyQuestions: [
      "Where is margin erosion occurring and what is driving it relative to budget?",
      "Which revenue lines are under-performing and what is the impact on full-year forecast?",
      "How does our cost structure compare to plan and where are there overruns?"
    ],
    kpis: [
      { name: "Gross Profit Margin", formula: "(Revenue - Cost of Goods Sold) / Revenue √ó 100", unit: "%", frequency: "Monthly", owner: "CFO" },
      { name: "EBITDA Margin", formula: "(EBITDA / Net Revenue) √ó 100", unit: "%", frequency: "Monthly", owner: "CFO" },
      { name: "Revenue Growth Rate", formula: "(Current Period Revenue - Prior Period Revenue) / Prior Period Revenue √ó 100", unit: "%", frequency: "Monthly", owner: "CFO" },
      { name: "Cost-to-Income Ratio", formula: "Total Operating Costs / Total Operating Income √ó 100", unit: "%", frequency: "Monthly", owner: "CFO" },
      { name: "Budget Variance (Revenue)", formula: "(Actual Revenue - Budget Revenue) / Budget Revenue √ó 100", unit: "%", frequency: "Monthly", owner: "Finance Business Partner" },
      { name: "Contribution Margin by Segment", formula: "(Segment Revenue - Segment Variable Costs) / Segment Revenue √ó 100", unit: "%", frequency: "Monthly", owner: "Finance Business Partner" }
    ],
    layouts: [
      {
        name: "Waterfall Bridge View",
        desc: "Margin bridge waterfall chart from prior year to current period, decomposing variances into volume, price, mix, and cost categories.",
        chartTypes: ["waterfall", "bar", "kpi-tile"]
      },
      {
        name: "Multi-Dimensional P&L Grid",
        desc: "Pivotable matrix showing P&L line items against dimensions (product, channel, geography) with inline sparklines and variance columns.",
        chartTypes: ["sparkline", "bar", "kpi-tile", "line"]
      }
    ],
    dataSources: [
      { name: "General Ledger", type: "SQL", system: "SAP S/4HANA" },
      { name: "Financial Planning & Analysis Tool", type: "API", system: "Anaplan" },
      { name: "Revenue Management System", type: "SQL", system: "Oracle Revenue Management Cloud" }
    ],
    customParams: [
      { name: "P&L Hierarchy Level", desc: "Select the granularity of the P&L display", options: ["Summary (5 lines)", "Standard (15 lines)", "Detailed (40+ lines)"] },
      { name: "Variance Comparison Basis", desc: "Choose the primary benchmark for variance analysis", options: ["vs Budget", "vs Prior Year", "vs Rolling Forecast", "vs Prior Year Forecast"] },
      { name: "Currency Display", desc: "Set reporting currency for multi-entity consolidations", options: ["Functional Currency", "GBP Consolidated", "USD Consolidated", "EUR Consolidated"] }
    ],
    workshopNotes: "PwC finance transformation workshops for this pattern frequently surface a critical upstream issue: inconsistent cost allocation methodologies across business units make the P&L incomparable without normalisation. Dedicate workshop time to agreeing a unified cost allocation model before designing the visualisation layer. Involve finance business partners from each business unit in defining the 'alert worthy' variances, as tolerance thresholds vary significantly by business model. The waterfall bridge is consistently the most valued visualisation for business leaders; invest design effort here and use the grid view as a secondary drill-down rather than the landing page."
  },
  {
    id: "cash-monitor",
    name: "Cash Flow Monitor",
    category: "finance",
    audience: ["CFO", "Treasury Team", "CEO"],
    purpose: "financial-control",
    maturity: "foundational",
    cadence: "daily",
    desc: "A daily treasury dashboard providing real-time visibility of cash positions, liquidity headroom, and short-term cash flow forecasts across all accounts.",
    longDesc: "The Cash Flow Monitor gives treasury and finance leaders a consolidated intraday and daily view of cash across all bank accounts, legal entities, and currencies, replacing manual bank statement reconciliations. It incorporates a 13-week rolling cash flow forecast to provide forward liquidity visibility, supplemented by an automated cash pooling summary and covenant headroom calculation. Variance analysis between forecast and actual cash movements enables continuous improvement of forecasting accuracy.",
    tags: ["treasury", "liquidity", "cash-forecasting", "daily", "bank-reconciliation"],
    keyQuestions: [
      "Do we have sufficient cash and liquidity headroom to meet our obligations over the next 13 weeks?",
      "Which entities or accounts are driving unexpected cash variances today?",
      "Are we compliant with our banking covenant requirements?"
    ],
    kpis: [
      { name: "Group Cash Position", formula: "Sum of all confirmed bank account balances converted to reporting currency", unit: "¬£M", frequency: "Daily", owner: "Group Treasurer" },
      { name: "Liquidity Coverage Ratio", formula: "High-Quality Liquid Assets / Net Cash Outflows over 30 days √ó 100", unit: "%", frequency: "Daily", owner: "Group Treasurer" },
      { name: "Cash Flow Forecast Accuracy", formula: "(1 - |Actual Cash Flow - Forecast Cash Flow| / |Forecast Cash Flow|) √ó 100", unit: "%", frequency: "Daily", owner: "Treasury Analyst" },
      { name: "Days Cash on Hand", formula: "Cash & Cash Equivalents / (Total Operating Expenses / 365)", unit: "Days", frequency: "Daily", owner: "CFO" },
      { name: "Covenant Headroom", formula: "(Covenant Limit - Current Metric Value) / Covenant Limit √ó 100", unit: "%", frequency: "Daily", owner: "CFO" },
      { name: "Working Capital Cycle", formula: "Days Sales Outstanding + Days Inventory Outstanding - Days Payables Outstanding", unit: "Days", frequency: "Daily", owner: "Finance Director" }
    ],
    layouts: [
      {
        name: "Treasury Cockpit View",
        desc: "Real-time cash position tiles by entity and currency, with a 13-week waterfall forecast and covenant gauge indicators.",
        chartTypes: ["kpi-tile", "waterfall", "gauge", "bar"]
      },
      {
        name: "Cash Flow Variance View",
        desc: "Actual vs forecast cash movement chart with daily variance bars and a rolling forecast accuracy trend line.",
        chartTypes: ["line", "bar", "sparkline", "kpi-tile"]
      }
    ],
    dataSources: [
      { name: "Bank Data Aggregator", type: "Real-time", system: "SWIFT / TreasuryXpress" },
      { name: "ERP Cash Management Module", type: "SQL", system: "SAP Treasury & Risk Management" },
      { name: "Cash Flow Forecasting Tool", type: "API", system: "Kyriba" }
    ],
    customParams: [
      { name: "Forecast Horizon", desc: "Set the forward-looking period for the cash flow forecast display", options: ["4 Weeks", "13 Weeks", "26 Weeks"] },
      { name: "Entity Scope", desc: "Filter to a subset of legal entities or cash pools", options: ["All Entities", "UK Entities", "International Entities", "Cash Pool Only"] },
      { name: "Alert Threshold (Minimum Cash)", desc: "Set the minimum cash balance that triggers a liquidity alert", options: ["¬£5M", "¬£10M", "¬£25M", "Custom"] }
    ],
    workshopNotes: "Treasury dashboard workshops run by PwC should begin with a bank account rationalisation review‚Äîmany organisations discover they have significantly more accounts than necessary, which complicates the data aggregation layer. Work with the Group Treasurer to map the difference between 'available' and 'restricted' cash, as conflating these is a common error that can create false comfort. The 13-week cash flow forecast is only as valuable as the process that produces it; ensure the workshop addresses the forecasting process and ownership model alongside the dashboard design. Test connectivity to all bank platforms early, as SWIFT onboarding timelines can extend project delivery significantly."
  },
  {
    id: "budget-actuals",
    name: "Budget vs Actuals",
    category: "finance",
    audience: ["Finance Business Partners", "Cost Centre Managers", "CFO"],
    purpose: "financial-control",
    maturity: "foundational",
    cadence: "monthly",
    desc: "A monthly variance dashboard enabling cost centre managers and finance teams to monitor expenditure against budget with drill-down to transaction level.",
    longDesc: "The Budget vs Actuals dashboard democratises financial control by giving cost centre managers self-service access to their own expenditure performance without relying on finance team reports. It presents variance analysis at multiple granularity levels, from divisional summaries to individual general ledger account lines, with the ability to drill through to underlying transactions. Automated commentary prompts guide managers through structured variance explanation, feeding back into the forecast restatement process.",
    tags: ["budget-control", "variance-analysis", "cost-management", "monthly", "self-service"],
    keyQuestions: [
      "Which cost centres have the most significant adverse variances to budget this month?",
      "Are cost overruns structural or timing-related, and what is the full-year impact?",
      "Which budget lines are consistently underspent, indicating budget padding?"
    ],
    kpis: [
      { name: "Budget Utilisation Rate", formula: "YTD Actual Spend / YTD Budget √ó 100", unit: "%", frequency: "Monthly", owner: "Finance Business Partner" },
      { name: "Adverse Variance Count", formula: "Count of budget lines with actual spend > budget by more than threshold", unit: "Count", frequency: "Monthly", owner: "Finance Business Partner" },
      { name: "Full-Year Forecast Variance", formula: "(Full-Year Forecast - Full-Year Budget) / Full-Year Budget √ó 100", unit: "%", frequency: "Monthly", owner: "CFO" },
      { name: "Unexplained Variance Rate", formula: "Variances Without Approved Commentary / Total Variances √ó 100", unit: "%", frequency: "Monthly", owner: "Finance Director" },
      { name: "Headcount Spend vs Plan", formula: "(Actual Headcount Costs - Planned Headcount Costs) / Planned Headcount Costs √ó 100", unit: "%", frequency: "Monthly", owner: "CHRO" },
      { name: "Discretionary Spend Ratio", formula: "Discretionary Cost / Total Cost √ó 100", unit: "%", frequency: "Monthly", owner: "CFO" }
    ],
    layouts: [
      {
        name: "Exception Hierarchy View",
        desc: "Expandable tree structure from division to cost centre to GL account, with RAG variance flags and one-click drill-through to transaction detail.",
        chartTypes: ["bar", "kpi-tile", "waterfall"]
      },
      {
        name: "Trend Variance View",
        desc: "Month-by-month actual vs budget bars with a cumulative YTD variance line, plus a full-year run-rate projection.",
        chartTypes: ["bar", "line", "sparkline", "kpi-tile"]
      }
    ],
    dataSources: [
      { name: "General Ledger", type: "SQL", system: "SAP S/4HANA" },
      { name: "Budget Management System", type: "SQL", system: "SAP BPC" },
      { name: "HR Headcount Data", type: "API", system: "Workday" }
    ],
    customParams: [
      { name: "Variance Alert Threshold", desc: "Minimum variance magnitude that triggers a highlighted exception", options: ["¬±2%", "¬±5%", "¬±10%", "¬£50K absolute"] },
      { name: "Cost Category View", desc: "Filter expenditure to a specific cost category for focused analysis", options: ["All Costs", "People Costs", "Technology Costs", "External Spend", "Discretionary"] },
      { name: "Commentary Workflow", desc: "Enable or disable the structured variance commentary capture workflow", options: ["Enabled (mandatory)", "Enabled (optional)", "Disabled"] }
    ],
    workshopNotes: "PwC finance advisory teams running budget vs actuals workshops should pay particular attention to the commentary workflow design, as this is where the dashboard creates most organisational value beyond basic reporting. Use role-play exercises where finance business partners demonstrate how they currently explain variances to the CFO, then design structured templates that capture the same information systematically. Agree the escalation hierarchy‚Äîwho sees whose variances‚Äîbefore build, as this is politically sensitive in most organisations. Challenge participants to reduce the time from month-end close to dashboard availability; a well-designed automated pipeline should achieve T+2 for most organisations."
  },
  {
    id: "close-dashboard",
    name: "Financial Close Dashboard",
    category: "finance",
    audience: ["Financial Controller", "Group Finance Team", "CFO"],
    purpose: "financial-control",
    maturity: "advanced",
    cadence: "monthly",
    desc: "A real-time close management dashboard tracking the completion status of every task in the month-end financial close process across all entities.",
    longDesc: "The Financial Close Dashboard gives the Group Financial Controller a live view of close progress, bottlenecks, and quality indicators across all legal entities and consolidation tasks, replacing the manual email and spreadsheet chase process. It integrates with the close management platform to pull task completion status, journal entry volumes, reconciliation sign-offs, and intercompany matching rates in real time. Predictive analytics identify entities at risk of missing the close deadline based on historical completion patterns.",
    tags: ["financial-close", "month-end", "reconciliation", "consolidation", "controller"],
    keyQuestions: [
      "Which entities and task owners are behind schedule and at risk of delaying the group close?",
      "What is the current quality of the close as measured by reconciliation completion and intercompany agreement rates?",
      "Are we on track to issue preliminary results by the committed external reporting date?"
    ],
    kpis: [
      { name: "Close Task Completion Rate", formula: "Tasks Completed / Total Scheduled Tasks √ó 100", unit: "%", frequency: "Daily (during close)", owner: "Financial Controller" },
      { name: "Intercompany Agreement Rate", formula: "Agreed Intercompany Balances / Total Intercompany Balances √ó 100", unit: "%", frequency: "Daily (during close)", owner: "Group Accountant" },
      { name: "Account Reconciliation Completion", formula: "Reconciliations Signed Off / Total Required Reconciliations √ó 100", unit: "%", frequency: "Daily (during close)", owner: "Financial Controller" },
      { name: "Journal Entry Error Rate", formula: "Rejected or Reversed Journals / Total Journals Posted √ó 100", unit: "%", frequency: "Daily (during close)", owner: "Financial Controller" },
      { name: "Days to Close (Trend)", formula: "Calendar days from period end to preliminary results release", unit: "Days", frequency: "Monthly", owner: "CFO" },
      { name: "Audit Query Resolution Rate", formula: "Queries Resolved / Total Audit Queries Raised √ó 100", unit: "%", frequency: "Monthly", owner: "Financial Controller" }
    ],
    layouts: [
      {
        name: "Close Control Tower View",
        desc: "Gantt-style timeline showing all close tasks by entity with completion status, owner, and dependency links highlighting the critical path.",
        chartTypes: ["gantt", "kpi-tile", "gauge"]
      },
      {
        name: "Entity Progress Heatmap",
        desc: "Matrix heatmap with entities on one axis and close tasks on the other, colour-coded by completion status and days-to-deadline.",
        chartTypes: ["heatmap", "bar", "kpi-tile"]
      }
    ],
    dataSources: [
      { name: "Close Management Platform", type: "API", system: "BlackLine" },
      { name: "Consolidation System", type: "API", system: "OneStream XF" },
      { name: "General Ledger", type: "SQL", system: "SAP S/4HANA" }
    ],
    customParams: [
      { name: "Close Calendar Template", desc: "Select the applicable close calendar to define task sequences and deadlines", options: ["Standard 5-Day Close", "Accelerated 3-Day Close", "Quarter-End Extended", "Year-End Extended"] },
      { name: "Critical Path Highlight", desc: "Enable automated critical path identification to highlight the sequence of tasks that determines overall close duration", options: ["Enabled", "Disabled"] },
      { name: "Entity Scope", desc: "Filter to a subset of legal entities within the consolidation group", options: ["All Entities", "Material Entities Only", "UK Entities", "International Entities"] }
    ],
    workshopNotes: "PwC close optimisation engagements using this pattern should begin with a close timeline diagnostic‚Äîmap the current close process end to end, identifying all handoffs, approval steps, and manual dependencies before designing the dashboard. The most common discovery is that the bottleneck is not data availability but approval chains: reconciliations are complete but waiting for a manager who is in meetings. Design the dashboard workflow to route approvals via email or mobile notification so approvers do not need to log into the system. Quantify the cost of each day of close duration to create a compelling case for close acceleration investment."
  },
  {
    id: "risk-register",
    name: "Enterprise Risk Register",
    category: "risk",
    audience: ["Chief Risk Officer", "Risk Committee", "Business Unit Risk Owners"],
    purpose: "risk-management",
    maturity: "advanced",
    cadence: "monthly",
    desc: "A dynamic enterprise risk register visualising risk exposure, velocity, and treatment status across the organisation's principal risk taxonomy.",
    longDesc: "The Enterprise Risk Register dashboard replaces static spreadsheet-based risk registers with a living, filterable view of organisational risk exposure that is updated continuously by risk owners. It maps risks to strategic objectives and appetite statements, enabling the risk committee to assess whether the portfolio of risk is aligned with the board's risk tolerance. Heat map visualisations, trend velocity indicators, and treatment action tracking provide a complete picture of where risks are emerging, escalating, or being successfully mitigated.",
    tags: ["risk-register", "enterprise-risk", "risk-appetite", "heat-map", "treatment-tracking"],
    keyQuestions: [
      "Which risks have moved outside of our approved risk appetite and require immediate treatment?",
      "How has the overall risk profile changed since the last review, and what is driving risk velocity?",
      "Are risk treatment plans progressing at the pace required to bring risks within appetite?"
    ],
    kpis: [
      { name: "Risks Outside Appetite", formula: "Count of risks with residual rating exceeding board-approved appetite", unit: "Count", frequency: "Monthly", owner: "CRO" },
      { name: "Risk Treatment Completion Rate", formula: "Completed Treatment Actions / Total Scheduled Treatment Actions √ó 100", unit: "%", frequency: "Monthly", owner: "Risk Manager" },
      { name: "Average Residual Risk Score", formula: "Sum of (Likelihood √ó Impact) for all residual risks / Total Risk Count", unit: "Score", frequency: "Monthly", owner: "CRO" },
      { name: "Risk Velocity (Emerging Risks)", formula: "Count of risks that moved up two or more rating bands in the period", unit: "Count", frequency: "Monthly", owner: "CRO" },
      { name: "Control Effectiveness Rate", formula: "Controls Rated Effective / Total Controls Assessed √ó 100", unit: "%", frequency: "Monthly", owner: "Internal Audit Director" },
      { name: "Top Risk Concentration Index", formula: "Count of top 10 risks mapped to the same strategic objective / 10", unit: "Ratio", frequency: "Monthly", owner: "CRO" }
    ],
    layouts: [
      {
        name: "Risk Heat Map View",
        desc: "5√ó5 likelihood-impact heat map with risk bubbles sized by financial exposure and coloured by risk category, with tooltip drill-down to risk detail.",
        chartTypes: ["heatmap", "scatter", "kpi-tile"]
      },
      {
        name: "Risk Trend and Treatment View",
        desc: "Side-by-side display of risk rating trend lines over 12 months alongside treatment action progress bars, filtered by risk category.",
        chartTypes: ["line", "bar", "gauge", "kpi-tile"]
      }
    ],
    dataSources: [
      { name: "Risk Management System", type: "API", system: "ServiceNow GRC" },
      { name: "Internal Audit Platform", type: "SQL", system: "TeamMate+" },
      { name: "Control Testing Results", type: "Manual", system: "SharePoint / Excel" }
    ],
    customParams: [
      { name: "Risk Taxonomy View", desc: "Filter the register to a specific risk category within the enterprise taxonomy", options: ["All Risks", "Strategic", "Financial", "Operational", "Compliance", "Reputational", "Cyber"] },
      { name: "Appetite Overlay", desc: "Toggle the display of board-approved appetite boundaries on the heat map", options: ["Show Appetite Boundary", "Hide Appetite Boundary"] },
      { name: "Risk Owner Filter", desc: "Filter to risks owned by a specific executive or business unit", options: ["All Owners", "Executive Team", "Business Unit: Finance", "Business Unit: Operations", "Business Unit: Technology"] }
    ],
    workshopNotes: "PwC risk advisory workshops for this pattern must invest significant time in agreeing the risk taxonomy and appetite definitions before the dashboard is designed‚Äîthese are the foundation on which all subsequent data and visualisation decisions rest. Use a 'risk appetite card sort' exercise where risk owners physically sort risk scenarios into appetite categories; this surfaces inconsistencies in how appetite is understood across the organisation. Challenge the organisation to move from annual to quarterly risk rating updates at minimum, as a register that is not updated regularly provides false assurance. Ensure the dashboard design accommodates emerging risk identification, not just the management of known risks."
  },
  {
    id: "compliance-board",
    name: "Compliance Status Board",
    category: "risk",
    audience: ["Chief Compliance Officer", "Legal & Compliance Team", "Board Audit Committee"],
    purpose: "risk-management",
    maturity: "foundational",
    cadence: "monthly",
    desc: "A monthly compliance dashboard tracking adherence to regulatory obligations, policy breaches, mandatory training completion, and regulatory change pipeline.",
    longDesc: "The Compliance Status Board provides the Chief Compliance Officer and audit committee with a structured view of the organisation's compliance posture across all applicable regulatory regimes. It consolidates obligation management status, policy attestation rates, regulatory incident tracking, and the implementation status of upcoming regulatory changes into a single command centre. Colour-coded compliance health scores by regulatory domain enable rapid identification of areas requiring remediation investment.",
    tags: ["compliance", "regulatory", "policy-management", "training-completion", "audit-committee"],
    keyQuestions: [
      "Which regulatory domains are showing compliance gaps that could result in enforcement action?",
      "Are all mandatory training and policy attestation requirements being completed on time?",
      "What regulatory changes are coming into effect in the next 90 days and are we prepared?"
    ],
    kpis: [
      { name: "Regulatory Obligation Compliance Rate", formula: "Obligations Fully Met / Total Applicable Obligations √ó 100", unit: "%", frequency: "Monthly", owner: "Chief Compliance Officer" },
      { name: "Mandatory Training Completion Rate", formula: "Staff Completed Training / Total Staff Required to Complete √ó 100", unit: "%", frequency: "Monthly", owner: "Compliance Training Manager" },
      { name: "Policy Attestation Rate", formula: "Attestations Received / Attestations Required √ó 100", unit: "%", frequency: "Monthly", owner: "Chief Compliance Officer" },
      { name: "Compliance Incident Rate", formula: "(Compliance Incidents / Total Transactions or Activities) √ó 10,000", unit: "Per 10,000", frequency: "Monthly", owner: "Chief Compliance Officer" },
      { name: "Regulatory Change Readiness Score", formula: "Changes with Implementation Plan in Place / Total Upcoming Changes √ó 100", unit: "%", frequency: "Monthly", owner: "Regulatory Affairs Manager" },
      { name: "Open Regulatory Findings Age", formula: "Average calendar days since findings were raised and remain unresolved", unit: "Days", frequency: "Monthly", owner: "Chief Compliance Officer" }
    ],
    layouts: [
      {
        name: "Compliance Domain Overview",
        desc: "Grid of compliance domain tiles (e.g. GDPR, FCA, HSE) with health scores, open findings count, and training completion gauges.",
        chartTypes: ["kpi-tile", "gauge", "donut"]
      },
      {
        name: "Regulatory Calendar View",
        desc: "Timeline of upcoming regulatory deadlines and change implementations with preparation status indicators and assigned owners.",
        chartTypes: ["gantt", "bar", "kpi-tile"]
      }
    ],
    dataSources: [
      { name: "Compliance Management System", type: "SQL", system: "NAVEX Global" },
      { name: "Learning Management System", type: "API", system: "Cornerstone OnDemand" },
      { name: "Regulatory Intelligence Feed", type: "API", system: "Thomson Reuters Regulatory Intelligence" }
    ],
    customParams: [
      { name: "Regulatory Regime Filter", desc: "Focus the dashboard on a specific regulatory framework or jurisdiction", options: ["All Regimes", "FCA / PRA (UK)", "GDPR / UK GDPR", "HSE", "ISO Standards", "Custom"] },
      { name: "Incident Severity Filter", desc: "Filter compliance incidents by severity classification", options: ["All Severities", "Critical Only", "High and Above", "Medium and Above"] },
      { name: "Forecast Horizon (Reg Changes)", desc: "Set the lookahead period for the regulatory change pipeline view", options: ["30 Days", "60 Days", "90 Days", "180 Days"] }
    ],
    workshopNotes: "PwC regulatory compliance workshops frequently reveal that organisations have no single master list of their regulatory obligations‚Äîestablishing this obligation register is often the first deliverable of the engagement and a prerequisite to building the dashboard. Use a jurisdiction-by-jurisdiction decomposition exercise to populate the obligation inventory, involving legal, compliance, and operational subject matter experts in parallel streams. The regulatory change pipeline view is typically the highest-value element for compliance officers; connect it to a reputable regulatory intelligence provider early and budget for ongoing subscription costs. Avoid designing a compliance dashboard that only reflects current state‚Äîpredictive readiness indicators significantly increase the decision-making value of the tool."
  },
  {
    id: "audit-tracker",
    name: "Audit Action Tracker",
    category: "risk",
    audience: ["Head of Internal Audit", "Audit Committee", "Action Owners"],
    purpose: "risk-management",
    maturity: "foundational",
    cadence: "weekly",
    desc: "A weekly tracker monitoring the implementation status of all internal and external audit recommendations, with ageing analysis and escalation management.",
    longDesc: "The Audit Action Tracker provides the Head of Internal Audit and audit committee with real-time visibility of whether management is implementing audit recommendations within agreed timescales. It tracks actions from both internal audit reports and external regulatory reviews, providing a unified view of audit-driven improvement commitments. Ageing analysis identifies chronically overdue actions that carry the highest residual risk, and the escalation workflow ensures that repeat extensions are visible to the audit committee.",
    tags: ["internal-audit", "audit-actions", "recommendations", "ageing-analysis", "escalation"],
    keyQuestions: [
      "What percentage of audit recommendations have been fully implemented by their agreed due dates?",
      "Which business units have the highest concentration of overdue high-priority findings?",
      "Are management repeatedly requesting extensions for specific action areas, indicating systemic implementation challenges?"
    ],
    kpis: [
      { name: "Action Implementation Rate (On Time)", formula: "Actions Implemented by Due Date / Total Actions Due √ó 100", unit: "%", frequency: "Weekly", owner: "Head of Internal Audit" },
      { name: "High Priority Overdue Actions", formula: "Count of high or critical priority actions past agreed due date", unit: "Count", frequency: "Weekly", owner: "Head of Internal Audit" },
      { name: "Average Days Overdue", formula: "Sum of (Current Date - Due Date) for all overdue actions / Count of overdue actions", unit: "Days", frequency: "Weekly", owner: "Audit Manager" },
      { name: "Extension Request Rate", formula: "Actions with Extension Granted / Total Actions √ó 100", unit: "%", frequency: "Weekly", owner: "Head of Internal Audit" },
      { name: "Action Closure Velocity", formula: "Actions Closed in Period / Total Open Actions at Period Start √ó 100", unit: "%", frequency: "Weekly", owner: "Audit Manager" },
      { name: "Repeat Finding Rate", formula: "Audit Findings That Are Repeats of Prior Findings / Total Findings √ó 100", unit: "%", frequency: "Weekly", owner: "Head of Internal Audit" }
    ],
    layouts: [
      {
        name: "Action Status Pipeline",
        desc: "Kanban-style status lanes (Not Started, In Progress, Complete, Overdue) with action cards showing priority, owner, and days remaining.",
        chartTypes: ["kpi-tile", "bar", "gauge"]
      },
      {
        name: "Ageing and Escalation View",
        desc: "Horizontal bar chart of overdue actions sorted by age, with colour bands indicating escalation tier and a business unit heatmap below.",
        chartTypes: ["bar", "heatmap", "kpi-tile"]
      }
    ],
    dataSources: [
      { name: "Audit Management System", type: "API", system: "TeamMate+" },
      { name: "Action Tracking Database", type: "SQL", system: "ServiceNow" },
      { name: "Regulatory Findings Register", type: "Manual", system: "SharePoint" }
    ],
    customParams: [
      { name: "Audit Source Filter", desc: "Filter actions by their originating audit type", options: ["All Sources", "Internal Audit", "External Audit", "Regulatory Review", "Self-Assessment"] },
      { name: "Priority Filter", desc: "Focus on actions above a minimum priority threshold", options: ["All Priorities", "High and Critical Only", "Medium and Above"] },
      { name: "Overdue Threshold for Escalation", desc: "Set the number of days overdue that triggers automatic escalation notification", options: ["7 Days", "14 Days", "30 Days"] }
    ],
    workshopNotes: "When PwC internal audit advisory teams facilitate workshops for this pattern, the most productive exercise is the 'dead actions' review‚Äîgoing through the existing tracker to identify actions that have been open for more than 12 months with multiple extensions granted. This exercise creates immediate organisational motivation to implement the tracker properly. Ensure action owners are involved in the workshop design, not just audit team members; their buy-in to the visibility this creates is essential to adoption. Consider building a management accountability league table that shows action completion rates by business unit‚Äîcompetitive dynamics among business unit heads are a powerful driver of implementation velocity."
  },
  {
    id: "threat-intel",
    name: "Cyber Threat Intelligence",
    category: "cyber",
    audience: ["CISO", "Threat Intelligence Team", "Board Risk Committee"],
    purpose: "risk-management",
    maturity: "strategic",
    cadence: "real-time",
    desc: "A real-time threat intelligence dashboard aggregating global threat feeds, adversary tracking, and organisation-specific threat actor activity into an actionable situational picture.",
    longDesc: "The Cyber Threat Intelligence dashboard operationalises strategic and tactical threat intelligence by correlating external threat feeds with internal telemetry to surface threats that are relevant, targeted, or imminent for the organisation. It supports the CISO in communicating board-level cyber risk in business impact terms while providing the threat intelligence team with the technical depth required for proactive threat hunting. Integration with the MITRE ATT&CK framework enables adversary technique mapping and gap analysis against defensive controls.",
    tags: ["threat-intelligence", "ciso", "mitre-attack", "adversary-tracking", "real-time"],
    keyQuestions: [
      "Which threat actors are currently targeting our industry sector and what techniques are they employing?",
      "Are there active indicators of compromise present in our environment that match known threat actor profiles?",
      "How has the threat landscape relevant to our organisation changed in the past 30 days?"
    ],
    kpis: [
      { name: "Active Threat Indicators (IOCs)", formula: "Count of active indicators of compromise matched against internal telemetry", unit: "Count", frequency: "Real-time", owner: "Threat Intelligence Lead" },
      { name: "Threat Feed Coverage Rate", formula: "Threat Feeds with Active Correlation Rules / Total Subscribed Feeds √ó 100", unit: "%", frequency: "Real-time", owner: "CISO" },
      { name: "Mean Time to Threat Detection", formula: "Sum of (Detection Timestamp - Threat Actor Entry Timestamp) / Total Detected Threats", unit: "Hours", frequency: "Real-time", owner: "SOC Manager" },
      { name: "MITRE ATT&CK Coverage Score", formula: "Techniques with Detective Controls / Total Relevant ATT&CK Techniques √ó 100", unit: "%", frequency: "Weekly", owner: "CISO" },
      { name: "High-Fidelity Alert Rate", formula: "True Positive Alerts / Total Alerts Generated √ó 100", unit: "%", frequency: "Real-time", owner: "SOC Manager" },
      { name: "Threat Actor Dwell Time (Estimated)", formula: "Estimated mean days from adversary entry to detection based on forensic analysis", unit: "Days", frequency: "Monthly", owner: "CISO" }
    ],
    layouts: [
      {
        name: "Threat Landscape Map",
        desc: "World map overlaid with threat actor origins, attack volume heat zones, and organisation-targeted campaign indicators with real-time feed.",
        chartTypes: ["heatmap", "kpi-tile", "gauge"]
      },
      {
        name: "ATT&CK Framework Coverage View",
        desc: "MITRE ATT&CK matrix visualisation with cells colour-coded by detection coverage, overlaid with observed adversary technique frequency.",
        chartTypes: ["heatmap", "bar", "kpi-tile"]
      }
    ],
    dataSources: [
      { name: "Threat Intelligence Platform", type: "Real-time", system: "Recorded Future" },
      { name: "SIEM Platform", type: "Real-time", system: "Microsoft Sentinel" },
      { name: "ISAC Threat Feeds", type: "API", system: "FS-ISAC / Sector ISAC" }
    ],
    customParams: [
      { name: "Threat Actor Focus", desc: "Filter intelligence to threat actors known to target specific sectors or geographies", options: ["All Actors", "Financially Motivated", "Nation-State", "Hacktivism", "Insider Threat"] },
      { name: "Intelligence Confidence Filter", desc: "Set the minimum confidence level for threat intelligence surfaced in the dashboard", options: ["All Confidence Levels", "Medium and Above", "High Only"] },
      { name: "Geographic Scope", desc: "Filter threat activity by geographic region of origin or target", options: ["Global", "Europe", "North America", "Asia-Pacific", "Custom"] }
    ],
    workshopNotes: "PwC cyber intelligence workshops for this pattern should engage both the CISO and the board risk committee chair‚Äîthe primary design tension is between operational technical depth and board-level business risk communication, and both must be resolved in the same dashboard design. Use a threat scenario simulation (table-top exercise) during the workshop to identify which intelligence the team needed but did not have during a recent incident; this directly informs the data source requirements. Classify each intelligence feed by confidence, timeliness, and relevance to the organisation's specific threat profile before building correlation rules‚Äînoise reduction is more valuable than additional feeds. Build a separate 'board-ready' view from the outset rather than retrofitting a technical view."
  },
  {
    id: "soc-ops",
    name: "SOC Operations Centre",
    category: "cyber",
    audience: ["SOC Manager", "Security Analysts", "CISO"],
    purpose: "operational-monitoring",
    maturity: "advanced",
    cadence: "real-time",
    desc: "A real-time security operations centre dashboard providing analysts with alert triage status, incident lifecycle management, and SLA performance across all shift teams.",
    longDesc: "The SOC Operations Centre dashboard serves as the operational heartbeat of the security function, providing real-time visibility of alert volumes, triage queues, incident status, and analyst performance across all shifts and tiers. It enables SOC managers to dynamically allocate analyst capacity based on alert load and ensures that SLA commitments for incident response timelines are being met. Integration with ticketing and SIEM platforms creates a single pane of glass that replaces multiple point-tool interfaces.",
    tags: ["soc", "incident-response", "siem", "alert-triage", "sla-management"],
    keyQuestions: [
      "Is the current alert volume within analyst handling capacity and are SLAs being met across all severity tiers?",
      "Which incident types are consuming the most analyst time and are there automation opportunities?",
      "How does current shift performance compare to baseline and are there analyst skill gaps to address?"
    ],
    kpis: [
      { name: "Mean Time to Respond (MTTR)", formula: "Sum of (Response Action Timestamp - Alert Raised Timestamp) / Total Incidents", unit: "Minutes", frequency: "Real-time", owner: "SOC Manager" },
      { name: "Alert-to-Incident Conversion Rate", formula: "Alerts Escalated to Confirmed Incidents / Total Alerts √ó 100", unit: "%", frequency: "Real-time", owner: "SOC Manager" },
      { name: "SLA Compliance Rate (P1 Incidents)", formula: "P1 Incidents Responded to Within SLA / Total P1 Incidents √ó 100", unit: "%", frequency: "Real-time", owner: "SOC Manager" },
      { name: "Analyst Queue Depth", formula: "Total unassigned or open alerts in analyst triage queue at point in time", unit: "Count", frequency: "Real-time", owner: "SOC Team Lead" },
      { name: "False Positive Rate", formula: "Alerts Closed as False Positive / Total Alerts Closed √ó 100", unit: "%", frequency: "Daily", owner: "SOC Manager" },
      { name: "Incident Containment Time", formula: "Time from Incident Confirmation to Containment Action Completed", unit: "Hours", frequency: "Daily", owner: "Incident Response Lead" }
    ],
    layouts: [
      {
        name: "SOC Control Room View",
        desc: "Real-time command centre layout with live alert ticker, analyst capacity gauges, active incident counters by severity, and MTTR trend.",
        chartTypes: ["gauge", "kpi-tile", "line", "bar"]
      },
      {
        name: "Incident Lifecycle View",
        desc: "Funnel visualisation of alert-to-incident pipeline with stage conversion rates, plus a time-series of incident volumes by category and severity.",
        chartTypes: ["bar", "line", "donut", "kpi-tile"]
      }
    ],
    dataSources: [
      { name: "SIEM Platform", type: "Real-time", system: "Microsoft Sentinel" },
      { name: "ITSM / Ticketing System", type: "Real-time", system: "ServiceNow ITSM" },
      { name: "SOAR Platform", type: "Real-time", system: "Palo Alto XSOAR" }
    ],
    customParams: [
      { name: "Shift View", desc: "Filter the operational view to the current active shift team", options: ["All Shifts", "Day Shift", "Evening Shift", "Night Shift", "Weekend"] },
      { name: "Severity Tier Focus", desc: "Set the minimum severity level displayed in the primary alert feed", options: ["All Severities", "P3 and Above", "P2 and Above", "P1 Only"] },
      { name: "Analyst Anonymisation", desc: "Display analyst performance metrics anonymously or by named analyst", options: ["Named (Team Lead View)", "Anonymised (Analyst View)"] }
    ],
    workshopNotes: "PwC cybersecurity advisory workshops for the SOC Operations Centre pattern should begin with an as-is process walkthrough during an actual SOC shift‚Äîobserving how analysts currently use their tools and where they switch between screens provides the most valuable design input. Quantify the cost of false positives in analyst time before the workshop concludes, as this is typically the strongest case for SOAR automation investment. Design the Analyst Anonymisation parameter carefully with the SOC team; performance visibility is motivating for some and stressful for others, and the cultural approach should be agreed with HR. Ensure shift handover workflows are built into the dashboard from the outset‚Äîthe quality of handover information is frequently the biggest determinant of SOC effectiveness."
  },
  {
    id: "vuln-mgmt",
    name: "Vulnerability Management",
    category: "cyber",
    audience: ["CISO", "Security Engineering Team", "IT Risk Manager"],
    purpose: "risk-management",
    maturity: "advanced",
    cadence: "weekly",
    desc: "A weekly vulnerability management dashboard tracking the discovery, prioritisation, and remediation of security vulnerabilities across the entire asset estate.",
    longDesc: "The Vulnerability Management dashboard provides the security engineering team and CISO with a risk-based view of the organisation's vulnerability posture, prioritising remediation effort based on exploitability, asset criticality, and threat intelligence context rather than raw CVSS score alone. It tracks the full vulnerability lifecycle from discovery through to verified remediation, with SLA adherence metrics by severity tier and asset owner. Trend analysis surfaces whether the overall vulnerability debt is increasing or decreasing over time.",
    tags: ["vulnerability-management", "patching", "cvss", "remediation", "asset-management"],
    keyQuestions: [
      "How many critical and high severity vulnerabilities remain unpatched beyond our SLA thresholds?",
      "Are specific asset owners or technology domains accumulating disproportionate vulnerability debt?",
      "Is our overall vulnerability exposure increasing or decreasing relative to our scanning and remediation cadence?"
    ],
    kpis: [
      { name: "Critical Vulnerability Remediation Rate (SLA)", formula: "Critical Vulnerabilities Patched Within SLA / Total Critical Vulnerabilities √ó 100", unit: "%", frequency: "Weekly", owner: "Security Engineering Lead" },
      { name: "Mean Time to Remediate (Critical)", formula: "Sum of (Remediation Date - Discovery Date) for critical vulns / Count of critical vulns", unit: "Days", frequency: "Weekly", owner: "Security Engineering Lead" },
      { name: "Vulnerability Backlog Trend", formula: "Current Period Open Vulnerabilities - Prior Period Open Vulnerabilities", unit: "Count (delta)", frequency: "Weekly", owner: "CISO" },
      { name: "Asset Coverage Rate", formula: "Assets Scanned in Last 7 Days / Total Known Assets √ó 100", unit: "%", frequency: "Weekly", owner: "Security Engineering Lead" },
      { name: "Exploitable Vulnerability Exposure", formula: "Vulnerabilities with Known Public Exploit / Total Open Vulnerabilities √ó 100", unit: "%", frequency: "Weekly", owner: "CISO" },
      { name: "Patch Compliance Rate", formula: "Assets Patched Within Policy Window / Total Assets Due for Patching √ó 100", unit: "%", frequency: "Weekly", owner: "IT Operations Manager" }
    ],
    layouts: [
      {
        name: "Vulnerability Risk Heatmap",
        desc: "Asset criticality vs vulnerability severity matrix, sized by vulnerability count, enabling rapid identification of the highest business risk exposure.",
        chartTypes: ["heatmap", "scatter", "kpi-tile"]
      },
      {
        name: "Remediation Velocity View",
        desc: "Stacked bar of vulnerability discovery vs remediation rates over 13 weeks, with SLA breach indicators and owner-level drill-down.",
        chartTypes: ["bar", "line", "gauge", "kpi-tile"]
      }
    ],
    dataSources: [
      { name: "Vulnerability Scanner", type: "API", system: "Tenable.io" },
      { name: "Asset Management Database", type: "SQL", system: "ServiceNow CMDB" },
      { name: "Threat Intelligence Platform", type: "API", system: "Recorded Future" }
    ],
    customParams: [
      { name: "Severity Threshold Display", desc: "Set the minimum CVSS severity displayed in the primary vulnerability view", options: ["All (including Low)", "Medium and Above (CVSS 4+)", "High and Above (CVSS 7+)", "Critical Only (CVSS 9+)"] },
      { name: "Asset Criticality Filter", desc: "Filter vulnerabilities by the criticality tier of the affected asset", options: ["All Assets", "Critical Business Systems Only", "Internet-Facing Assets Only", "PII Processing Systems Only"] },
      { name: "SLA Policy Template", desc: "Select the patching SLA policy applied to define breach calculations", options: ["Standard (Critical 24h / High 7d / Medium 30d)", "Accelerated (Critical 4h / High 24h / Medium 7d)", "Custom"] }
    ],
    workshopNotes: "PwC cyber resilience workshops for the Vulnerability Management pattern should challenge the conventional CVSS-only prioritisation model early‚Äîorganisations that patch strictly by CVSS score often remediate theoretical vulnerabilities in non-critical systems while leaving exploitable vulnerabilities in business-critical assets unpatched. Introduce the concept of vulnerability risk scoring (incorporating asset criticality and threat intelligence) and build agreement on the scoring methodology before defining the dashboard metrics. Map ownership clearly: the security team discovers and prioritises, but IT operations remediates‚ÄîSLA accountability must be assigned to the patching team, not the security team. Establish a formal vulnerability exception and risk acceptance process alongside the dashboard to manage legitimate cases where patching is not immediately possible."
  },
  {
    id: "ops-efficiency",
    name: "Operational Efficiency Monitor",
    category: "operations",
    audience: ["COO", "Operations Managers", "Process Improvement Team"],
    purpose: "operational-monitoring",
    maturity: "advanced",
    cadence: "daily",
    desc: "A daily operational efficiency dashboard tracking productivity, throughput, waste, and process quality across core operational processes.",
    longDesc: "The Operational Efficiency Monitor provides operations leaders with a daily pulse on process performance, enabling rapid identification of productivity losses, bottlenecks, and quality failures before they compound. It applies Lean and Six Sigma measurement frameworks to quantify waste and variation in core processes, connecting operational metrics directly to cost and customer impact. The dashboard supports both daily huddle management routines and longer-term continuous improvement programme tracking.",
    tags: ["operational-excellence", "lean", "throughput", "productivity", "daily-management"],
    keyQuestions: [
      "Which operational processes are running below target throughput or above acceptable error rates today?",
      "Where are the primary sources of waste and rework in our end-to-end process flows?",
      "How does today's operational performance compare to the same day last week and last year?"
    ],
    kpis: [
      { name: "Overall Equipment Effectiveness (OEE)", formula: "Availability √ó Performance √ó Quality (each as decimal)", unit: "%", frequency: "Daily", owner: "Operations Manager" },
      { name: "Process Throughput Rate", formula: "Units / Transactions Processed / Available Production Hours", unit: "Units/Hour", frequency: "Daily", owner: "Operations Manager" },
      { name: "First Time Right Rate", formula: "Items Completed Without Rework / Total Items Processed √ó 100", unit: "%", frequency: "Daily", owner: "Quality Manager" },
      { name: "Cost Per Unit Processed", formula: "Total Daily Operational Cost / Total Units Processed", unit: "¬£/Unit", frequency: "Daily", owner: "COO" },
      { name: "Capacity Utilisation Rate", formula: "Actual Output / Maximum Potential Output √ó 100", unit: "%", frequency: "Daily", owner: "Operations Manager" },
      { name: "Rework and Waste Rate", formula: "Items Requiring Rework or Scrapped / Total Items Processed √ó 100", unit: "%", frequency: "Daily", owner: "Quality Manager" }
    ],
    layouts: [
      {
        name: "Daily Operations Cockpit",
        desc: "Shift-by-shift performance tiles with throughput gauges, first-time-right trend, and a rolling 30-day OEE chart for each production line or process.",
        chartTypes: ["gauge", "kpi-tile", "line", "bar"]
      },
      {
        name: "Process Flow Efficiency View",
        desc: "Value stream swimlane layout showing cycle time, queue depth, and error rate at each process step, with bottleneck highlighting.",
        chartTypes: ["bar", "heatmap", "kpi-tile", "line"]
      }
    ],
    dataSources: [
      { name: "Manufacturing Execution System", type: "Real-time", system: "SAP Manufacturing" },
      { name: "Quality Management System", type: "SQL", system: "ETQ Reliance" },
      { name: "ERP Production Module", type: "SQL", system: "SAP S/4HANA" }
    ],
    customParams: [
      { name: "Process Scope", desc: "Select the operational process or production line to display", options: ["All Processes", "Front-Office Operations", "Back-Office Processing", "Production Line A", "Production Line B"] },
      { name: "Shift Comparison", desc: "Enable comparison of performance across shift teams", options: ["Current Shift Only", "All Shifts Today", "Day vs Night Comparison", "Week-on-Week"] },
      { name: "Lean Waste Category", desc: "Filter the waste analysis to specific Lean waste categories", options: ["All 8 Wastes", "Defects & Rework", "Waiting & Delays", "Overproduction", "Transport & Motion"] }
    ],
    workshopNotes: "PwC operations advisory workshops for this pattern are most effective when conducted on the shop floor or in the operations centre itself, with the team observing the actual process rather than relying on system data alone. Use a process observation exercise to validate that the metrics being proposed are actually measurable from existing systems‚Äîa common failure mode is designing a dashboard with KPIs that cannot be automatically sourced. Agree the daily huddle routine that will consume the dashboard simultaneously with its technical design; a dashboard without an embedded management routine rarely changes behaviour. Establish clear ownership for each KPI at the team leader level, not just the operations manager, to drive front-line accountability."
  },
  {
    id: "supply-chain",
    name: "Supply Chain Visibility",
    category: "operations",
    audience: ["Chief Supply Chain Officer", "Procurement Director", "Operations Director"],
    purpose: "operational-monitoring",
    maturity: "strategic",
    cadence: "daily",
    desc: "A daily end-to-end supply chain visibility dashboard monitoring supplier performance, inventory health, logistics flow, and demand-supply balance across the network.",
    longDesc: "The Supply Chain Visibility dashboard provides end-to-end transparency across the organisation's supply network, from tier-one supplier delivery performance through to finished goods availability at point of sale. It integrates supplier scorecards, inventory positions, logistics tracking, and demand signals into a single network view, enabling rapid identification of supply disruptions before they affect customer delivery commitments. Scenario modelling capabilities allow supply chain planners to simulate the impact of disruptions and evaluate response options.",
    tags: ["supply-chain", "procurement", "inventory", "logistics", "supplier-performance"],
    keyQuestions: [
      "Which suppliers or nodes in our supply network pose the highest risk to our production and delivery commitments?",
      "Where are we carrying excess or insufficient inventory relative to demand forecasts?",
      "How is current supply chain performance affecting our customer fill rate and delivery promise?"
    ],
    kpis: [
      { name: "Supplier On-Time Delivery Rate", formula: "Purchase Orders Delivered On Time / Total Purchase Orders √ó 100", unit: "%", frequency: "Daily", owner: "Procurement Director" },
      { name: "Inventory Days of Cover", formula: "Current Inventory / Average Daily Demand", unit: "Days", frequency: "Daily", owner: "Supply Chain Manager" },
      { name: "Perfect Order Rate", formula: "Orders Delivered On Time, In Full, Undamaged, and Correctly Invoiced / Total Orders √ó 100", unit: "%", frequency: "Daily", owner: "Chief Supply Chain Officer" },
      { name: "Supply Chain Cost as % of Revenue", formula: "Total Supply Chain Cost / Revenue √ó 100", unit: "%", frequency: "Daily", owner: "CFO" },
      { name: "Demand Forecast Accuracy", formula: "(1 - Mean Absolute Percentage Error of Demand Forecast) √ó 100", unit: "%", frequency: "Daily", owner: "Demand Planning Manager" },
      { name: "Logistics On-Time Delivery", formula: "Shipments Delivered Within Promised Window / Total Shipments √ó 100", unit: "%", frequency: "Daily", owner: "Logistics Manager" }
    ],
    layouts: [
      {
        name: "Supply Network Map View",
        desc: "Interactive geographic map of the supply network showing supplier locations, logistics routes, inventory nodes, and risk heat zones.",
        chartTypes: ["heatmap", "kpi-tile", "gauge"]
      },
      {
        name: "Demand-Supply Balance View",
        desc: "Waterfall of supply vs demand by SKU category, with inventory buffer status, supplier lead time trends, and fill rate trajectory.",
        chartTypes: ["waterfall", "bar", "line", "kpi-tile"]
      }
    ],
    dataSources: [
      { name: "ERP Supply Chain Module", type: "SQL", system: "SAP Integrated Business Planning" },
      { name: "Supplier Portal", type: "API", system: "Ariba Network" },
      { name: "Logistics Track & Trace", type: "Real-time", system: "project44" }
    ],
    customParams: [
      { name: "Supply Network Tier", desc: "Set the supplier tier depth included in the network visibility", options: ["Tier 1 Only", "Tier 1 and Tier 2", "Full Multi-Tier Network"] },
      { name: "Product Category Filter", desc: "Filter supply chain metrics to a specific product category or SKU range", options: ["All Categories", "Strategic Materials", "High-Volume SKUs", "Seasonal Products"] },
      { name: "Risk Alert Mode", desc: "Enable proactive supply disruption alerts based on supplier financial health, geopolitical risk, and weather events", options: ["Enabled", "Disabled"] }
    ],
    workshopNotes: "PwC supply chain advisory workshops for this pattern should open with a supply chain resilience maturity assessment‚Äîmost organisations discover significant blind spots in tier-two and tier-three supplier visibility that only become apparent when disruptions occur. Use a supply disruption scenario (e.g. a key supplier insolvency or port closure) as a design prompt: walk through the exact data the team would need to respond effectively and design the dashboard to provide that data proactively. Resist the temptation to build a pure monitoring dashboard‚Äîembed recommended action workflows for the most common disruption scenarios to make the dashboard operationally useful during a crisis. Data quality from suppliers is the primary implementation risk; build a supplier data quality scoring mechanism into the design from the outset."
  },
  {
    id: "quality-mgmt",
    name: "Quality Management Dashboard",
    category: "operations",
    audience: ["Quality Director", "Operations Managers", "Regulatory Affairs"],
    purpose: "operational-monitoring",
    maturity: "foundational",
    cadence: "weekly",
    desc: "A weekly quality management dashboard tracking defect rates, customer complaints, non-conformances, and corrective action programme effectiveness.",
    longDesc: "The Quality Management Dashboard provides quality leaders with a structured weekly view of product and process quality performance, combining internal quality measurement data with external customer quality signals. It tracks the full quality improvement cycle from defect identification through root cause analysis to corrective action verification, supporting ISO 9001 and industry-specific quality management system requirements. Pareto analysis capabilities help quality teams focus limited resource on the highest-impact quality issues.",
    tags: ["quality-management", "iso-9001", "defect-rate", "corrective-action", "customer-complaints"],
    keyQuestions: [
      "Which product lines, processes, or suppliers are generating the highest defect rates this week?",
      "Are our corrective and preventive actions effectively reducing recurring defects?",
      "How is our quality performance trending relative to customer satisfaction and complaint rates?"
    ],
    kpis: [
      { name: "Defect Rate (PPM)", formula: "(Defective Units / Total Units Inspected) √ó 1,000,000", unit: "Parts Per Million", frequency: "Weekly", owner: "Quality Manager" },
      { name: "Customer Complaint Rate", formula: "Customer Complaints Received / Units Delivered √ó 10,000", unit: "Per 10,000 units", frequency: "Weekly", owner: "Quality Director" },
      { name: "Corrective Action Closure Rate", formula: "CAPAs Closed Within Target Date / Total Open CAPAs √ó 100", unit: "%", frequency: "Weekly", owner: "Quality Manager" },
      { name: "First Pass Yield", formula: "Units Passing All Quality Checks Without Rework / Total Units Produced √ó 100", unit: "%", frequency: "Weekly", owner: "Operations Manager" },
      { name: "Supplier Defect Rate", formula: "Non-Conforming Parts Received / Total Parts Received √ó 100", unit: "%", frequency: "Weekly", owner: "Procurement Quality Manager" },
      { name: "Cost of Poor Quality (COPQ)", formula: "Sum of internal failure + external failure + appraisal + prevention costs attributable to quality failures", unit: "¬£K", frequency: "Weekly", owner: "CFO" }
    ],
    layouts: [
      {
        name: "Quality Control Overview",
        desc: "Pareto chart of top defect categories by frequency and cost impact, with trend lines and CAPA completion status by category.",
        chartTypes: ["bar", "line", "kpi-tile", "donut"]
      },
      {
        name: "Process Control Chart View",
        desc: "Statistical process control charts for key quality measurements with upper and lower control limits, highlighting out-of-control conditions.",
        chartTypes: ["line", "scatter", "kpi-tile", "gauge"]
      }
    ],
    dataSources: [
      { name: "Quality Management System", type: "SQL", system: "ETQ Reliance" },
      { name: "Manufacturing Execution System", type: "SQL", system: "Siemens Opcenter" },
      { name: "CRM Customer Complaint Module", type: "API", system: "Salesforce Service Cloud" }
    ],
    customParams: [
      { name: "Quality Standard Framework", desc: "Apply the quality measurement framework appropriate to the industry context", options: ["ISO 9001", "IATF 16949 (Automotive)", "AS9100 (Aerospace)", "GMP (Pharmaceutical)", "Custom"] },
      { name: "Defect Classification Scheme", desc: "Select the defect severity classification applied to defect rate calculations", options: ["Critical / Major / Minor", "A / B / C", "Customer-Visible / Internal Only"] },
      { name: "Statistical Control Chart Type", desc: "Choose the type of statistical process control chart displayed", options: ["X-bar and R Chart", "p-Chart (proportion)", "c-Chart (count)", "CUSUM Chart"] }
    ],
    workshopNotes: "PwC quality management workshops for this pattern work best when quality leaders and operations managers attend together, as quality improvement requires joint ownership‚Äîa common failure is building a dashboard that quality teams love but operations teams ignore. Use a cost of poor quality calculation exercise to translate defect rates into financial impact, as this is often the most effective way to secure operations leadership commitment to the programme. Ensure the corrective action workflow built into the dashboard connects to the organisation's existing CAPA process in their quality management system, rather than creating a parallel tracking mechanism. Challenge participants to move from lagging indicator monitoring to statistical process control, which enables quality deviations to be detected before they generate defects."
  },
  {
    id: "capacity-planner",
    name: "Capacity & Resource Planner",
    category: "operations",
    audience: ["COO", "Capacity Planning Team", "Finance Business Partners"],
    purpose: "operational-monitoring",
    maturity: "advanced",
    cadence: "weekly",
    desc: "A weekly capacity and resource planning dashboard balancing workload demand forecasts against available capacity across people, equipment, and facilities.",
    longDesc: "The Capacity & Resource Planner provides operations and finance leaders with a forward-looking view of capacity supply versus demand across a rolling 13-week horizon, enabling proactive decisions on hiring, overtime, subcontracting, and capital investment before constraints become crises. It integrates demand forecasts from sales and operations planning with actual capacity data from HR, equipment, and facilities systems to produce a constraint-adjusted capacity plan. Scenario planning tools allow planners to model the impact of demand shifts, resource changes, and efficiency improvements.",
    tags: ["capacity-planning", "resource-management", "s-and-op", "workforce-planning", "constraint-management"],
    keyQuestions: [
      "Where will we have capacity shortfalls or surpluses in the next 13 weeks, and what decisions are required now?",
      "Which resource types‚Äîpeople, equipment, or facilities‚Äîare the binding constraints on throughput growth?",
      "What is the cost trade-off between overtime, temporary resource, and planned capacity investment?"
    ],
    kpis: [
      { name: "Capacity Utilisation Rate", formula: "Actual Units Produced / Maximum Rated Capacity √ó 100", unit: "%", frequency: "Weekly", owner: "Operations Director" },
      { name: "Capacity Cover Ratio", formula: "Available Capacity / Forecast Demand", unit: "Ratio", frequency: "Weekly", owner: "Capacity Planning Manager" },
      { name: "Overtime Premium Rate", formula: "Overtime Hours Worked / Total Hours Worked √ó 100", unit: "%", frequency: "Weekly", owner: "COO" },
      { name: "Capacity Forecast Accuracy", formula: "(1 - |Forecast Capacity Needed - Actual Capacity Used| / Actual Capacity Used) √ó 100", unit: "%", frequency: "Weekly", owner: "Capacity Planning Manager" },
      { name: "Resource Productivity Index", formula: "Actual Output / Standard Output for Resource Hours Worked", unit: "Index", frequency: "Weekly", owner: "Operations Manager" },
      { name: "Capital Utilisation Efficiency", formula: "Revenue Generated / Net Book Value of Productive Assets √ó 100", unit: "%", frequency: "Weekly", owner: "CFO" }
    ],
    layouts: [
      {
        name: "13-Week Capacity Horizon View",
        desc: "Rolling 13-week bar chart of capacity supply vs demand by resource type, with constraint weeks highlighted and scenario toggle controls.",
        chartTypes: ["bar", "line", "kpi-tile", "gauge"]
      },
      {
        name: "Resource Allocation Heatmap",
        desc: "Resource-by-week heatmap showing utilisation rates, with over-allocated cells highlighted and drill-down to individual team or equipment allocation.",
        chartTypes: ["heatmap", "bar", "kpi-tile"]
      }
    ],
    dataSources: [
      { name: "Sales & Operations Planning Tool", type: "API", system: "SAP Integrated Business Planning" },
      { name: "HR Workforce Management", type: "API", system: "Workday" },
      { name: "Asset Management System", type: "SQL", system: "IBM Maximo" }
    ],
    customParams: [
      { name: "Planning Horizon", desc: "Set the forward planning window for the capacity view", options: ["4 Weeks", "8 Weeks", "13 Weeks", "26 Weeks"] },
      { name: "Resource Type Focus", desc: "Filter the capacity analysis to a specific resource type", options: ["All Resources", "People Only", "Equipment Only", "Facilities Only", "Combined View"] },
      { name: "Scenario Mode", desc: "Enable scenario planning to model alternative demand or capacity assumptions", options: ["Actuals Only", "Base Scenario", "Upside Scenario", "Downside Scenario", "Multi-Scenario Comparison"] }
    ],
    workshopNotes: "PwC operations and workforce planning workshops for this pattern benefit significantly from running an S&OP cycle simulation, where participants experience the full monthly planning process using representative data‚Äîthis reveals process gaps that purely analytical workshops miss. The most common insight is that capacity constraints are known intuitively by operations managers but not surfaced in a timely and structured way that enables financial decisions. Connect the capacity dashboard to the financial planning cycle explicitly: each capacity shortfall should have an associated cost impact to the P&L, making the investment case for capacity decisions transparent. Ensure the scenario planning functionality is governed‚Äîunrestricted scenario creation can generate confusion rather than clarity if not managed by a designated planning owner."
  },
  {
    id: "cx-hub",
    name: "Customer Experience Hub",
    category: "customer",
    audience: ["Chief Customer Officer", "CX Team", "Service Operations Director"],
    purpose: "customer-insight",
    maturity: "advanced",
    cadence: "weekly",
    desc: "A weekly customer experience hub consolidating satisfaction signals, journey analytics, complaint trends, and service quality metrics into a unified CX command centre.",
    longDesc: "The Customer Experience Hub aggregates voice-of-customer data from all listening posts‚Äîtransactional surveys, relationship NPS, social media, complaints, and contact centre interactions‚Äîinto a unified CX measurement framework. It enables CX teams to identify experience gaps at specific journey moments and quantify the revenue impact of CX improvements through churn and lifetime value correlation analysis. The hub supports both operational service quality monitoring and strategic CX investment prioritisation.",
    tags: ["customer-experience", "nps", "cx-journey", "voice-of-customer", "cx-analytics"],
    keyQuestions: [
      "At which moments in the customer journey are we generating the most dissatisfaction and churn risk?",
      "How has our NPS and satisfaction score trended over the past 13 weeks and what is driving the movement?",
      "What is the relationship between our CX metrics and customer retention and revenue outcomes?"
    ],
    kpis: [
      { name: "Net Promoter Score (NPS)", formula: "% Promoters (score 9-10) - % Detractors (score 0-6)", unit: "Score (-100 to 100)", frequency: "Weekly", owner: "Chief Customer Officer" },
      { name: "Customer Satisfaction Score (CSAT)", formula: "Sum of Satisfaction Ratings / Total Responses √ó 100", unit: "Score (0-100)", frequency: "Weekly", owner: "CX Manager" },
      { name: "Customer Effort Score (CES)", formula: "Average rating of effort required on scale 1-7 (lower is better)", unit: "Score (1-7)", frequency: "Weekly", owner: "CX Manager" },
      { name: "First Contact Resolution Rate", formula: "Issues Resolved on First Contact / Total Issues √ó 100", unit: "%", frequency: "Weekly", owner: "Service Operations Director" },
      { name: "Churn Rate (Monthly)", formula: "Customers Lost in Period / Customers at Start of Period √ó 100", unit: "%", frequency: "Weekly", owner: "Chief Customer Officer" },
      { name: "CX-Revenue Correlation Index", formula: "Pearson correlation coefficient between NPS cohort and 90-day revenue retention", unit: "Coefficient (-1 to 1)", frequency: "Weekly", owner: "Chief Customer Officer" }
    ],
    layouts: [
      {
        name: "Journey Heatmap View",
        desc: "Customer journey map with each touchpoint colour-coded by satisfaction score, overlaid with complaint volume bubbles and CES ratings.",
        chartTypes: ["heatmap", "kpi-tile", "bar", "line"]
      },
      {
        name: "CX Trend Dashboard",
        desc: "13-week trend lines for NPS, CSAT, and CES by customer segment, channel, and product line with statistical significance indicators.",
        chartTypes: ["line", "sparkline", "kpi-tile", "donut"]
      }
    ],
    dataSources: [
      { name: "CX Survey Platform", type: "API", system: "Qualtrics XM" },
      { name: "CRM & Contact Centre", type: "API", system: "Salesforce Service Cloud" },
      { name: "Social Listening Tool", type: "API", system: "Sprinklr" }
    ],
    customParams: [
      { name: "Customer Segment View", desc: "Filter CX metrics to a specific customer segment or persona", options: ["All Segments", "Enterprise Customers", "SME Customers", "Consumer", "New Customers (< 90 days)"] },
      { name: "Journey Stage Filter", desc: "Focus analysis on a specific stage of the customer journey", options: ["End-to-End Journey", "Acquisition", "Onboarding", "In-Life Servicing", "Renewal / Retention"] },
      { name: "Verbatim Analysis Mode", desc: "Enable AI-driven sentiment classification of open-text survey responses", options: ["Enabled (Auto-classify)", "Enabled (Manual review)", "Disabled"] }
    ],
    workshopNotes: "PwC customer experience advisory workshops for this pattern should begin with a customer journey mapping exercise involving representatives from every function that touches the customer‚Äîfinance for billing, operations for delivery, IT for digital channels, and the front-line service team. The hub's value is highest when it connects the dots between silos, so design it to reveal handoff failures between departments explicitly. Invest workshop time in agreeing what constitutes a 'material' NPS movement that warrants executive action, anchored in statistical significance rather than gut feel. The CX-revenue correlation analysis is the most strategically powerful element; work with the CFO team to validate the methodology so the output can be used to justify CX investment in capital allocation discussions."
  },
  {
    id: "sales-pipeline",
    name: "Sales Pipeline Tracker",
    category: "customer",
    audience: ["Sales Director", "Revenue Operations", "CFO"],
    purpose: "customer-insight",
    maturity: "foundational",
    cadence: "weekly",
    desc: "A weekly sales pipeline tracker providing visibility of pipeline coverage, conversion rates, deal velocity, and forecast accuracy to drive revenue predictability.",
    longDesc: "The Sales Pipeline Tracker gives sales leaders and revenue operations teams a structured, data-driven view of the sales funnel, replacing subjective deal assessments with objective pipeline metrics. It tracks opportunities through each funnel stage, monitoring conversion rates, average deal size, and velocity to produce a statistically grounded revenue forecast. Win/loss analysis provides insight into competitive dynamics and seller effectiveness, feeding directly into sales enablement and coaching priorities.",
    tags: ["sales", "pipeline", "crm", "revenue-forecasting", "win-loss"],
    keyQuestions: [
      "Do we have sufficient pipeline coverage to achieve our quarterly revenue target, and how is deal velocity trending?",
      "At which funnel stage are we losing the most opportunities and what is the primary cause?",
      "How accurate are our sales forecasts and which sellers are most consistently reliable?"
    ],
    kpis: [
      { name: "Pipeline Coverage Ratio", formula: "Total Qualified Pipeline Value / Revenue Target √ó 100", unit: "x Coverage", frequency: "Weekly", owner: "Sales Director" },
      { name: "Sales Win Rate", formula: "Opportunities Won / (Opportunities Won + Opportunities Lost) √ó 100", unit: "%", frequency: "Weekly", owner: "Sales Director" },
      { name: "Average Sales Cycle Length", formula: "Sum of (Close Date - Opportunity Create Date) for Won Deals / Count of Won Deals", unit: "Days", frequency: "Weekly", owner: "Revenue Operations" },
      { name: "Forecast Accuracy (Rolling 90-Day)", formula: "(1 - |Committed Forecast - Actual Revenue| / Actual Revenue) √ó 100", unit: "%", frequency: "Weekly", owner: "CFO" },
      { name: "Average Deal Size", formula: "Total Won Revenue / Number of Won Deals", unit: "¬£K", frequency: "Weekly", owner: "Sales Director" },
      { name: "Pipeline Velocity", formula: "(Number of Opportunities √ó Win Rate √ó Average Deal Size) / Sales Cycle Length", unit: "¬£/Day", frequency: "Weekly", owner: "Revenue Operations" }
    ],
    layouts: [
      {
        name: "Funnel Conversion View",
        desc: "Sales funnel with stage-by-stage conversion rates, deal counts, and total value, with a 13-week trend of pipeline creation and progression.",
        chartTypes: ["bar", "line", "kpi-tile", "waterfall"]
      },
      {
        name: "Forecast Accuracy View",
        desc: "Actual vs committed forecast scatter plot by seller, with forecast accuracy trend and a probability-weighted pipeline summary by close quarter.",
        chartTypes: ["scatter", "bar", "kpi-tile", "line"]
      }
    ],
    dataSources: [
      { name: "CRM Platform", type: "API", system: "Salesforce Sales Cloud" },
      { name: "Revenue Intelligence Platform", type: "API", system: "Clari" },
      { name: "Financial Planning System", type: "SQL", system: "Anaplan" }
    ],
    customParams: [
      { name: "Pipeline Segment", desc: "Filter pipeline metrics to a specific sales team, territory, or product line", options: ["All Pipeline", "Enterprise Segment", "Mid-Market Segment", "New Business Only", "Renewal Pipeline"] },
      { name: "Forecast Method", desc: "Select the forecasting methodology applied to the pipeline", options: ["Stage-weighted Probability", "AI-powered Prediction (Clari)", "Seller Commit + Upside", "Historical Conversion Rates"] },
      { name: "Time Period View", desc: "Set the primary time horizon for pipeline and forecast display", options: ["Current Quarter", "Next Quarter", "Current Half-Year", "Full Year"] }
    ],
    workshopNotes: "PwC sales effectiveness workshops for this pattern should begin with a 'forecast post-mortem' review of the last four quarters: comparing committed forecasts to actuals reveals the systematic biases (typically over-optimism in early quarter, under-calling in late quarter) that the dashboard should be designed to correct. Involve sellers in the design workshop‚Äîtheir buy-in to the pipeline hygiene requirements that make the data trustworthy is essential, and they respond better to understanding the 'so what' of good data than to compliance mandates. Define the pipeline stage definitions precisely in the workshop: vague stage criteria are the primary cause of inaccurate pipeline reports. Ensure the forecast methodology is agreed with the CFO team so that the sales forecast connects directly to the financial planning process."
  },
  {
    id: "marketing-perf",
    name: "Marketing Performance Dashboard",
    category: "customer",
    audience: ["CMO", "Marketing Analytics Team", "CFO"],
    purpose: "customer-insight",
    maturity: "advanced",
    cadence: "weekly",
    desc: "A weekly marketing performance dashboard measuring campaign effectiveness, channel ROI, brand metrics, and marketing's contribution to pipeline and revenue.",
    longDesc: "The Marketing Performance Dashboard gives the CMO and marketing analytics team a unified measurement framework spanning brand awareness, demand generation, campaign performance, and marketing-influenced revenue. It enables multi-touch attribution across digital and offline channels, providing a defensible view of marketing ROI that can be presented to the CFO and board. Integration with the CRM pipeline connects marketing activity directly to revenue outcomes, moving the function from a cost centre to a measurable revenue contributor.",
    tags: ["marketing", "campaign-roi", "attribution", "demand-generation", "cmo"],
    keyQuestions: [
      "Which marketing channels and campaigns are generating the highest return on investment and pipeline contribution?",
      "How is our brand awareness and share of voice trending relative to key competitors?",
      "What is the marketing-sourced and marketing-influenced contribution to closed revenue this quarter?"
    ],
    kpis: [
      { name: "Marketing Return on Investment", formula: "(Marketing-Attributed Revenue - Marketing Cost) / Marketing Cost √ó 100", unit: "%", frequency: "Weekly", owner: "CMO" },
      { name: "Cost Per Marketing Qualified Lead (MQL)", formula: "Total Marketing Spend / Number of MQLs Generated", unit: "¬£/MQL", frequency: "Weekly", owner: "Demand Generation Manager" },
      { name: "MQL to SQL Conversion Rate", formula: "Sales Qualified Leads / Marketing Qualified Leads √ó 100", unit: "%", frequency: "Weekly", owner: "Revenue Operations" },
      { name: "Marketing-Sourced Pipeline", formula: "Value of opportunities where first touch is a marketing activity", unit: "¬£M", frequency: "Weekly", owner: "CMO" },
      { name: "Share of Voice", formula: "Organisation Brand Mentions / Total Industry Brand Mentions √ó 100", unit: "%", frequency: "Weekly", owner: "Brand Manager" },
      { name: "Campaign Conversion Rate", formula: "Campaign Responses Leading to Qualified Opportunity / Total Campaign Contacts √ó 100", unit: "%", frequency: "Weekly", owner: "Campaign Manager" }
    ],
    layouts: [
      {
        name: "Channel Performance Matrix",
        desc: "ROI and volume scatter plot by marketing channel, with spend allocation pie chart and a campaign league table ranked by cost-per-MQL.",
        chartTypes: ["scatter", "donut", "bar", "kpi-tile"]
      },
      {
        name: "Funnel Contribution View",
        desc: "Marketing-to-revenue funnel showing volume and conversion at each stage from impression to closed revenue, with attribution model toggle.",
        chartTypes: ["bar", "waterfall", "kpi-tile", "line"]
      }
    ],
    dataSources: [
      { name: "Marketing Automation Platform", type: "API", system: "HubSpot / Marketo" },
      { name: "CRM Pipeline", type: "API", system: "Salesforce Sales Cloud" },
      { name: "Digital Analytics Platform", type: "API", system: "Google Analytics 4" }
    ],
    customParams: [
      { name: "Attribution Model", desc: "Select the multi-touch attribution model applied to revenue and pipeline calculations", options: ["First Touch", "Last Touch", "Linear Multi-Touch", "Time-Decay", "Data-Driven (AI)"] },
      { name: "Campaign Type Filter", desc: "Filter performance metrics to a specific campaign type or channel", options: ["All Campaigns", "Paid Digital", "Content & SEO", "Events", "Email Nurture", "Account-Based Marketing"] },
      { name: "Brand vs Demand Split", desc: "Adjust the dashboard to focus on brand awareness metrics or demand generation performance", options: ["Balanced View", "Brand Focus", "Demand Generation Focus"] }
    ],
    workshopNotes: "PwC marketing advisory workshops for this pattern must address the attribution methodology debate head-on‚Äîthere is no universally agreed answer, and the goal is to choose and consistently apply a methodology that is defensible to the CFO rather than to find a perfect model. Use a 'marketing investment portfolio' framing rather than a channel performance review to elevate the conversation from tactical optimisation to strategic allocation. Involve the revenue operations team as equal partners in the workshop design, as the quality of CRM data hygiene determines whether marketing attribution is meaningful or fictional. Challenge the CMO team to express at least 60% of their KPIs in revenue or pipeline terms by the end of the engagement, regardless of channel type."
  },
  {
    id: "people-analytics",
    name: "People Analytics Dashboard",
    category: "workforce",
    audience: ["CHRO", "HR Business Partners", "CEO"],
    purpose: "workforce-management",
    maturity: "advanced",
    cadence: "monthly",
    desc: "A monthly people analytics dashboard delivering workforce insights on retention risk, capability gaps, performance distribution, and organisational health.",
    longDesc: "The People Analytics Dashboard moves the HR function from retrospective reporting to predictive workforce intelligence, enabling proactive decisions on talent retention, capability investment, and organisational design. It combines people data from HRIS, performance management, and engagement survey platforms with workforce economics modelling to quantify the cost and risk impact of talent decisions. Privacy-by-design principles are embedded throughout, ensuring that aggregate insights are delivered without compromising individual data rights.",
    tags: ["people-analytics", "talent-retention", "workforce-planning", "engagement", "hr-analytics"],
    keyQuestions: [
      "Which business units or role categories face the highest flight risk, and what is the predicted cost of attrition?",
      "Where do we have critical capability gaps that are limiting our ability to execute strategic priorities?",
      "How does our performance distribution compare to the organisation's strategic needs?"
    ],
    kpis: [
      { name: "Voluntary Turnover Rate", formula: "Voluntary Leavers in Period / Average Headcount in Period √ó 100", unit: "%", frequency: "Monthly", owner: "CHRO" },
      { name: "Regrettable Attrition Rate", formula: "High-Performer Leavers / Total Leavers √ó 100", unit: "%", frequency: "Monthly", owner: "CHRO" },
      { name: "Employee Engagement Index", formula: "Weighted average of pulse survey dimensions (scale 0-100)", unit: "Score", frequency: "Monthly", owner: "People Experience Director" },
      { name: "Internal Mobility Rate", formula: "Employees Moving to New Role Internally / Total Employees √ó 100", unit: "%", frequency: "Monthly", owner: "Talent Director" },
      { name: "Time to Productivity (New Hires)", formula: "Average days from start date to first performance rating of 'meeting expectations'", unit: "Days", frequency: "Monthly", owner: "CHRO" },
      { name: "Cost per Hire", formula: "(External Recruitment Fees + Internal Recruiter Time + Onboarding Cost) / Number of Hires", unit: "¬£K", frequency: "Monthly", owner: "Talent Acquisition Director" }
    ],
    layouts: [
      {
        name: "Workforce Risk Heat Map",
        desc: "Organisational unit heatmap of attrition risk, time-in-role, and engagement score, with predictive flight-risk indicators and succession coverage.",
        chartTypes: ["heatmap", "kpi-tile", "gauge", "scatter"]
      },
      {
        name: "Performance & Capability View",
        desc: "Performance distribution bell curve by business unit, capability gap radar chart, and 9-box talent grid summary with succession depth indicators.",
        chartTypes: ["scatter", "bar", "kpi-tile", "donut"]
      }
    ],
    dataSources: [
      { name: "HR Information System", type: "API", system: "Workday HCM" },
      { name: "Employee Engagement Platform", type: "API", system: "Glint / Microsoft Viva" },
      { name: "Performance Management System", type: "SQL", system: "SuccessFactors" }
    ],
    customParams: [
      { name: "Workforce Segment View", desc: "Filter people analytics metrics to a specific workforce segment", options: ["All Workforce", "Leadership (Grades 9+)", "High Potentials", "Early Careers", "Business Unit: Sales"] },
      { name: "Attrition Forecast Horizon", desc: "Set the forward-looking period for predictive attrition modelling", options: ["3 Months", "6 Months", "12 Months"] },
      { name: "Privacy Aggregation Threshold", desc: "Set the minimum group size for displaying disaggregated people data to protect individual privacy", options: ["5 or more employees", "10 or more employees", "15 or more employees"] }
    ],
    workshopNotes: "PwC people analytics workshops for this pattern require a dedicated session on data privacy and ethics governance before any dashboard design discussion‚Äîthis is non-negotiable and typically requires HR legal counsel in the room. Use the 'decision audit' technique: identify the ten most important workforce decisions made in the last year and assess whether each could have been better informed by data; this produces a prioritised list of analytics use cases grounded in real business need. Engage line managers as well as HR in the design process, as the dashboard must serve the decision-makers closest to the workforce, not just the CHRO. Establish a formal people data governance framework alongside the dashboard build, including data dictionary, quality standards, and access controls."
  },
  {
    id: "ld-tracker",
    name: "L&D Progress Tracker",
    category: "workforce",
    audience: ["L&D Director", "HR Business Partners", "Line Managers"],
    purpose: "workforce-management",
    maturity: "foundational",
    cadence: "monthly",
    desc: "A monthly learning and development progress tracker monitoring training completion, capability uplift, learning investment ROI, and skill gap closure across the workforce.",
    longDesc: "The L&D Progress Tracker gives learning leaders and HR business partners visibility of whether their learning investment is translating into measurable capability improvement and business impact. It tracks training completion against compliance and development obligations, alongside voluntary learning activity and self-directed development. Post-training assessment and performance correlation tools enable the L&D function to demonstrate the business impact of learning interventions, making the case for continued investment.",
    tags: ["learning-development", "training", "capability", "skills", "lms"],
    keyQuestions: [
      "Are we closing the priority skill gaps identified in the capability assessment at the pace required by our strategy?",
      "Which learning programmes are generating the strongest post-training performance improvement?",
      "Are mandatory training completion rates meeting compliance requirements across all employee groups?"
    ],
    kpis: [
      { name: "Mandatory Training Completion Rate", formula: "Employees Completing Mandatory Training / Total Required Employees √ó 100", unit: "%", frequency: "Monthly", owner: "L&D Compliance Manager" },
      { name: "Learning Hours per Employee", formula: "Total Learning Hours Completed / Total Full-Time Equivalent Employees", unit: "Hours/FTE", frequency: "Monthly", owner: "L&D Director" },
      { name: "Skill Gap Closure Rate", formula: "Skill Gaps Assessed as Closed / Total Identified Skill Gaps √ó 100", unit: "%", frequency: "Monthly", owner: "Capability Manager" },
      { name: "Post-Training Assessment Pass Rate", formula: "Employees Passing Post-Training Assessment / Total Employees Assessed √ó 100", unit: "%", frequency: "Monthly", owner: "L&D Manager" },
      { name: "Training Cost per Employee", formula: "Total L&D Investment / Total Full-Time Equivalent Employees", unit: "¬£/FTE", frequency: "Monthly", owner: "L&D Director" },
      { name: "L&D ROI Index", formula: "(Performance Improvement Value - Training Cost) / Training Cost √ó 100", unit: "%", frequency: "Monthly", owner: "CHRO" }
    ],
    layouts: [
      {
        name: "Completion and Compliance View",
        desc: "Mandatory training completion heatmap by team and programme, with overdue alerts, certificate expiry tracking, and regulatory deadline countdown.",
        chartTypes: ["heatmap", "kpi-tile", "gauge", "bar"]
      },
      {
        name: "Capability Uplift View",
        desc: "Skill gap radar charts before and after learning interventions by role family, with programme impact league table and learning investment treemap.",
        chartTypes: ["bar", "line", "kpi-tile", "donut"]
      }
    ],
    dataSources: [
      { name: "Learning Management System", type: "API", system: "Cornerstone OnDemand" },
      { name: "HR Information System", type: "API", system: "Workday HCM" },
      { name: "Skills Assessment Platform", type: "API", system: "Degreed" }
    ],
    customParams: [
      { name: "Learning Programme Filter", desc: "Filter metrics to a specific learning programme, curriculum, or content category", options: ["All Programmes", "Mandatory Compliance", "Leadership Development", "Technical Skills", "Digital Literacy"] },
      { name: "Employee Group View", desc: "Restrict the dashboard to a specific employee population", options: ["All Employees", "People Managers", "Graduate Cohort", "Senior Leaders", "Specific Business Unit"] },
      { name: "Impact Measurement Method", desc: "Select the methodology used to assess post-training business impact", options: ["Assessment Score Only", "Manager Observation Rating", "Performance Metric Correlation", "Kirkpatrick Level 4 Full"] }
    ],
    workshopNotes: "PwC L&D advisory workshops for this pattern should open with a learning effectiveness challenge: ask participants to name the three L&D programmes with the clearest evidence of business impact. In most organisations, this question reveals that impact measurement is either absent or anecdotal, which defines the primary design challenge. Prioritise the business impact measurement capability in the build roadmap, as completion rate reporting alone reinforces the perception of L&D as a compliance function rather than a strategic capability builder. Involve line managers in designing the skill gap closure measurement approach, as they are the most credible validators of whether capability has actually improved. Design the dashboard to celebrate learning investment rather than merely monitor compliance‚Äîthis changes the cultural dynamic around the tool."
  },
  {
    id: "dei-metrics",
    name: "DEI Metrics Board",
    category: "workforce",
    audience: ["Chief People Officer", "DEI Council", "Board People Committee"],
    purpose: "workforce-management",
    maturity: "foundational",
    cadence: "quarterly",
    desc: "A quarterly diversity, equity, and inclusion metrics board tracking representation, pay equity, inclusion sentiment, and progress against DEI commitments.",
    longDesc: "The DEI Metrics Board provides people leaders and the board with a rigorous, data-driven view of the organisation's DEI progress, moving beyond headcount diversity to measure equity in pay, progression, and opportunity. It tracks representation across the talent pipeline‚Äîfrom graduate intake through to senior leadership‚Äîenabling identification of where historically underrepresented groups are leaving or being held back. Inclusion sentiment data from targeted survey instruments complements the quantitative representation metrics to provide a complete picture of the inclusive culture experience.",
    tags: ["dei", "diversity", "inclusion", "pay-equity", "representation"],
    keyQuestions: [
      "How does the representation of underrepresented groups compare across each seniority level, and where are the attrition points?",
      "Are there measurable pay equity gaps after controlling for role, experience, and performance, and are they narrowing?",
      "How is the inclusion sentiment of underrepresented employees trending and what is driving it?"
    ],
    kpis: [
      { name: "Gender Representation at Senior Leadership", formula: "Women in Grades 9+ / Total Employees in Grades 9+ √ó 100", unit: "%", frequency: "Quarterly", owner: "Chief People Officer" },
      { name: "Ethnicity Pay Gap (Median)", formula: "(Median White British Salary - Median Ethnic Minority Salary) / Median White British Salary √ó 100", unit: "%", frequency: "Quarterly", owner: "Chief People Officer" },
      { name: "Promotion Rate Parity Index", formula: "Promotion Rate for Underrepresented Groups / Promotion Rate for Reference Group", unit: "Ratio", frequency: "Quarterly", owner: "DEI Director" },
      { name: "Inclusion Index Score", formula: "Weighted average of inclusion survey dimensions (Belonging, Fairness, Voice) on scale 0-100", unit: "Score", frequency: "Quarterly", owner: "DEI Director" },
      { name: "Diverse Slate Compliance Rate", formula: "Shortlists Meeting Diverse Candidate Requirement / Total Shortlists √ó 100", unit: "%", frequency: "Quarterly", owner: "Talent Acquisition Director" },
      { name: "Representation Pipeline Ratio", formula: "Underrepresented Group Share at Entry Level / Underrepresented Group Share at Senior Level", unit: "Ratio", frequency: "Quarterly", owner: "Chief People Officer" }
    ],
    layouts: [
      {
        name: "Representation Waterfall View",
        desc: "Seniority-level funnel showing representation percentage for each diversity characteristic, highlighting where pipeline diversity erodes through promotion levels.",
        chartTypes: ["bar", "waterfall", "kpi-tile"]
      },
      {
        name: "Pay Equity and Inclusion View",
        desc: "Controlled and uncontrolled pay gap visualisations by characteristic, alongside inclusion index trend lines and targeted sentiment heatmap.",
        chartTypes: ["bar", "line", "heatmap", "kpi-tile"]
      }
    ],
    dataSources: [
      { name: "HR Information System", type: "API", system: "Workday HCM" },
      { name: "Pay & Reward System", type: "SQL", system: "Oracle HCM Cloud" },
      { name: "DEI Survey Platform", type: "API", system: "Glint / Culture Amp" }
    ],
    customParams: [
      { name: "Diversity Characteristic Focus", desc: "Select the protected characteristic or diversity dimension for detailed analysis", options: ["Gender", "Ethnicity", "Disability", "Sexual Orientation", "Socioeconomic Background", "All Characteristics"] },
      { name: "Seniority Band View", desc: "Filter or segment metrics by organisational seniority tier", options: ["All Levels", "Executive (Grade 10+)", "Senior Manager (Grade 7-9)", "Manager (Grade 4-6)", "Entry Level (Grade 1-3)"] },
      { name: "Pay Analysis Type", desc: "Toggle between unadjusted and controlled pay gap analyses", options: ["Unadjusted (Raw Gap)", "Controlled (Like-for-Like Roles)", "Both Views"] }
    ],
    workshopNotes: "PwC inclusion and diversity advisory workshops for this pattern require careful facilitation to navigate the combination of legal sensitivity, emotional resonance, and statistical complexity inherent in DEI data. Begin with a data availability and collection audit, as many organisations lack the permitted data collection practices to populate all desired metrics‚Äîimproving data collection is often the first project workstream. Engage the legal and compliance team in defining which data can be collected, reported, and displayed given jurisdiction-specific data protection requirements. Apply the 'intersectionality lens' to the design: DEI metrics disaggregated by a single characteristic can mask compounding disadvantage experienced by individuals with multiple minority characteristics. Agree the external disclosure scope with the Company Secretary before build, as the regulatory landscape for DEI reporting is evolving rapidly."
  },
  {
    id: "portfolio-health",
    name: "Portfolio Health Monitor",
    category: "pmo",
    audience: ["Portfolio Director", "PMO", "Executive Sponsors"],
    purpose: "project-delivery",
    maturity: "foundational",
    cadence: "weekly",
    desc: "A weekly portfolio health monitor providing executive sponsors and the PMO with a consolidated RAG status view of all active projects, programmes, and investments.",
    longDesc: "The Portfolio Health Monitor gives portfolio leaders a single view of delivery status, resource consumption, financial performance, and risk exposure across the full project and programme portfolio. It replaces the time-consuming manual aggregation of individual project status reports with an automated, consistent portfolio picture that is available to all stakeholders simultaneously. Trend analysis tracks whether portfolio health is improving or deteriorating over time, and the escalation workflow ensures that red-rated items receive timely executive attention.",
    tags: ["portfolio-management", "pmo", "rag-status", "project-delivery", "investment-tracking"],
    keyQuestions: [
      "How many projects in the portfolio are currently rated Red or Amber, and what executive actions are required?",
      "Is the portfolio collectively on track to deliver the planned benefits within approved budgets?",
      "Where are the cross-portfolio resource conflicts and dependencies creating the greatest delivery risk?"
    ],
    kpis: [
      { name: "Portfolio On-Track Rate", formula: "Projects Rated Green / Total Active Projects √ó 100", unit: "%", frequency: "Weekly", owner: "Portfolio Director" },
      { name: "Portfolio Budget Performance Index", formula: "Earned Value / Planned Value (EV/PV) across portfolio", unit: "Index", frequency: "Weekly", owner: "PMO Finance Lead" },
      { name: "Schedule Performance Index (Portfolio)", formula: "Earned Value / Planned Value (from project schedules) averaged across portfolio", unit: "Index", frequency: "Weekly", owner: "PMO" },
      { name: "Portfolio Cost Variance", formula: "(Earned Value - Actual Cost) / Planned Budget √ó 100 across portfolio", unit: "%", frequency: "Weekly", owner: "PMO Finance Lead" },
      { name: "Benefits Delivery Rate (YTD)", formula: "Benefits Realised YTD / Benefits Planned YTD √ó 100", unit: "%", frequency: "Weekly", owner: "Portfolio Director" },
      { name: "Resource Utilisation Rate", formula: "Portfolio Resource Hours Consumed / Portfolio Resource Hours Available √ó 100", unit: "%", frequency: "Weekly", owner: "PMO Resource Manager" }
    ],
    layouts: [
      {
        name: "Portfolio Status Grid",
        desc: "Sortable project grid with RAG status columns for time, cost, quality, risk, and benefits, plus trend arrows and executive sponsor assignment.",
        chartTypes: ["kpi-tile", "heatmap", "bar"]
      },
      {
        name: "Portfolio Financial View",
        desc: "Bubble chart of portfolio investments scaled by budget, positioned by SPI and CPI axes, with a total portfolio benefits tracker below.",
        chartTypes: ["scatter", "bar", "line", "kpi-tile"]
      }
    ],
    dataSources: [
      { name: "Project Management Platform", type: "API", system: "Microsoft Project Online / Planner" },
      { name: "Financial Reporting System", type: "SQL", system: "SAP S/4HANA" },
      { name: "Resource Management Tool", type: "API", system: "Planview" }
    ],
    customParams: [
      { name: "Portfolio Filter", desc: "Filter to a specific investment portfolio, programme, or strategic theme", options: ["Full Portfolio", "Strategic Change Portfolio", "Regulatory & Compliance Portfolio", "Technology Portfolio", "Business As Usual"] },
      { name: "RAG Definition", desc: "Select the RAG rating methodology applied to projects in this portfolio", options: ["PwC Standard RAG Framework", "Client PMO Framework", "Earned Value Thresholds Only"] },
      { name: "Benefits Tracking Mode", desc: "Configure how benefits are tracked and attributed across the portfolio", options: ["Benefits at Programme Level", "Benefits at Project Level", "Benefits at Strategic Theme Level"] }
    ],
    workshopNotes: "PwC PMO advisory workshops for this pattern should begin with a 'portfolio paradox' challenge: ask how many projects are currently rated Red, then compare this to the actual delivery failure rate‚Äîin most organisations, the gap is significant, indicating that RAG ratings are being used for status management rather than honest exception reporting. Agree an independent RAG challenge mechanism (such as PMO triangulation against objective data) to reduce grade inflation. Define the minimum data quality standard required for a project to appear in the portfolio view‚Äîexcluding poorly governed projects creates a powerful incentive for compliance. Invest time in the escalation workflow design: knowing a project is red is valueless unless the right person takes the right action within the right timeframe."
  },
  {
    id: "programme-delivery",
    name: "Programme Delivery Tracker",
    category: "pmo",
    audience: ["Programme Director", "Workstream Leads", "Executive Sponsor"],
    purpose: "project-delivery",
    maturity: "advanced",
    cadence: "weekly",
    desc: "A weekly programme delivery tracker providing workstream-level schedule, cost, risk, and dependency tracking with integrated change control and decision log.",
    longDesc: "The Programme Delivery Tracker gives programme directors and workstream leads the operational granularity required to manage complex, interdependent programmes with multiple parallel workstreams. It combines schedule performance from the project scheduling tool with financial performance from the cost management system, risk and issue logs from the risk register, and dependency tracking to provide a complete programme management picture. The integrated change control panel ensures that scope changes are captured, costed, and formally approved before being reflected in the schedule baseline.",
    tags: ["programme-management", "workstream", "dependency-tracking", "change-control", "earned-value"],
    keyQuestions: [
      "Which workstreams are behind schedule and how does this impact the programme's critical path and go-live date?",
      "Are costs tracking within the approved programme budget, and is the contingency reserve being consumed at an acceptable rate?",
      "Which open risks and issues pose the greatest threat to programme delivery and what mitigation actions are in progress?"
    ],
    kpis: [
      { name: "Schedule Variance (Programme)", formula: "Earned Value - Planned Value in ¬£ equivalent across all workstreams", unit: "¬£K", frequency: "Weekly", owner: "Programme Manager" },
      { name: "Cost Performance Index (CPI)", formula: "Earned Value / Actual Cost across programme workstreams", unit: "Index", frequency: "Weekly", owner: "PMO Finance Lead" },
      { name: "Milestone Delivery Rate", formula: "Milestones Delivered On Time / Total Milestones Due √ó 100", unit: "%", frequency: "Weekly", owner: "Programme Director" },
      { name: "Contingency Consumption Rate", formula: "Contingency Used to Date / Total Approved Contingency √ó 100", unit: "%", frequency: "Weekly", owner: "PMO Finance Lead" },
      { name: "Open Issues Resolution Rate", formula: "Issues Resolved in Period / Total Issues Open at Period Start √ó 100", unit: "%", frequency: "Weekly", owner: "Programme Manager" },
      { name: "Dependency Health Rate", formula: "Dependencies On Track / Total Programme Dependencies √ó 100", unit: "%", frequency: "Weekly", owner: "Programme Director" }
    ],
    layouts: [
      {
        name: "Programme Control Tower",
        desc: "Workstream-level RAG grid with schedule and cost performance indices, open risks and issues counts, and a critical path milestone timeline.",
        chartTypes: ["gantt", "kpi-tile", "heatmap", "bar"]
      },
      {
        name: "Cost and Schedule Performance View",
        desc: "Earned value S-curve showing planned value, earned value, and actual cost trajectories, with CPI and SPI trend charts per workstream.",
        chartTypes: ["line", "bar", "kpi-tile", "gauge"]
      }
    ],
    dataSources: [
      { name: "Project Scheduling Tool", type: "API", system: "Microsoft Project Online" },
      { name: "Programme Cost Management", type: "SQL", system: "Oracle Primavera P6" },
      { name: "Risk & Issue Register", type: "SQL", system: "ServiceNow PPM" }
    ],
    customParams: [
      { name: "Workstream View", desc: "Focus the dashboard on a specific workstream or cluster of related workstreams", options: ["All Workstreams", "Technology Workstream", "Process Workstream", "People & Change Workstream", "Data Workstream"] },
      { name: "Earned Value Baseline", desc: "Select the performance measurement baseline against which earned value is calculated", options: ["Original Approved Baseline", "Current Approved Baseline (post-PCR)", "Rolling 12-Week Forecast"] },
      { name: "Risk Exposure Display", desc: "Configure the risk exposure calculation method used in the risk heatmap", options: ["Qualitative RAG Rating", "Quantitative Risk Score (P√óI)", "Monte Carlo Simulation Output"] }
    ],
    workshopNotes: "PwC programme advisory workshops for this pattern are most valuable when focused on the integrated change control process, which is consistently the weakest element of programme governance in client organisations. Use a change scenario exercise: present three realistic change requests and walk participants through how each would be captured, costed, impact-assessed, and approved using the proposed dashboard workflow. Establish that the schedule baseline cannot be altered without formal change control approval, and design the system to make this technically enforced rather than policy-based. Invest in the dependency tracking capability from the outset‚Äîcross-workstream dependencies are the most common source of programme delay and are systematically underestimated in programme planning."
  },
  {
    id: "benefits-realisation",
    name: "Benefits Realisation Dashboard",
    category: "pmo",
    audience: ["Portfolio Director", "Executive Sponsors", "CFO"],
    purpose: "project-delivery",
    maturity: "strategic",
    cadence: "monthly",
    desc: "A monthly benefits realisation dashboard tracking the actual delivery of financial and non-financial benefits committed in business cases across the change portfolio.",
    longDesc: "The Benefits Realisation Dashboard closes the accountability gap between investment approval and value delivery by measuring whether projects and programmes are actually generating the benefits committed in their business cases. It moves benefit measurement from theoretical projected savings to empirically validated outcomes, using control group comparisons and statistical validation where possible. The dashboard creates accountability for benefit delivery post-go-live, extending programme governance beyond the traditional project closure date.",
    tags: ["benefits-realisation", "business-case", "value-delivery", "roi-tracking", "post-implementation"],
    keyQuestions: [
      "Are the financial savings and revenue benefits committed in approved business cases actually being realised after programme go-live?",
      "Which investments are underperforming on benefits delivery and what intervention is required?",
      "What is the total portfolio return on investment based on realised rather than forecast benefits?"
    ],
    kpis: [
      { name: "Benefits Realisation Rate", formula: "Actual Benefits Realised / Business Case Benefits Forecast √ó 100", unit: "%", frequency: "Monthly", owner: "Portfolio Director" },
      { name: "Portfolio NPV (Realised)", formula: "Sum of risk-adjusted NPV recalculated with actual rather than forecast benefit streams", unit: "¬£M", frequency: "Monthly", owner: "CFO" },
      { name: "Benefit Realisation Lead Time", formula: "Average months from project go-live to first confirmed benefit realisation", unit: "Months", frequency: "Monthly", owner: "Benefits Manager" },
      { name: "Disbenefits Rate", formula: "Programmes with Confirmed Negative Outcomes / Total Programmes in Post-Implementation Review √ó 100", unit: "%", frequency: "Monthly", owner: "Portfolio Director" },
      { name: "Benefits Ownership Coverage", formula: "Benefits with Named Business Owner / Total Identified Benefits √ó 100", unit: "%", frequency: "Monthly", owner: "PMO" },
      { name: "Post-Implementation Review Completion Rate", formula: "PIRs Completed Within 6 Months of Go-Live / Total Go-Lives √ó 100", unit: "%", frequency: "Monthly", owner: "PMO" }
    ],
    layouts: [
      {
        name: "Benefits Portfolio View",
        desc: "Investment portfolio table with business case forecast vs actual benefits columns, RAG status, benefit owner, and cumulative portfolio ROI tracker.",
        chartTypes: ["bar", "waterfall", "kpi-tile", "line"]
      },
      {
        name: "Benefit Realisation Timeline",
        desc: "Time-series of planned vs actual benefit delivery curves by investment category, with a forecast-to-complete trajectory and confidence interval.",
        chartTypes: ["line", "bar", "gauge", "kpi-tile"]
      }
    ],
    dataSources: [
      { name: "Benefits Management System", type: "SQL", system: "Planview" },
      { name: "Financial Management System", type: "SQL", system: "SAP S/4HANA" },
      { name: "Business Case Repository", type: "Manual", system: "SharePoint" }
    ],
    customParams: [
      { name: "Benefit Category Filter", desc: "Filter the dashboard to a specific type of benefit being tracked", options: ["All Benefits", "Financial (Cost Reduction)", "Financial (Revenue Growth)", "Efficiency (FTE Reduction)", "Non-Financial (Quality)", "Strategic (Capability)"] },
      { name: "Measurement Window", desc: "Set the post-go-live period over which benefits are being measured", options: ["3-Month Post Go-Live", "6-Month Post Go-Live", "12-Month Post Go-Live", "Full Benefit Period"] },
      { name: "Attribution Method", desc: "Select the methodology for attributing realised benefits to specific programmes", options: ["Direct Attribution (single programme)", "Proportional Attribution (multiple programmes)", "Baseline Comparison (control group)"] }
    ],
    workshopNotes: "PwC programme value workshops for this pattern often face the challenge that benefits measurement was not built into programme design from the start‚Äîbaselines were not captured, ownership was not assigned, and measurement mechanisms were not established. Use this as a design retrospective: for programmes in flight, identify the minimum viable measurement approach that can still be retrospectively applied. For future programmes, embed benefits realisation requirements in the business case template and investment approval criteria. The most powerful organisational change this dashboard can drive is linking executive bonus arrangements to realised rather than forecast benefits; facilitate a conversation with the remuneration committee about this possibility. Ensure the CFO team validates the financial benefit measurement methodology to give the output credibility in investment allocation discussions."
  },
  {
    id: "change-readiness",
    name: "Change Readiness Barometer",
    category: "pmo",
    audience: ["Change Director", "HR Business Partners", "Programme Executive Sponsor"],
    purpose: "project-delivery",
    maturity: "advanced",
    cadence: "monthly",
    desc: "A monthly change readiness barometer assessing stakeholder sentiment, engagement saturation, resistance risk, and adoption progress for major change programmes.",
    longDesc: "The Change Readiness Barometer provides change leaders with a data-driven view of the human side of change, replacing subjective change manager assessments with structured measurement of stakeholder readiness, engagement effectiveness, and adoption outcomes. It integrates survey-based readiness assessments, training completion data, and system adoption metrics to provide a leading indicator view of whether go-live readiness is on track. Resistance risk mapping by stakeholder group enables targeted intervention before change objections become programme blockers.",
    tags: ["change-management", "readiness-assessment", "adoption", "stakeholder-engagement", "ocm"],
    keyQuestions: [
      "Which stakeholder groups are showing the lowest readiness scores and highest resistance risk, requiring targeted intervention?",
      "Is overall change readiness improving at the pace required to support the planned go-live date?",
      "Are our change management activities (communications, training, engagement) reaching the intended audiences effectively?"
    ],
    kpis: [
      { name: "Change Readiness Score", formula: "Weighted average of Awareness, Desire, Knowledge, Ability, and Reinforcement (ADKAR) scores across the impacted population", unit: "Score (0-100)", frequency: "Monthly", owner: "Change Director" },
      { name: "Stakeholder Engagement Coverage", formula: "Stakeholders Engaged Through Structured Touchpoint / Total Identified Stakeholders √ó 100", unit: "%", frequency: "Monthly", owner: "Change Manager" },
      { name: "Go-Live Readiness Confidence", formula: "Stakeholders Rating Readiness 4 or 5 out of 5 / Total Survey Respondents √ó 100", unit: "%", frequency: "Monthly", owner: "Change Director" },
      { name: "Resistance Risk Index", formula: "Weighted count of stakeholders showing active or passive resistance behaviours, scaled 0-10", unit: "Index", frequency: "Monthly", owner: "Change Manager" },
      { name: "System Adoption Rate (Post Go-Live)", formula: "Active Users in First 30 Days / Intended User Population √ó 100", unit: "%", frequency: "Monthly", owner: "Change Director" },
      { name: "Change Communication Reach Rate", formula: "Stakeholders Confirming Receipt of Key Messages / Total Targeted Stakeholders √ó 100", unit: "%", frequency: "Monthly", owner: "Communications Manager" }
    ],
    layouts: [
      {
        name: "ADKAR Readiness Heatmap",
        desc: "Stakeholder group vs ADKAR dimension heatmap showing readiness scores, with trend arrows and intervention priority flags for critical gaps.",
        chartTypes: ["heatmap", "gauge", "kpi-tile", "bar"]
      },
      {
        name: "Adoption Trajectory View",
        desc: "S-curve adoption trajectory comparing planned vs actual adoption rate post go-live, with stakeholder segment breakdown and resistance risk bubble chart.",
        chartTypes: ["line", "scatter", "kpi-tile", "bar"]
      }
    ],
    dataSources: [
      { name: "Change Readiness Survey Tool", type: "API", system: "Qualtrics XM" },
      { name: "Training & Completion Data", type: "API", system: "Cornerstone OnDemand" },
      { name: "System Adoption Analytics", type: "API", system: "WalkMe / SAP Enable Now" }
    ],
    customParams: [
      { name: "Change Programme Scope", desc: "Select the specific change programme or initiative being assessed", options: ["All Active Programmes", "ERP Transformation", "Operating Model Change", "Digital Transformation", "Merger Integration"] },
      { name: "ADKAR Element Focus", desc: "Focus readiness measurement on a specific ADKAR element for deep-dive analysis", options: ["All ADKAR Elements", "Awareness", "Desire", "Knowledge", "Ability", "Reinforcement"] },
      { name: "Stakeholder Segmentation", desc: "Choose the segmentation dimension for stakeholder readiness analysis", options: ["By Business Unit", "By Role Type", "By Seniority Level", "By Geography", "By Change Impact Level"] }
    ],
    workshopNotes: "PwC change management advisory workshops for this pattern must challenge the conventional assumption that change readiness is a 'soft' and therefore unmeasurable dimension of programme delivery. Begin by presenting three to four case studies where poor change management caused measurable programme failure, quantifying the cost in delayed benefits and re-implementation. Use the ADKAR framework as the readiness measurement spine, as it is widely understood and accepted in programme environments, but supplement it with behavioural observation methods for stakeholder groups whose survey responses may not reflect actual readiness. Establish a change impact assessment process as a prerequisite to building the dashboard‚Äîwithout knowing who is impacted by the change and how significantly, readiness measurement cannot be meaningfully segmented. Agree with the programme sponsor that change readiness data will be used for targeted support, not performance management of stakeholders."
  },
  {
    id: "esg-performance",
    name: "ESG Performance Dashboard",
    category: "esg",
    audience: ["Chief Sustainability Officer", "Board ESG Committee", "CFO"],
    purpose: "sustainability",
    maturity: "advanced",
    cadence: "quarterly",
    desc: "A quarterly ESG performance dashboard tracking environmental impact, social responsibility, and governance quality metrics against regulatory disclosure requirements and voluntary commitments.",
    longDesc: "The ESG Performance Dashboard provides the Chief Sustainability Officer and board with a comprehensive view of the organisation's performance across all three ESG pillars, aligned to leading reporting frameworks including GRI, SASB, TCFD, and the emerging ISSB standards. It integrates environmental data from energy management systems, social metrics from HR and supply chain platforms, and governance indicators from board management and compliance tools into a single consolidated ESG scorecard. Scenario modelling enables assessment of ESG risk and opportunity under different climate and regulatory pathways.",
    tags: ["esg", "sustainability", "reporting-frameworks", "tcfd", "gri"],
    keyQuestions: [
      "Are we on track to meet our publicly committed ESG targets across all three pillars, and where are we at risk of missing?",
      "How does our ESG performance compare to our industry peer group and what are the most material gaps?",
      "What are the financial implications of our most material ESG risks under different regulatory and climate scenarios?"
    ],
    kpis: [
      { name: "Scope 1 & 2 GHG Emissions (tCO2e)", formula: "Sum of direct combustion emissions (Scope 1) + purchased energy emissions (Scope 2, market-based) in tonnes CO2 equivalent", unit: "tCO2e", frequency: "Quarterly", owner: "Chief Sustainability Officer" },
      { name: "Energy Intensity", formula: "Total Energy Consumption (MWh) / Revenue (¬£M)", unit: "MWh/¬£M Revenue", frequency: "Quarterly", owner: "Sustainability Manager" },
      { name: "ESG Composite Score", formula: "Weighted average of E sub-score (40%), S sub-score (30%), and G sub-score (30%), each rated 0-100", unit: "Score", frequency: "Quarterly", owner: "Chief Sustainability Officer" },
      { name: "Supply Chain Sustainability Assessment Rate", formula: "Tier 1 Suppliers Assessed Against ESG Criteria / Total Tier 1 Suppliers √ó 100", unit: "%", frequency: "Quarterly", owner: "Chief Sustainability Officer" },
      { name: "Board ESG Expertise Coverage", formula: "Board Members with Material ESG Expertise / Total Board Members √ó 100", unit: "%", frequency: "Quarterly", owner: "Company Secretary" },
      { name: "ESG-Linked Remuneration Coverage", formula: "Senior Executives with ESG KPIs in Incentive Plan / Total Senior Executives √ó 100", unit: "%", frequency: "Quarterly", owner: "Chief People Officer" }
    ],
    layouts: [
      {
        name: "ESG Scorecard View",
        desc: "Three-pillar scorecard layout with E, S, and G section headers, KPI tiles with year-on-year trend, target status, and ISSB/GRI disclosure alignment indicators.",
        chartTypes: ["kpi-tile", "gauge", "bar", "sparkline"]
      },
      {
        name: "ESG Risk and Opportunity View",
        desc: "TCFD-aligned climate scenario matrix with financial impact ranges, transition risk timeline, and peer benchmarking radar chart.",
        chartTypes: ["heatmap", "bar", "line", "scatter"]
      }
    ],
    dataSources: [
      { name: "ESG Reporting & Assurance Platform", type: "API", system: "Workiva" },
      { name: "Energy Management System", type: "API", system: "Schneider Electric EcoStruxure" },
      { name: "Supply Chain ESG Platform", type: "API", system: "EcoVadis" }
    ],
    customParams: [
      { name: "Reporting Framework Alignment", desc: "Select the primary ESG reporting framework to which metrics are aligned", options: ["GRI Standards", "SASB Standards", "TCFD", "ISSB (IFRS S1 & S2)", "UN SDGs", "Custom Composite"] },
      { name: "Emissions Scope View", desc: "Configure which GHG emissions scopes are included in carbon metrics", options: ["Scope 1 & 2 Only", "Scope 1, 2 & 3 (Selected Categories)", "Full Scope 1-3", "Market-Based vs Location-Based Comparison"] },
      { name: "Peer Benchmark Group", desc: "Set the comparator group for ESG peer benchmarking analysis", options: ["FTSE 100 Sector Peers", "Global Industry Peers", "Best-in-Class ESG Leaders", "Custom Peer Group"] }
    ],
    workshopNotes: "PwC sustainability advisory workshops for this pattern must navigate the rapidly evolving regulatory landscape‚ÄîISSB standards, CSRD, and SEC climate rules are creating mandatory disclosure requirements that the dashboard must be designed to satisfy, not merely inform. Begin with a materiality assessment review to confirm which ESG topics are most significant to the organisation's stakeholders and financial performance, as this determines which metrics belong on the dashboard. Engage the external auditor early, as ESG data is increasingly subject to limited and reasonable assurance requirements that impose data trail and control obligations on the measurement process. Avoid building a 'greenwash' dashboard that presents only positive metrics; credibility with sophisticated investors and regulators requires transparent disclosure of underperformance alongside achievements."
  },
  {
    id: "net-zero",
    name: "Net Zero Progress Tracker",
    category: "esg",
    audience: ["Chief Sustainability Officer", "Operations Director", "Board ESG Committee"],
    purpose: "sustainability",
    maturity: "strategic",
    cadence: "monthly",
    desc: "A monthly net zero progress tracker monitoring the organisation's decarbonisation trajectory against its science-based emissions reduction targets across all scopes.",
    longDesc: "The Net Zero Progress Tracker provides a granular, actionable view of the organisation's progress toward its net zero commitment, decomposing the emissions reduction pathway by business unit, emission source, and decarbonisation lever. It integrates activity-based emissions data with a carbon accounting engine to produce monthly Scope 1, 2, and 3 measurements, enabling the identification of which initiatives are generating the most significant abatement impact. The tracker also monitors the organisation's carbon credit and offset portfolio quality alongside the primary reduction activities.",
    tags: ["net-zero", "decarbonisation", "scope-3", "carbon-accounting", "climate-targets"],
    keyQuestions: [
      "Is our Scope 1, 2, and 3 emissions trajectory consistent with our SBTi-validated net zero pathway, and where are we deviating?",
      "Which decarbonisation initiatives are delivering the most significant and cost-effective emissions reductions?",
      "What is our remaining carbon budget and do our current initiatives close the gap to our 2030 and 2050 targets?"
    ],
    kpis: [
      { name: "Scope 1 Emissions Intensity", formula: "Scope 1 GHG Emissions (tCO2e) / Production Output or Revenue (¬£M)", unit: "tCO2e/¬£M", frequency: "Monthly", owner: "Sustainability Manager" },
      { name: "Scope 2 Emissions (Market-Based)", formula: "Purchased electricity √ó Grid emission factor (market-based) + Renewable Energy Certificates offsets", unit: "tCO2e", frequency: "Monthly", owner: "Energy Manager" },
      { name: "Scope 3 Emissions Coverage", formula: "Scope 3 Categories with Quantified Measurement / Total 15 GHG Protocol Categories √ó 100", unit: "%", frequency: "Monthly", owner: "Chief Sustainability Officer" },
      { name: "Emissions Reduction Rate vs Baseline", formula: "(Baseline Year Emissions - Current Period Emissions) / Baseline Year Emissions √ó 100", unit: "%", frequency: "Monthly", owner: "Chief Sustainability Officer" },
      { name: "Renewable Energy Percentage", formula: "Renewable Energy Consumed (MWh) / Total Energy Consumed (MWh) √ó 100", unit: "%", frequency: "Monthly", owner: "Energy Manager" },
      { name: "Carbon Initiative Abatement Delivered", formula: "Sum of confirmed tCO2e abatement from completed decarbonisation initiatives in period", unit: "tCO2e", frequency: "Monthly", owner: "Sustainability Manager" }
    ],
    layouts: [
      {
        name: "Emissions Pathway View",
        desc: "Actual emissions trajectory plotted against the SBTi-validated reduction pathway with scenario bands, monthly actuals, and a carbon budget remaining counter.",
        chartTypes: ["line", "bar", "kpi-tile", "gauge"]
      },
      {
        name: "Abatement Opportunity View",
        desc: "Marginal abatement cost curve showing decarbonisation initiatives ranked by cost-effectiveness, with implementation status and committed abatement volume.",
        chartTypes: ["bar", "waterfall", "kpi-tile", "scatter"]
      }
    ],
    dataSources: [
      { name: "Carbon Accounting Platform", type: "API", system: "Watershed / Persefoni" },
      { name: "Energy Management System", type: "API", system: "Schneider Electric EcoStruxure" },
      { name: "Supply Chain Emissions Data", type: "API", system: "EcoVadis / CDP Supply Chain" }
    ],
    customParams: [
      { name: "Emissions Scope Display", desc: "Configure which emission scopes are included in the primary trajectory view", options: ["Scope 1 & 2 Combined", "Scope 1, 2 & 3 Combined", "Scope 3 Breakdown by Category", "All Scopes Separate"] },
      { name: "Reduction Pathway Scenario", desc: "Select the climate pathway scenario against which progress is benchmarked", options: ["1.5¬∞C Pathway (SBTi)", "Well Below 2¬∞C Pathway", "2¬∞C Pathway", "Custom Corporate Commitment"] },
      { name: "Abatement Initiative View", desc: "Filter the abatement opportunity view to a specific decarbonisation lever", options: ["All Levers", "Energy Efficiency", "Renewable Energy", "Process Change", "Supply Chain Engagement", "Carbon Removal"] }
    ],
    workshopNotes: "PwC net zero advisory workshops for this pattern require the most technically complex data discussion of any pattern in this library, as carbon accounting methodologies for Scope 3 in particular involve significant estimation, proxy data, and evolving GHG Protocol guidance. Begin with a Scope 3 screening assessment to identify which of the 15 categories are material for the organisation, as attempting to measure all categories simultaneously is typically counterproductive. Establish the emissions baseline year and methodology during the workshop rather than assuming it is already defined‚Äîmany organisations discover their baseline calculation contains methodological errors that undermine the credibility of their reduction claims. Introduce a marginal abatement cost curve exercise to help leadership prioritise decarbonisation investments based on cost-effectiveness, connecting the sustainability strategy to the capital allocation process. Ensure the organisation has a clear policy on carbon credits and offsets that is agreed by the board before building this into the dashboard."
  }
];

</script>

<script>
// Compatibility shim: map desc/longDesc -> description
if (typeof PATTERNS !== 'undefined') {
  PATTERNS.forEach(function(p) {
    if (!p.description) p.description = p.longDesc || p.desc || '';
  });
}
</script>

<script>
// ============================================================
// CATEGORIES
// ============================================================
const CATEGORIES = {
  executive:  { name: 'Executive',  color: '#7c3aed', icon: 'üéØ' },
  finance:    { name: 'Finance',    color: '#0ea5e9', icon: 'üí∞' },
  risk:       { name: 'Risk',       color: '#ef4444', icon: '‚ö†Ô∏è' },
  cyber:      { name: 'Cyber',      color: '#f97316', icon: 'üõ°Ô∏è' },
  operations: { name: 'Operations', color: '#10b981', icon: '‚öôÔ∏è' },
  customer:   { name: 'Customer',   color: '#ec4899', icon: 'üíé' },
  workforce:  { name: 'Workforce',  color: '#8b5cf6', icon: 'üë•' },
  pmo:        { name: 'PMO',        color: '#f59e0b', icon: 'üìã' },
  esg:        { name: 'ESG',        color: '#06b6d4', icon: 'üåø' },
};

// ============================================================
// STATE
// ============================================================
const state = {
  view: 'gallery',
  filters: { category: 'all', audience: null, maturity: null, cadence: null, search: '' },
  compareList: [],
  detailId: null,
  wizard: { step: 0, answers: {}, results: [] },
  viewMode: 'grid',
  detailTab: 0,
};

// ============================================================
// ROUTER
// ============================================================
function router() {
  const hash = window.location.hash || '#gallery';
  if (hash.startsWith('#detail/')) {
    const id = hash.slice('#detail/'.length);
    state.view = 'detail';
    state.detailId = id;
    renderDetail(id);
  } else if (hash === '#finder') {
    state.view = 'finder';
    renderFinder();
  } else if (hash === '#compare') {
    state.view = 'compare';
    renderCompare();
  } else if (hash === '#exports') {
    state.view = 'exports';
    renderExports();
  } else if (hash === '#about') {
    state.view = 'about';
    renderAbout();
  } else {
    state.view = 'gallery';
    renderGallery();
  }
  // Show/hide sections
  document.querySelectorAll('[data-view]').forEach(el => {
    el.classList.toggle('active', el.dataset.view === state.view);
  });
}

function navigate(view, params = {}) {
  if (view === 'detail' && params.id) {
    window.location.hash = '#detail/' + params.id;
  } else {
    window.location.hash = '#' + view;
  }
}

// ============================================================
// SVG PREVIEWS
// ============================================================
function getPreviewSVG(pattern) {
  const cat = pattern.category || 'executive';
  const color = (CATEGORIES[cat] && CATEGORIES[cat].color) || '#7c3aed';

  if (cat === 'executive') {
    return `<svg width="100%" height="140" viewBox="0 0 280 140" xmlns="http://www.w3.org/2000/svg">
      <rect width="280" height="140" fill="#f8f7ff"/>
      <rect x="10" y="10" width="58" height="40" rx="4" fill="${color}" opacity="0.15"/>
      <rect x="10" y="10" width="58" height="6" rx="2" fill="${color}"/>
      <text x="39" y="40" text-anchor="middle" font-size="11" fill="${color}" font-weight="bold">94%</text>
      <rect x="76" y="10" width="58" height="40" rx="4" fill="${color}" opacity="0.15"/>
      <rect x="76" y="10" width="58" height="6" rx="2" fill="${color}"/>
      <text x="105" y="40" text-anchor="middle" font-size="11" fill="${color}" font-weight="bold">$2.1M</text>
      <rect x="142" y="10" width="58" height="40" rx="4" fill="${color}" opacity="0.15"/>
      <rect x="142" y="10" width="58" height="6" rx="2" fill="${color}"/>
      <text x="171" y="40" text-anchor="middle" font-size="11" fill="${color}" font-weight="bold">‚Üë12%</text>
      <rect x="208" y="10" width="58" height="40" rx="4" fill="${color}" opacity="0.15"/>
      <rect x="208" y="10" width="58" height="6" rx="2" fill="${color}"/>
      <text x="237" y="40" text-anchor="middle" font-size="11" fill="${color}" font-weight="bold">4.8‚òÖ</text>
      <polyline points="10,120 50,100 90,110 130,85 170,90 210,70 250,75" fill="none" stroke="${color}" stroke-width="2"/>
      <polyline points="10,125 50,115 90,120 130,105 170,108 210,95 250,98" fill="none" stroke="${color}" stroke-width="1.5" opacity="0.5"/>
    </svg>`;
  }

  if (cat === 'finance') {
    return `<svg width="100%" height="140" viewBox="0 0 280 140" xmlns="http://www.w3.org/2000/svg">
      <rect width="280" height="140" fill="#f0f9ff"/>
      <rect x="20" y="90" width="24" height="40" fill="${color}" opacity="0.8"/>
      <rect x="52" y="70" width="24" height="60" fill="${color}" opacity="0.8"/>
      <rect x="84" y="80" width="24" height="50" fill="${color}" opacity="0.8"/>
      <rect x="116" y="55" width="24" height="75" fill="${color}" opacity="0.8"/>
      <rect x="148" y="65" width="24" height="65" fill="${color}" opacity="0.8"/>
      <rect x="180" y="45" width="24" height="85" fill="${color}" opacity="0.8"/>
      <rect x="212" y="35" width="24" height="95" fill="${color}" opacity="0.8"/>
      <polyline points="20,85 52,65 84,75 116,50 148,60 180,40 212,30 244,25" fill="none" stroke="#f59e0b" stroke-width="2"/>
      <line x1="10" y1="130" x2="270" y2="130" stroke="#ccc" stroke-width="1"/>
    </svg>`;
  }

  if (cat === 'risk') {
    return `<svg width="100%" height="140" viewBox="0 0 280 140" xmlns="http://www.w3.org/2000/svg">
      <rect width="280" height="140" fill="#fff5f5"/>
      <rect x="20" y="20" width="55" height="45" rx="2" fill="#10b981" opacity="0.7"/>
      <rect x="80" y="20" width="55" height="45" rx="2" fill="#f59e0b" opacity="0.7"/>
      <rect x="140" y="20" width="55" height="45" rx="2" fill="${color}" opacity="0.7"/>
      <rect x="20" y="70" width="55" height="45" rx="2" fill="#f59e0b" opacity="0.7"/>
      <rect x="80" y="70" width="55" height="45" rx="2" fill="${color}" opacity="0.7"/>
      <rect x="140" y="70" width="55" height="45" rx="2" fill="${color}" opacity="0.9"/>
      <text x="47" y="47" text-anchor="middle" font-size="9" fill="white" font-weight="bold">LOW</text>
      <text x="107" y="47" text-anchor="middle" font-size="9" fill="white" font-weight="bold">MED</text>
      <text x="167" y="47" text-anchor="middle" font-size="9" fill="white" font-weight="bold">HIGH</text>
      <text x="47" y="97" text-anchor="middle" font-size="9" fill="white" font-weight="bold">MED</text>
      <text x="107" y="97" text-anchor="middle" font-size="9" fill="white" font-weight="bold">HIGH</text>
      <text x="167" y="97" text-anchor="middle" font-size="9" fill="white" font-weight="bold">CRIT</text>
    </svg>`;
  }

  if (cat === 'cyber') {
    return `<svg width="100%" height="140" viewBox="0 0 280 140" xmlns="http://www.w3.org/2000/svg">
      <rect width="280" height="140" fill="#fff7ed"/>
      <circle cx="70" cy="75" r="45" fill="none" stroke="#e5e7eb" stroke-width="8"/>
      <circle cx="70" cy="75" r="45" fill="none" stroke="${color}" stroke-width="8"
        stroke-dasharray="212" stroke-dashoffset="53" transform="rotate(-90 70 75)"/>
      <text x="70" y="79" text-anchor="middle" font-size="13" fill="${color}" font-weight="bold">75%</text>
      <circle cx="180" cy="75" r="35" fill="none" stroke="#e5e7eb" stroke-width="7"/>
      <circle cx="180" cy="75" r="35" fill="none" stroke="#10b981" stroke-width="7"
        stroke-dasharray="220" stroke-dashoffset="66" transform="rotate(-90 180 75)"/>
      <text x="180" y="79" text-anchor="middle" font-size="11" fill="#10b981" font-weight="bold">70%</text>
      <circle cx="245" cy="75" r="22" fill="none" stroke="#e5e7eb" stroke-width="5"/>
      <circle cx="245" cy="75" r="22" fill="none" stroke="#7c3aed" stroke-width="5"
        stroke-dasharray="138" stroke-dashoffset="41" transform="rotate(-90 245 75)"/>
      <text x="245" y="79" text-anchor="middle" font-size="9" fill="#7c3aed" font-weight="bold">70%</text>
    </svg>`;
  }

  if (cat === 'operations') {
    return `<svg width="100%" height="140" viewBox="0 0 280 140" xmlns="http://www.w3.org/2000/svg">
      <rect width="280" height="140" fill="#f0fdf4"/>
      <rect x="10" y="55" width="50" height="30" rx="4" fill="${color}" opacity="0.8"/>
      <text x="35" y="74" text-anchor="middle" font-size="9" fill="white">Intake</text>
      <line x1="60" y1="70" x2="80" y2="70" stroke="${color}" stroke-width="2" marker-end="url(#arr)"/>
      <rect x="80" y="55" width="50" height="30" rx="4" fill="${color}" opacity="0.8"/>
      <text x="105" y="74" text-anchor="middle" font-size="9" fill="white">Process</text>
      <line x1="130" y1="70" x2="150" y2="70" stroke="${color}" stroke-width="2" marker-end="url(#arr)"/>
      <rect x="150" y="55" width="50" height="30" rx="4" fill="${color}" opacity="0.8"/>
      <text x="175" y="74" text-anchor="middle" font-size="9" fill="white">Review</text>
      <line x1="200" y1="70" x2="220" y2="70" stroke="${color}" stroke-width="2" marker-end="url(#arr)"/>
      <rect x="220" y="55" width="50" height="30" rx="4" fill="${color}" opacity="0.8"/>
      <text x="245" y="74" text-anchor="middle" font-size="9" fill="white">Output</text>
      <text x="35" y="110" text-anchor="middle" font-size="8" fill="#666">98.2%</text>
      <text x="105" y="110" text-anchor="middle" font-size="8" fill="#666">4.2h</text>
      <text x="175" y="110" text-anchor="middle" font-size="8" fill="#666">99.1%</text>
      <text x="245" y="110" text-anchor="middle" font-size="8" fill="#666">SLA:OK</text>
    </svg>`;
  }

  if (cat === 'customer') {
    return `<svg width="100%" height="140" viewBox="0 0 280 140" xmlns="http://www.w3.org/2000/svg">
      <rect width="280" height="140" fill="#fdf2f8"/>
      <circle cx="75" cy="70" r="50" fill="none" stroke="#e5e7eb" stroke-width="14"/>
      <circle cx="75" cy="70" r="50" fill="none" stroke="${color}" stroke-width="14"
        stroke-dasharray="188" stroke-dashoffset="56" transform="rotate(-90 75 70)"/>
      <circle cx="75" cy="70" r="50" fill="none" stroke="#f59e0b" stroke-width="14"
        stroke-dasharray="188" stroke-dashoffset="141" transform="rotate(30 75 70)"/>
      <text x="75" y="74" text-anchor="middle" font-size="12" fill="${color}" font-weight="bold">NPS</text>
      <rect x="160" y="20" width="110" height="100" rx="4" fill="white" stroke="#e5e7eb"/>
      <text x="215" y="38" text-anchor="middle" font-size="9" fill="#666">NPS SCORE</text>
      <text x="215" y="58" text-anchor="middle" font-size="20" fill="${color}" font-weight="bold">+67</text>
      <text x="215" y="75" text-anchor="middle" font-size="8" fill="#10b981">‚ñ≤ 5 pts vs last</text>
      <line x1="170" y1="90" x2="260" y2="90" stroke="#e5e7eb"/>
      <text x="215" y="105" text-anchor="middle" font-size="8" fill="#666">CSAT: 4.6/5</text>
    </svg>`;
  }

  if (cat === 'workforce') {
    return `<svg width="100%" height="140" viewBox="0 0 280 140" xmlns="http://www.w3.org/2000/svg">
      <rect width="280" height="140" fill="#faf5ff"/>
      <rect x="20" y="40" width="30" height="80" rx="2" fill="${color}" opacity="0.3"/>
      <rect x="20" y="80" width="30" height="40" rx="2" fill="${color}" opacity="0.9"/>
      <rect x="58" y="30" width="30" height="90" rx="2" fill="${color}" opacity="0.3"/>
      <rect x="58" y="60" width="30" height="60" rx="2" fill="${color}" opacity="0.9"/>
      <rect x="96" y="50" width="30" height="70" rx="2" fill="${color}" opacity="0.3"/>
      <rect x="96" y="75" width="30" height="45" rx="2" fill="${color}" opacity="0.9"/>
      <rect x="134" y="25" width="30" height="95" rx="2" fill="${color}" opacity="0.3"/>
      <rect x="134" y="55" width="30" height="65" rx="2" fill="${color}" opacity="0.9"/>
      <rect x="172" y="35" width="30" height="85" rx="2" fill="${color}" opacity="0.3"/>
      <rect x="172" y="65" width="30" height="55" rx="2" fill="${color}" opacity="0.9"/>
      <rect x="210" y="45" width="30" height="75" rx="2" fill="${color}" opacity="0.3"/>
      <rect x="210" y="70" width="30" height="50" rx="2" fill="${color}" opacity="0.9"/>
    </svg>`;
  }

  if (cat === 'pmo') {
    return `<svg width="100%" height="140" viewBox="0 0 280 140" xmlns="http://www.w3.org/2000/svg">
      <rect width="280" height="140" fill="#fffbeb"/>
      <text x="10" y="28" font-size="8" fill="#666">Design</text>
      <rect x="60" y="18" width="80" height="14" rx="2" fill="${color}" opacity="0.8"/>
      <text x="10" y="50" font-size="8" fill="#666">Dev</text>
      <rect x="80" y="40" width="110" height="14" rx="2" fill="${color}" opacity="0.8"/>
      <text x="10" y="72" font-size="8" fill="#666">QA</text>
      <rect x="150" y="62" width="70" height="14" rx="2" fill="${color}" opacity="0.8"/>
      <text x="10" y="94" font-size="8" fill="#666">UAT</text>
      <rect x="180" y="84" width="60" height="14" rx="2" fill="${color}" opacity="0.8"/>
      <text x="10" y="116" font-size="8" fill="#666">Deploy</text>
      <rect x="210" y="106" width="50" height="14" rx="2" fill="#10b981" opacity="0.8"/>
      <line x1="60" y1="130" x2="260" y2="130" stroke="#e5e7eb"/>
    </svg>`;
  }

  if (cat === 'esg') {
    return `<svg width="100%" height="140" viewBox="0 0 280 140" xmlns="http://www.w3.org/2000/svg">
      <rect width="280" height="140" fill="#f0fdfa"/>
      <text x="65" y="18" text-anchor="middle" font-size="9" fill="#10b981" font-weight="bold">E</text>
      <rect x="55" y="20" width="20" height="100" rx="3" fill="#e5e7eb"/>
      <rect x="55" y="50" width="20" height="70" rx="3" fill="#10b981" opacity="0.8"/>
      <text x="65" y="130" text-anchor="middle" font-size="7" fill="#666">72%</text>
      <text x="140" y="18" text-anchor="middle" font-size="9" fill="#0ea5e9" font-weight="bold">S</text>
      <rect x="130" y="20" width="20" height="100" rx="3" fill="#e5e7eb"/>
      <rect x="130" y="35" width="20" height="85" rx="3" fill="#0ea5e9" opacity="0.8"/>
      <text x="140" y="130" text-anchor="middle" font-size="7" fill="#666">85%</text>
      <text x="215" y="18" text-anchor="middle" font-size="9" fill="#7c3aed" font-weight="bold">G</text>
      <rect x="205" y="20" width="20" height="100" rx="3" fill="#e5e7eb"/>
      <rect x="205" y="60" width="20" height="60" rx="3" fill="#7c3aed" opacity="0.8"/>
      <text x="215" y="130" text-anchor="middle" font-size="7" fill="#666">60%</text>
    </svg>`;
  }

  // default fallback
  return `<svg width="100%" height="140" viewBox="0 0 280 140" xmlns="http://www.w3.org/2000/svg">
    <rect width="280" height="140" fill="#f9fafb"/>
    <rect x="20" y="30" width="60" height="80" rx="4" fill="${color}" opacity="0.2"/>
    <rect x="100" y="50" width="60" height="60" rx="4" fill="${color}" opacity="0.4"/>
    <rect x="180" y="20" width="60" height="90" rx="4" fill="${color}" opacity="0.6"/>
  </svg>`;
}
// ============================================================
// GALLERY
// ============================================================
function renderGallery() {
  const container = document.getElementById('view-gallery');
  if (!container) return;
  const filtered = applyFilters();
  const isGrid = state.viewMode === 'grid';

  container.innerHTML = `
    <div class="filter-rail">
      <div class="filter-group">
        <label>Category</label>
        <select id="filter-category">
          <option value="all">All Categories</option>
          ${Object.entries(CATEGORIES).map(([k, v]) =>
            `<option value="${k}" ${state.filters.category === k ? 'selected' : ''}>${v.icon} ${v.name}</option>`
          ).join('')}
        </select>
      </div>
      <div class="filter-group">
        <label>Audience</label>
        <select id="filter-audience">
          <option value="">Any</option>
          <option value="board" ${state.filters.audience === 'board' ? 'selected' : ''}>Board</option>
          <option value="c-suite" ${state.filters.audience === 'c-suite' ? 'selected' : ''}>C-Suite</option>
          <option value="vp" ${state.filters.audience === 'vp' ? 'selected' : ''}>VP/Director</option>
          <option value="manager" ${state.filters.audience === 'manager' ? 'selected' : ''}>Manager</option>
          <option value="analyst" ${state.filters.audience === 'analyst' ? 'selected' : ''}>Analyst</option>
        </select>
      </div>
      <div class="filter-group">
        <label>Maturity</label>
        <select id="filter-maturity">
          <option value="">Any</option>
          <option value="starter" ${state.filters.maturity === 'starter' ? 'selected' : ''}>Starter</option>
          <option value="intermediate" ${state.filters.maturity === 'intermediate' ? 'selected' : ''}>Intermediate</option>
          <option value="advanced" ${state.filters.maturity === 'advanced' ? 'selected' : ''}>Advanced</option>
        </select>
      </div>
      <div class="filter-group">
        <label>Cadence</label>
        <select id="filter-cadence">
          <option value="">Any</option>
          <option value="real-time" ${state.filters.cadence === 'real-time' ? 'selected' : ''}>Real-time</option>
          <option value="daily" ${state.filters.cadence === 'daily' ? 'selected' : ''}>Daily</option>
          <option value="weekly" ${state.filters.cadence === 'weekly' ? 'selected' : ''}>Weekly</option>
          <option value="monthly" ${state.filters.cadence === 'monthly' ? 'selected' : ''}>Monthly</option>
          <option value="quarterly" ${state.filters.cadence === 'quarterly' ? 'selected' : ''}>Quarterly</option>
        </select>
      </div>
      <div class="filter-group search-group">
        <label>Search</label>
        <input type="text" id="filter-search" placeholder="Search patterns..." value="${state.filters.search}"/>
      </div>
      <div class="filter-group view-toggle">
        <button class="btn-icon ${isGrid ? 'active' : ''}" data-viewmode="grid" title="Grid view">‚äû</button>
        <button class="btn-icon ${!isGrid ? 'active' : ''}" data-viewmode="list" title="List view">‚ò∞</button>
      </div>
    </div>
    <div class="results-count">${filtered.length} pattern${filtered.length !== 1 ? 's' : ''} found</div>
    <div class="card-grid ${isGrid ? 'grid-mode' : 'list-mode'}">
      ${filtered.length ? filtered.map(p => renderCard(p)).join('') : '<div class="no-results">No patterns match your filters. <button onclick="clearFilters()">Clear filters</button></div>'}
    </div>
  `;
}

function applyFilters() {
  return (typeof PATTERNS !== 'undefined' ? PATTERNS : []).filter(p => {
    if (state.filters.category !== 'all' && p.category !== state.filters.category) return false;
    if (state.filters.audience && p.audience && !p.audience.includes(state.filters.audience)) return false;
    if (state.filters.maturity && p.maturity !== state.filters.maturity) return false;
    if (state.filters.cadence && p.cadence !== state.filters.cadence) return false;
    if (state.filters.search) {
      const s = state.filters.search.toLowerCase();
      const haystack = [p.name, p.description, p.category, ...(p.tags || [])].join(' ').toLowerCase();
      if (!haystack.includes(s)) return false;
    }
    return true;
  });
}

function clearFilters() {
  state.filters = { category: 'all', audience: null, maturity: null, cadence: null, search: '' };
  renderGallery();
}

function renderCard(pattern) {
  const cat = CATEGORIES[pattern.category] || { name: pattern.category, color: '#666', icon: 'üìä' };
  const inCompare = state.compareList.includes(pattern.id);
  const tags = (pattern.tags || []).slice(0, 3).map(t => `<span class="tag">${t}</span>`).join('');
  return `
    <div class="pattern-card" data-id="${pattern.id}">
      <div class="card-preview" style="border-top: 3px solid ${cat.color}">
        ${getPreviewSVG(pattern)}
      </div>
      <div class="card-body">
        <div class="card-meta">
          <span class="category-badge" style="background:${cat.color}22;color:${cat.color}">${cat.icon} ${cat.name}</span>
          <span class="maturity-badge maturity-${pattern.maturity}">${pattern.maturity || ''}</span>
        </div>
        <h3 class="card-title">${pattern.name}</h3>
        <p class="card-desc">${(pattern.description || '').slice(0, 100)}${pattern.description && pattern.description.length > 100 ? '‚Ä¶' : ''}</p>
        <div class="card-tags">${tags}</div>
      </div>
      <div class="card-footer">
        <button class="btn btn-compare ${inCompare ? 'active' : ''}" data-action="compare" data-id="${pattern.id}">
          ${inCompare ? '‚úì Comparing' : '+ Compare'}
        </button>
        <button class="btn btn-primary" data-action="view" data-id="${pattern.id}">View ‚Üí</button>
      </div>
    </div>
  `;
}

// ============================================================
// FINDER WIZARD
// ============================================================
const WIZARD_STEPS = [
  {
    id: 'objective',
    question: 'What is the primary objective of your dashboard?',
    options: [
      { value: 'performance', label: 'Track performance vs goals' },
      { value: 'risk', label: 'Monitor risks and exceptions' },
      { value: 'operations', label: 'Manage operations in real time' },
      { value: 'insight', label: 'Gain strategic insight' },
      { value: 'reporting', label: 'Produce stakeholder reports' },
      { value: 'compliance', label: 'Ensure compliance and governance' },
    ]
  },
  {
    id: 'audience',
    question: 'Who is the primary audience?',
    options: [
      { value: 'board', label: 'Board of Directors' },
      { value: 'c-suite', label: 'C-Suite / Executives' },
      { value: 'vp', label: 'VP / Director' },
      { value: 'manager', label: 'Manager / Team Lead' },
      { value: 'analyst', label: 'Analyst / Individual contributor' },
    ]
  },
  {
    id: 'maturity',
    question: 'What is your analytics maturity level?',
    options: [
      { value: 'starter', label: 'Starter ‚Äî just beginning with dashboards' },
      { value: 'intermediate', label: 'Intermediate ‚Äî some dashboards in production' },
      { value: 'advanced', label: 'Advanced ‚Äî mature data platform and culture' },
    ]
  },
  {
    id: 'cadence',
    question: 'How often will this dashboard be reviewed?',
    options: [
      { value: 'real-time', label: 'Real-time / continuous monitoring' },
      { value: 'daily', label: 'Daily' },
      { value: 'weekly', label: 'Weekly' },
      { value: 'monthly', label: 'Monthly' },
      { value: 'quarterly', label: 'Quarterly' },
    ]
  },
  {
    id: 'category',
    question: 'Which domain best fits your use case?',
    options: Object.entries(CATEGORIES).map(([k, v]) => ({ value: k, label: `${v.icon} ${v.name}` }))
  },
  {
    id: 'interactivity',
    question: 'How much interactivity do you need?',
    options: [
      { value: 'static', label: 'Static ‚Äî printed or PDF reports' },
      { value: 'basic', label: 'Basic ‚Äî simple filters' },
      { value: 'interactive', label: 'Interactive ‚Äî drill-downs and cross-filters' },
      { value: 'embedded', label: 'Embedded ‚Äî in an application or portal' },
    ]
  },
  {
    id: 'data_sources',
    question: 'How many data sources will feed this dashboard?',
    options: [
      { value: 'one', label: '1 ‚Äî single source of truth' },
      { value: 'few', label: '2‚Äì4 sources' },
      { value: 'many', label: '5+ sources' },
    ]
  },
  {
    id: 'timeline',
    question: 'What is your delivery timeline?',
    options: [
      { value: 'immediate', label: 'Immediate ‚Äî within a week' },
      { value: 'short', label: 'Short ‚Äî 1‚Äì4 weeks' },
      { value: 'medium', label: 'Medium ‚Äî 1‚Äì3 months' },
      { value: 'long', label: 'Long ‚Äî 3+ months' },
    ]
  },
];

function renderFinder() {
  const container = document.getElementById('view-finder');
  if (!container) return;
  const { step, answers, results } = state.wizard;

  if (results && results.length && step >= WIZARD_STEPS.length) {
    renderFinderResults();
    return;
  }

  if (step >= WIZARD_STEPS.length) {
    state.wizard.results = scoreAllPatterns(answers);
    renderFinderResults();
    return;
  }

  const ws = WIZARD_STEPS[step];
  const progress = Math.round((step / WIZARD_STEPS.length) * 100);

  container.innerHTML = `
    <div class="wizard-container">
      <div class="wizard-header">
        <h2>Pattern Finder</h2>
        <div class="wizard-progress-bar"><div class="wizard-progress-fill" style="width:${progress}%"></div></div>
        <div class="wizard-step-count">Step ${step + 1} of ${WIZARD_STEPS.length}</div>
      </div>
      <div class="wizard-question">
        <h3>${ws.question}</h3>
        <div class="wizard-options">
          ${ws.options.map(opt => `
            <button class="wizard-option ${answers[ws.id] === opt.value ? 'selected' : ''}"
              data-step="${step}" data-value="${opt.value}">${opt.label}</button>
          `).join('')}
        </div>
      </div>
      <div class="wizard-nav">
        ${step > 0 ? `<button class="btn" data-action="wizard-back">‚Üê Back</button>` : '<span></span>'}
        <button class="btn btn-primary" data-action="wizard-next" ${!answers[ws.id] ? 'disabled' : ''}>
          ${step === WIZARD_STEPS.length - 1 ? 'Find Patterns ‚Üí' : 'Next ‚Üí'}
        </button>
      </div>
    </div>
  `;
}

function scorePattern(pattern, answers) {
  let score = 0;
  // Category exact match: +30
  if (answers.category && pattern.category === answers.category) score += 30;
  // Maturity exact match: +25
  if (answers.maturity && pattern.maturity === answers.maturity) score += 25;
  // Cadence exact match: +20
  if (answers.cadence && pattern.cadence === answers.cadence) score += 20;
  // Audience match: +15
  if (answers.audience && pattern.audience && pattern.audience.includes(answers.audience)) score += 15;
  // Objective match via tags/keywords: +20
  if (answers.objective) {
    const haystack = [pattern.name, pattern.description, ...(pattern.tags || [])].join(' ').toLowerCase();
    if (haystack.includes(answers.objective)) score += 20;
  }
  // Interactivity: +10
  if (answers.interactivity && pattern.interactivity === answers.interactivity) score += 10;
  // Timeline: +10
  if (answers.timeline) {
    const complexMap = { immediate: 'starter', short: 'starter', medium: 'intermediate', long: 'advanced' };
    if (pattern.maturity === complexMap[answers.timeline]) score += 10;
  }
  return Math.min(100, score);
}

function scoreAllPatterns(answers) {
  const patterns = typeof PATTERNS !== 'undefined' ? PATTERNS : [];
  return patterns
    .map(p => ({ pattern: p, score: scorePattern(p, answers) }))
    .sort((a, b) => b.score - a.score)
    .slice(0, 5);
}

function renderFinderResults() {
  const container = document.getElementById('view-finder');
  if (!container) return;
  const results = state.wizard.results;

  container.innerHTML = `
    <div class="wizard-container">
      <div class="wizard-header">
        <h2>Recommended Patterns</h2>
        <p>Based on your answers, here are the best matches:</p>
      </div>
      <div class="finder-results">
        ${results.length ? results.map((r, i) => `
          <div class="finder-result-card">
            <div class="result-rank">#${i + 1}</div>
            <div class="result-preview">${getPreviewSVG(r.pattern)}</div>
            <div class="result-info">
              <h3>${r.pattern.name}</h3>
              <p>${(r.pattern.description || '').slice(0, 120)}‚Ä¶</p>
              <div class="result-score">
                <div class="score-bar"><div class="score-fill" style="width:${r.score}%"></div></div>
                <span>${r.score}% match</span>
              </div>
            </div>
            <div class="result-actions">
              <button class="btn btn-primary" data-action="view" data-id="${r.pattern.id}">View ‚Üí</button>
              <button class="btn" data-action="compare" data-id="${r.pattern.id}">+ Compare</button>
            </div>
          </div>
        `).join('') : '<p>No patterns found. Try adjusting your answers.</p>'}
      </div>
      <div class="wizard-nav">
        <button class="btn" data-action="wizard-restart">Start Over</button>
      </div>
    </div>
  `;
}
// ============================================================
// COMPARE
// ============================================================
function renderCompare() {
  const container = document.getElementById('view-compare');
  if (!container) return;
  const ids = state.compareList;
  const patterns = (typeof PATTERNS !== 'undefined' ? PATTERNS : []).filter(p => ids.includes(p.id));

  if (!patterns.length) {
    container.innerHTML = `
      <div class="compare-empty">
        <h2>Compare Patterns</h2>
        <p>Add 2‚Äì3 patterns to compare them side by side. Use the <strong>+ Compare</strong> button on any card.</p>
        <button class="btn btn-primary" onclick="navigate('gallery')">Browse Patterns</button>
      </div>`;
    return;
  }

  const fields = [
    { label: 'Preview', key: 'preview' },
    { label: 'Category', key: 'category' },
    { label: 'Maturity', key: 'maturity' },
    { label: 'Cadence', key: 'cadence' },
    { label: 'Audience', key: 'audience' },
    { label: 'Description', key: 'description' },
    { label: 'KPIs', key: 'kpis' },
    { label: 'Tags', key: 'tags' },
  ];

  container.innerHTML = `
    <div class="compare-header">
      <h2>Compare Patterns (${patterns.length})</h2>
      <button class="btn" onclick="state.compareList=[];renderCompare()">Clear All</button>
    </div>
    <div class="compare-table-wrap">
      <table class="compare-table">
        <thead>
          <tr>
            <th>Attribute</th>
            ${patterns.map(p => `<th>
              <div>${p.name}</div>
              <button class="btn-sm" data-action="remove-compare" data-id="${p.id}">‚úï Remove</button>
            </th>`).join('')}
          </tr>
        </thead>
        <tbody>
          ${fields.map(f => `
            <tr>
              <td class="compare-label">${f.label}</td>
              ${patterns.map(p => `<td>${formatCompareCell(p, f.key)}</td>`).join('')}
            </tr>
          `).join('')}
          <tr>
            <td class="compare-label">Actions</td>
            ${patterns.map(p => `<td>
              <button class="btn btn-primary" data-action="view" data-id="${p.id}">View Detail</button>
            </td>`).join('')}
          </tr>
        </tbody>
      </table>
    </div>
    ${ids.length < 3 ? `<div class="compare-hint">You can add ${3 - ids.length} more pattern${3 - ids.length !== 1 ? 's' : ''} to compare.</div>` : ''}
  `;
}

function formatCompareCell(pattern, key) {
  if (key === 'preview') {
    return `<div style="width:160px">${getPreviewSVG(pattern)}</div>`;
  }
  if (key === 'category') {
    const cat = CATEGORIES[pattern.category] || {};
    return `<span>${cat.icon || ''} ${cat.name || pattern.category}</span>`;
  }
  if (key === 'audience' || key === 'kpis' || key === 'tags') {
    const val = pattern[key];
    if (Array.isArray(val)) return val.map(v => `<span class="tag">${v}</span>`).join(' ');
    return val || '‚Äî';
  }
  if (key === 'description') {
    return (pattern[key] || '‚Äî').slice(0, 150);
  }
  return pattern[key] || '‚Äî';
}

// ============================================================
// DETAIL VIEW
// ============================================================
function renderDetail(id) {
  const container = document.getElementById('view-detail');
  if (!container) return;
  const pattern = (typeof PATTERNS !== 'undefined' ? PATTERNS : []).find(p => p.id === id);

  if (!pattern) {
    container.innerHTML = `<div class="detail-error"><h2>Pattern not found</h2><button class="btn" onclick="navigate('gallery')">‚Üê Back to Gallery</button></div>`;
    return;
  }

  const cat = CATEGORIES[pattern.category] || { name: pattern.category, color: '#666', icon: 'üìä' };
  const tabs = ['Overview', 'Layouts', 'KPIs', 'Data & Gov', 'Customize', 'Export'];

  container.innerHTML = `
    <div class="detail-header" style="border-left: 4px solid ${cat.color}">
      <button class="btn" onclick="navigate('gallery')">‚Üê Back</button>
      <div class="detail-title-block">
        <span class="category-badge" style="background:${cat.color}22;color:${cat.color}">${cat.icon} ${cat.name}</span>
        <h1>${pattern.name}</h1>
        <p>${pattern.description || ''}</p>
      </div>
      <div class="detail-actions">
        <button class="btn btn-primary" data-action="export-one" data-id="${pattern.id}">Export</button>
        <button class="btn ${state.compareList.includes(pattern.id) ? 'active' : ''}" data-action="compare" data-id="${pattern.id}">
          ${state.compareList.includes(pattern.id) ? '‚úì In Compare' : '+ Compare'}
        </button>
      </div>
    </div>
    <div class="detail-tabs">
      ${tabs.map((t, i) => `<button class="tab-btn ${state.detailTab === i ? 'active' : ''}" data-tab="${i}">${t}</button>`).join('')}
    </div>
    <div class="detail-panels">
      ${tabs.map((t, i) => `
        <div class="tab-panel ${state.detailTab === i ? 'active' : ''}" data-panel="${i}">
          ${renderDetailPanel(pattern, i)}
        </div>
      `).join('')}
    </div>
  `;
}

function renderDetailPanel(pattern, tabIndex) {
  switch (tabIndex) {
    case 0: return renderDetailOverview(pattern);
    case 1: return renderDetailLayouts(pattern);
    case 2: return renderDetailKPIs(pattern);
    case 3: return renderDetailDataGov(pattern);
    case 4: return renderDetailCustomize(pattern);
    case 5: return renderDetailExport(pattern);
    default: return '';
  }
}

function renderDetailOverview(p) {
  const cat = CATEGORIES[p.category] || {};
  return `
    <div class="overview-grid">
      <div class="overview-preview">${getPreviewSVG(p)}</div>
      <div class="overview-meta">
        <table class="meta-table">
          <tr><th>Category</th><td>${cat.icon || ''} ${cat.name || p.category}</td></tr>
          <tr><th>Maturity</th><td><span class="maturity-badge maturity-${p.maturity}">${p.maturity || '‚Äî'}</span></td></tr>
          <tr><th>Cadence</th><td>${p.cadence || '‚Äî'}</td></tr>
          <tr><th>Audience</th><td>${Array.isArray(p.audience) ? p.audience.join(', ') : (p.audience || '‚Äî')}</td></tr>
          <tr><th>Tags</th><td>${(p.tags || []).map(t => `<span class="tag">${t}</span>`).join(' ')}</td></tr>
        </table>
        <div class="overview-when">
          <h4>When to Use</h4>
          <p>${p.whenToUse || p.description || '‚Äî'}</p>
        </div>
      </div>
    </div>
  `;
}

function renderDetailLayouts(p) {
  const layouts = p.layouts || ['Single-page summary', 'Multi-section drill-down', 'Tabbed navigation'];
  return `
    <div class="layouts-section">
      <h3>Available Layouts</h3>
      <div class="layouts-grid">
        ${layouts.map((l, i) => `
          <div class="layout-card">
            <div class="layout-thumb">${getPreviewSVG(p)}</div>
            <div class="layout-name">Layout ${i + 1}: ${typeof l === 'string' ? l : (l.name || '')}</div>
          </div>
        `).join('')}
      </div>
    </div>
  `;
}

function renderDetailKPIs(p) {
  const kpis = p.kpis || [];
  return `
    <div class="kpis-section">
      <h3>Key Performance Indicators</h3>
      ${kpis.length ? `
        <table class="kpi-table">
          <thead><tr><th>KPI</th><th>Description</th><th>Target</th></tr></thead>
          <tbody>
            ${kpis.map(k => {
              if (typeof k === 'string') {
                return `<tr><td>${k}</td><td>‚Äî</td><td>‚Äî</td></tr>`;
              }
              return `<tr><td>${k.name || k}</td><td>${k.description || '‚Äî'}</td><td>${k.target || '‚Äî'}</td></tr>`;
            }).join('')}
          </tbody>
        </table>
      ` : '<p>No KPIs defined for this pattern.</p>'}
    </div>
  `;
}

function renderDetailDataGov(p) {
  return `
    <div class="datagov-section">
      <h3>Data & Governance</h3>
      <div class="datagov-grid">
        <div class="datagov-block">
          <h4>Data Sources</h4>
          <ul>${(p.dataSources || ['Primary data system']).map(d => `<li>${d}</li>`).join('')}</ul>
        </div>
        <div class="datagov-block">
          <h4>Refresh Cadence</h4>
          <p>${p.cadence || 'As defined by stakeholders'}</p>
        </div>
        <div class="datagov-block">
          <h4>Data Owner</h4>
          <p>${p.dataOwner || 'Business intelligence team'}</p>
        </div>
        <div class="datagov-block">
          <h4>Access Control</h4>
          <p>${p.accessControl || 'Role-based ‚Äî contact your BI team'}</p>
        </div>
        <div class="datagov-block">
          <h4>Compliance Notes</h4>
          <p>${p.compliance || 'Follow your organization data governance policy.'}</p>
        </div>
        <div class="datagov-block">
          <h4>SLA</h4>
          <p>${p.sla || 'Defined per deployment'}</p>
        </div>
      </div>
    </div>
  `;
}

function renderDetailCustomize(p) {
  return `
    <div class="customize-section">
      <h3>Customization Guide</h3>
      <div class="customize-list">
        <div class="customize-item">
          <h4>Colors & Branding</h4>
          <p>Replace the default palette with your organization's brand colors. Ensure sufficient contrast ratios (WCAG AA: 4.5:1).</p>
        </div>
        <div class="customize-item">
          <h4>KPI Selection</h4>
          <p>Start with the recommended KPIs, then work with stakeholders to add domain-specific metrics relevant to ${p.name}.</p>
        </div>
        <div class="customize-item">
          <h4>Layout Variants</h4>
          <p>This pattern supports ${(p.layouts || ['single-page', 'tabbed']).length} layout variants. Choose based on your audience's preference for density vs. navigation.</p>
        </div>
        <div class="customize-item">
          <h4>Data Connections</h4>
          <p>Connect to your ${p.category} data systems. Ensure field mapping aligns with the KPI definitions.</p>
        </div>
        <div class="customize-item">
          <h4>Filters & Controls</h4>
          <p>Add date range pickers, region selectors, and entity filters based on your data dimensions.</p>
        </div>
        <div class="customize-item">
          <h4>Mobile Responsiveness</h4>
          <p>Test on tablet and mobile viewports. Consider simplified views for smaller screens.</p>
        </div>
      </div>
    </div>
  `;
}

function renderDetailExport(p) {
  return `
    <div class="export-section">
      <h3>Export This Pattern</h3>
      <div class="export-options">
        <div class="export-option">
          <h4>Markdown</h4>
          <p>Documentation-ready markdown with all pattern details, suitable for wikis and README files.</p>
          <button class="btn btn-primary" onclick="exportMarkdown(['${p.id}'])">Download .md</button>
        </div>
        <div class="export-option">
          <h4>JSON</h4>
          <p>Full pattern schema as JSON, suitable for programmatic use and integration.</p>
          <button class="btn btn-primary" onclick="exportJSON(['${p.id}'])">Download .json</button>
        </div>
        <div class="export-option">
          <h4>CSV</h4>
          <p>Flat CSV export of pattern metadata for spreadsheet use.</p>
          <button class="btn btn-primary" onclick="exportCSV(['${p.id}'])">Download .csv</button>
        </div>
      </div>
    </div>
  `;
}
// ============================================================
// EXPORTS VIEW
// ============================================================
function renderExports() {
  const container = document.getElementById('view-exports');
  if (!container) return;
  const allIds = (typeof PATTERNS !== 'undefined' ? PATTERNS : []).map(p => p.id);

  container.innerHTML = `
    <div class="exports-header">
      <h2>Exports</h2>
      <p>Download pattern data in multiple formats for documentation, integration, or analysis.</p>
    </div>
    <div class="exports-grid">
      <div class="export-card">
        <div class="export-icon">üìÑ</div>
        <h3>All Patterns ‚Äî Markdown</h3>
        <p>Complete library documentation as a single Markdown file. Ideal for wikis, GitHub repos, and technical docs.</p>
        <ul>
          <li>Pattern names, descriptions, KPIs</li>
          <li>Category, maturity, cadence metadata</li>
          <li>Human-readable format</li>
        </ul>
        <button class="btn btn-primary" onclick="exportMarkdown(${JSON.stringify(allIds)})">Download All (.md)</button>
      </div>
      <div class="export-card">
        <div class="export-icon">{ }</div>
        <h3>All Patterns ‚Äî JSON</h3>
        <p>Full structured schema for all patterns. Perfect for programmatic use, API integration, or seeding other tools.</p>
        <ul>
          <li>Complete pattern schema</li>
          <li>All arrays and nested fields</li>
          <li>Machine-readable format</li>
        </ul>
        <button class="btn btn-primary" onclick="exportJSON(${JSON.stringify(allIds)})">Download All (.json)</button>
      </div>
      <div class="export-card">
        <div class="export-icon">üìä</div>
        <h3>All Patterns ‚Äî CSV</h3>
        <p>Flat tabular export of all pattern metadata. Great for spreadsheet analysis, pivot tables, and reporting.</p>
        <ul>
          <li>One row per pattern</li>
          <li>Comma-separated values</li>
          <li>Excel and Google Sheets compatible</li>
        </ul>
        <button class="btn btn-primary" onclick="exportCSV(${JSON.stringify(allIds)})">Download All (.csv)</button>
      </div>
      <div class="export-card">
        <div class="export-icon">üîó</div>
        <h3>Compare List</h3>
        <p>Export only the patterns currently in your compare list (${state.compareList.length} selected).</p>
        <ul>
          <li>Side-by-side comparison</li>
          <li>Filtered to your selection</li>
          <li>Available in all formats</li>
        </ul>
        <div class="export-compare-actions">
          <button class="btn" onclick="exportMarkdown(${JSON.stringify(state.compareList)})" ${!state.compareList.length ? 'disabled' : ''}>MD</button>
          <button class="btn" onclick="exportJSON(${JSON.stringify(state.compareList)})" ${!state.compareList.length ? 'disabled' : ''}>JSON</button>
          <button class="btn" onclick="exportCSV(${JSON.stringify(state.compareList)})" ${!state.compareList.length ? 'disabled' : ''}>CSV</button>
        </div>
        ${!state.compareList.length ? '<p class="hint">Add patterns to your compare list first.</p>' : ''}
      </div>
    </div>
  `;
}

// ============================================================
// ABOUT VIEW
// ============================================================
function renderAbout() {
  const container = document.getElementById('view-about');
  if (!container) return;
  const patterns = typeof PATTERNS !== 'undefined' ? PATTERNS : [];

  // Schema self-check
  const requiredFields = ['id', 'name', 'category', 'description'];
  const checks = requiredFields.map(field => {
    const missing = patterns.filter(p => !p[field]);
    return {
      field,
      total: patterns.length,
      missing: missing.length,
      ok: missing.length === 0,
      missingIds: missing.map(p => p.id || '(no id)').slice(0, 5),
    };
  });

  // Category coverage check
  const catCoverage = Object.keys(CATEGORIES).map(cat => ({
    cat,
    count: patterns.filter(p => p.category === cat).length,
  }));

  const allOk = checks.every(c => c.ok);

  container.innerHTML = `
    <div class="about-header">
      <h2>About This Library</h2>
      <p>A curated collection of dashboard patterns for business intelligence and analytics teams.</p>
    </div>
    <div class="about-stats">
      <div class="stat-card"><div class="stat-num">${patterns.length}</div><div class="stat-label">Total Patterns</div></div>
      <div class="stat-card"><div class="stat-num">${Object.keys(CATEGORIES).length}</div><div class="stat-label">Categories</div></div>
      <div class="stat-card"><div class="stat-num">${patterns.filter(p => p.maturity === 'starter').length}</div><div class="stat-label">Starter</div></div>
      <div class="stat-card"><div class="stat-num">${patterns.filter(p => p.maturity === 'advanced').length}</div><div class="stat-label">Advanced</div></div>
    </div>
    <div class="about-schema-check">
      <h3>Schema Validation ${allOk ? '<span class="check-pass">‚úì All OK</span>' : '<span class="check-fail">‚ö† Issues Found</span>'}</h3>
      <table class="schema-table">
        <thead><tr><th>Field</th><th>Patterns</th><th>Missing</th><th>Status</th></tr></thead>
        <tbody>
          ${checks.map(c => `
            <tr>
              <td><code>${c.field}</code></td>
              <td>${c.total}</td>
              <td>${c.missing}${c.missingIds.length ? ': ' + c.missingIds.join(', ') : ''}</td>
              <td>${c.ok ? '<span class="check-pass">‚úì</span>' : '<span class="check-fail">‚úó</span>'}</td>
            </tr>
          `).join('')}
        </tbody>
      </table>
    </div>
    <div class="about-coverage">
      <h3>Category Coverage</h3>
      <div class="coverage-grid">
        ${catCoverage.map(({ cat, count }) => {
          const c = CATEGORIES[cat];
          const pct = patterns.length ? Math.round((count / patterns.length) * 100) : 0;
          return `
            <div class="coverage-item">
              <span>${c.icon} ${c.name}</span>
              <div class="coverage-bar">
                <div class="coverage-fill" style="width:${pct}%;background:${c.color}"></div>
              </div>
              <span class="coverage-count">${count}</span>
            </div>
          `;
        }).join('')}
      </div>
    </div>
    <div class="about-categories">
      <h3>Categories</h3>
      <div class="cat-grid">
        ${Object.entries(CATEGORIES).map(([k, v]) => `
          <div class="cat-card" style="border-left:3px solid ${v.color}">
            <span class="cat-icon">${v.icon}</span>
            <span class="cat-name">${v.name}</span>
          </div>
        `).join('')}
      </div>
    </div>
  `;
}

// ============================================================
// EXPORT FUNCTIONS
// ============================================================
function downloadFile(content, filename, mimeType) {
  const blob = new Blob([content], { type: mimeType });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
  showToast(`Downloaded ${filename}`);
}

function exportMarkdown(ids) {
  const patterns = (typeof PATTERNS !== 'undefined' ? PATTERNS : []).filter(p => ids.includes(p.id));
  let md = '# Dashboard Pattern Library\n\n';
  md += `_Exported ${new Date().toISOString().slice(0, 10)} ‚Äî ${patterns.length} pattern(s)_\n\n---\n\n`;
  patterns.forEach(p => {
    const cat = CATEGORIES[p.category] || {};
    md += `## ${p.name}\n\n`;
    md += `**Category:** ${cat.icon || ''} ${cat.name || p.category}  \n`;
    md += `**Maturity:** ${p.maturity || '‚Äî'}  \n`;
    md += `**Cadence:** ${p.cadence || '‚Äî'}  \n`;
    md += `**Audience:** ${Array.isArray(p.audience) ? p.audience.join(', ') : (p.audience || '‚Äî')}  \n\n`;
    md += `### Description\n\n${p.description || '‚Äî'}\n\n`;
    if (p.kpis && p.kpis.length) {
      md += `### KPIs\n\n`;
      p.kpis.forEach(k => {
        md += `- ${typeof k === 'string' ? k : (k.name || k)}\n`;
      });
      md += '\n';
    }
    if (p.tags && p.tags.length) {
      md += `**Tags:** ${p.tags.join(', ')}\n\n`;
    }
    md += '---\n\n';
  });
  downloadFile(md, 'dashboard-patterns.md', 'text/markdown');
}

function exportJSON(ids) {
  const patterns = (typeof PATTERNS !== 'undefined' ? PATTERNS : []).filter(p => ids.includes(p.id));
  const output = {
    exportedAt: new Date().toISOString(),
    count: patterns.length,
    patterns,
  };
  downloadFile(JSON.stringify(output, null, 2), 'dashboard-patterns.json', 'application/json');
}

function exportCSV(ids) {
  const patterns = (typeof PATTERNS !== 'undefined' ? PATTERNS : []).filter(p => ids.includes(p.id));
  const headers = ['id', 'name', 'category', 'maturity', 'cadence', 'audience', 'description', 'tags'];
  const escape = v => {
    if (v === null || v === undefined) return '';
    const s = Array.isArray(v) ? v.join('; ') : String(v);
    if (s.includes(',') || s.includes('"') || s.includes('\n')) {
      return '"' + s.replace(/"/g, '""') + '"';
    }
    return s;
  };
  const rows = [headers.join(',')];
  patterns.forEach(p => {
    rows.push(headers.map(h => escape(p[h])).join(','));
  });
  downloadFile(rows.join('\n'), 'dashboard-patterns.csv', 'text/csv');
}

// ============================================================
// COMPARE MANAGEMENT
// ============================================================
function addToCompare(id) {
  if (state.compareList.includes(id)) return;
  if (state.compareList.length >= 3) {
    showToast('Compare list full (max 3). Remove one first.');
    return;
  }
  state.compareList.push(id);
  showToast('Added to compare list.');
  updateCompareCount();
}

function removeFromCompare(id) {
  state.compareList = state.compareList.filter(x => x !== id);
  showToast('Removed from compare list.');
  updateCompareCount();
}

function updateCompareCount() {
  const badge = document.getElementById('compare-count');
  if (badge) {
    badge.textContent = state.compareList.length || '';
    badge.style.display = state.compareList.length ? 'inline' : 'none';
  }
}

// ============================================================
// TOAST
// ============================================================
function showToast(msg, duration = 3000) {
  let toast = document.getElementById('toast');
  if (!toast) {
    toast = document.createElement('div');
    toast.id = 'toast';
    toast.style.cssText = [
      'position:fixed', 'bottom:24px', 'right:24px', 'z-index:9999',
      'background:#1e293b', 'color:white', 'padding:12px 20px',
      'border-radius:8px', 'font-size:14px', 'box-shadow:0 4px 12px rgba(0,0,0,0.3)',
      'transition:opacity 0.3s', 'opacity:0', 'pointer-events:none'
    ].join(';');
    document.body.appendChild(toast);
  }
  toast.textContent = msg;
  toast.style.opacity = '1';
  clearTimeout(toast._timer);
  toast._timer = setTimeout(() => { toast.style.opacity = '0'; }, duration);
}

// ============================================================
// EVENT LISTENERS & INIT
// ============================================================
function setupEventListeners() {
  // Gallery filter changes
  document.addEventListener('change', function (e) {
    if (e.target.id === 'filter-category') {
      state.filters.category = e.target.value;
      renderGallery();
    } else if (e.target.id === 'filter-audience') {
      state.filters.audience = e.target.value || null;
      renderGallery();
    } else if (e.target.id === 'filter-maturity') {
      state.filters.maturity = e.target.value || null;
      renderGallery();
    } else if (e.target.id === 'filter-cadence') {
      state.filters.cadence = e.target.value || null;
      renderGallery();
    }
  });

  // Search input
  document.addEventListener('input', function (e) {
    if (e.target.id === 'filter-search') {
      clearTimeout(state._searchTimer);
      state._searchTimer = setTimeout(() => {
        state.filters.search = e.target.value;
        renderGallery();
      }, 250);
    }
  });

  // Click delegation
  document.addEventListener('click', function (e) {
    const btn = e.target.closest('[data-action]');
    if (btn) {
      const action = btn.dataset.action;
      const id = btn.dataset.id;

      if (action === 'view') {
        navigate('detail', { id });
      } else if (action === 'compare') {
        if (state.compareList.includes(id)) {
          removeFromCompare(id);
        } else {
          addToCompare(id);
        }
        // Re-render current view to update button state
        if (state.view === 'gallery') renderGallery();
        else if (state.view === 'detail') renderDetail(state.detailId);
        else if (state.view === 'compare') renderCompare();
      } else if (action === 'remove-compare') {
        removeFromCompare(id);
        renderCompare();
      } else if (action === 'export-one') {
        navigate('exports');
      } else if (action === 'wizard-back') {
        if (state.wizard.step > 0) {
          state.wizard.step--;
          renderFinder();
        }
      } else if (action === 'wizard-next') {
        const ws = WIZARD_STEPS[state.wizard.step];
        if (ws && state.wizard.answers[ws.id]) {
          state.wizard.step++;
          renderFinder();
        }
      } else if (action === 'wizard-restart') {
        state.wizard = { step: 0, answers: {}, results: [] };
        renderFinder();
      }
      return;
    }

    // Wizard option selection
    const opt = e.target.closest('.wizard-option');
    if (opt) {
      const step = parseInt(opt.dataset.step, 10);
      const value = opt.dataset.value;
      if (!isNaN(step) && WIZARD_STEPS[step]) {
        state.wizard.answers[WIZARD_STEPS[step].id] = value;
        // Update option selection visually
        opt.closest('.wizard-options').querySelectorAll('.wizard-option').forEach(o => {
          o.classList.toggle('selected', o.dataset.value === value);
        });
        // Enable next button
        const nextBtn = document.querySelector('[data-action="wizard-next"]');
        if (nextBtn) nextBtn.removeAttribute('disabled');
      }
      return;
    }

    // Tab switching
    const tabBtn = e.target.closest('.tab-btn');
    if (tabBtn) {
      const tabIdx = parseInt(tabBtn.dataset.tab, 10);
      if (!isNaN(tabIdx)) {
        state.detailTab = tabIdx;
        document.querySelectorAll('.tab-btn').forEach((b, i) => b.classList.toggle('active', i === tabIdx));
        document.querySelectorAll('.tab-panel').forEach((p, i) => p.classList.toggle('active', i === tabIdx));
      }
      return;
    }

    // View mode toggle
    const viewModeBtn = e.target.closest('[data-viewmode]');
    if (viewModeBtn) {
      state.viewMode = viewModeBtn.dataset.viewmode;
      renderGallery();
      return;
    }
  });
}

// ============================================================
// INIT
// ============================================================
function init() {
  setupEventListeners();
  window.addEventListener('hashchange', router);
  router();
}

if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', init);
} else {
  init();
}

</script>

</body>
</html>
